{"version":3,"file":"tippy.bundle.iife.js","sources":["../src/browser.ts","../src/props.ts","../src/constants.ts","../src/bindGlobalEventListeners.ts","../src/reference.ts","../src/utils.ts","../src/popper.ts","../src/validation.ts","../src/createTippy.ts","../src/index.ts","../src/css.ts","../build/bundle.js"],"sourcesContent":["export const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n\nconst ua = isBrowser ? navigator.userAgent : ''\n\nexport const isIE = /MSIE |Trident\\//.test(ua)\nexport const isUCBrowser = /UCBrowser\\//.test(ua)\nexport const isIOS = isBrowser && /iPhone|iPad|iPod/.test(navigator.platform)\n","import { Props } from './types'\n\nexport const defaultProps: Props = {\n  allowHTML: true,\n  animateFill: false,\n  animation: 'fade',\n  appendTo: (): Element => document.body,\n  aria: 'describedby',\n  arrow: true,\n  boundary: 'scrollParent',\n  content: '',\n  delay: 0,\n  distance: 10,\n  duration: [325, 275],\n  flip: true,\n  flipBehavior: 'flip',\n  flipOnUpdate: false,\n  followCursor: false,\n  hideOnClick: true,\n  ignoreAttributes: false,\n  inertia: false,\n  interactive: false,\n  interactiveBorder: 2,\n  interactiveDebounce: 0,\n  lazy: true,\n  maxWidth: 350,\n  multiple: false,\n  offset: 0,\n  onCreate(): void {},\n  onHidden(): void {},\n  onHide(): void | false {},\n  onMount(): void {},\n  onShow(): void | false {},\n  onShown(): void {},\n  onTrigger(): void {},\n  onUntrigger(): void {},\n  placement: 'top',\n  popperOptions: {},\n  role: 'tooltip',\n  showOnCreate: false,\n  sticky: false,\n  theme: '',\n  touch: true,\n  trigger: 'mouseenter focus',\n  triggerTarget: null,\n  updateDuration: 0,\n  zIndex: 9999,\n}\n\n/**\n * If the setProps() method encounters one of these, the popperInstance must be\n * recreated\n */\nexport const POPPER_INSTANCE_DEPENDENCIES: Array<keyof Props> = [\n  'arrow',\n  'boundary',\n  'distance',\n  'flip',\n  'flipBehavior',\n  'flipOnUpdate',\n  'offset',\n  'placement',\n  'popperOptions',\n]\n","import { Props } from './types'\n\nexport const PASSIVE = { passive: true }\n\nexport const PREVENT_OVERFLOW_PADDING = 5\n\nexport const ROUND_ARROW_INNER_HTML =\n  '<svg viewBox=\"0 0 18 7\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z\"/></svg>'\n\nexport const IOS_CLASS = `__NAMESPACE_PREFIX__-iOS`\nexport const POPPER_CLASS = `__NAMESPACE_PREFIX__-popper`\nexport const TOOLTIP_CLASS = `__NAMESPACE_PREFIX__-tooltip`\nexport const CONTENT_CLASS = `__NAMESPACE_PREFIX__-content`\nexport const BACKDROP_CLASS = `__NAMESPACE_PREFIX__-backdrop`\nexport const ARROW_CLASS = `__NAMESPACE_PREFIX__-arrow`\nexport const SVG_ARROW_CLASS = `__NAMESPACE_PREFIX__-svg-arrow`\n\nexport const POPPER_SELECTOR = `.${POPPER_CLASS}`\nexport const TOOLTIP_SELECTOR = `.${TOOLTIP_CLASS}`\nexport const CONTENT_SELECTOR = `.${CONTENT_CLASS}`\nexport const BACKDROP_SELECTOR = `.${BACKDROP_CLASS}`\nexport const ARROW_SELECTOR = `.${ARROW_CLASS}`\nexport const SVG_ARROW_SELECTOR = `.${SVG_ARROW_CLASS}`\n\n// TODO: Work out best way to make these updateable\nexport const NON_UPDATEABLE_PROPS: Array<keyof Props> = ['followCursor']\n","import { isIOS } from './browser'\nimport { PASSIVE, IOS_CLASS } from './constants'\n\nexport const currentInput = { isTouch: false }\nlet lastMouseMoveTime = 0\n\n/**\n * When a `touchstart` event is fired, it's assumed the user is using touch\n * input. We'll bind a `mousemove` event listener to listen for mouse input in\n * the future. This way, the `isTouch` property is fully dynamic and will handle\n * hybrid devices that use a mix of touch + mouse input.\n */\nexport function onDocumentTouchStart(): void {\n  if (currentInput.isTouch) {\n    return\n  }\n\n  currentInput.isTouch = true\n\n  if (isIOS) {\n    document.body.classList.add(IOS_CLASS)\n  }\n\n  if (window.performance) {\n    document.addEventListener('mousemove', onDocumentMouseMove)\n  }\n}\n\n/**\n * When two `mousemove` event are fired consecutively within 20ms, it's assumed\n * the user is using mouse input again. `mousemove` can fire on touch devices as\n * well, but very rarely that quickly.\n */\nexport function onDocumentMouseMove(): void {\n  const now = performance.now()\n\n  if (now - lastMouseMoveTime < 20) {\n    currentInput.isTouch = false\n\n    document.removeEventListener('mousemove', onDocumentMouseMove)\n\n    if (!isIOS) {\n      document.body.classList.remove(IOS_CLASS)\n    }\n  }\n\n  lastMouseMoveTime = now\n}\n\n/**\n * When an element is in focus and has a tippy, leaving the tab/window and\n * returning causes it to show again. For mouse users this is unexpected, but\n * for keyboard use it makes sense.\n * TODO: find a better technique to solve this problem\n */\nexport function onWindowBlur(): void {\n  const { activeElement }: { activeElement: any } = document\n  const instance = activeElement._tippy\n\n  if (\n    activeElement &&\n    activeElement.blur &&\n    instance &&\n    !instance.state.isVisible\n  ) {\n    activeElement.blur()\n  }\n}\n\n/**\n * Adds the needed global event listeners\n */\nexport default function bindGlobalEventListeners(): void {\n  document.addEventListener('touchstart', onDocumentTouchStart, {\n    ...PASSIVE,\n    capture: true,\n  })\n  window.addEventListener('blur', onWindowBlur)\n}\n","import { ReferenceElement, Props } from './types'\nimport { defaultProps } from './props'\n\nconst keys = Object.keys(defaultProps)\n\n/**\n * Returns an object of optional props from data-tippy-* attributes\n */\nexport function getDataAttributeProps(reference: ReferenceElement): Props {\n  const props = keys.reduce((acc: any, key): Partial<Props> => {\n    const valueAsString = (\n      reference.getAttribute(`data-tippy-${key}`) || ''\n    ).trim()\n\n    if (!valueAsString) {\n      return acc\n    }\n\n    if (key === 'content') {\n      acc[key] = valueAsString\n    } else {\n      try {\n        acc[key] = JSON.parse(valueAsString)\n      } catch (e) {\n        acc[key] = valueAsString\n      }\n    }\n\n    return acc\n  }, {})\n\n  return props\n}\n","import { Props, ReferenceElement, Targets, PopperElement } from './types'\nimport { isUCBrowser } from './browser'\nimport { getDataAttributeProps } from './reference'\nimport { POPPER_CLASS } from './constants'\n\n/**\n * Determines if the value is a reference element\n */\nexport function isReferenceElement(value: any): value is ReferenceElement {\n  return !!(value && value._tippy && !value.classList.contains(POPPER_CLASS))\n}\n\n/**\n * Safe .hasOwnProperty check, for prototype-less objects\n */\nexport function hasOwnProperty(obj: object, key: string): boolean {\n  return {}.hasOwnProperty.call(obj, key)\n}\n\n/**\n * Returns an array of elements based on the value\n */\nexport function getArrayOfElements(value: Targets): Element[] {\n  if (isRealElement(value)) {\n    return [value]\n  }\n\n  if (value instanceof NodeList) {\n    return arrayFrom(value)\n  }\n\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  return arrayFrom(document.querySelectorAll(value))\n}\n\n/**\n * Returns a value at a given index depending on if it's an array or number\n */\nexport function getValueAtIndexOrReturn<T>(\n  value: T | T[],\n  index: number,\n  defaultValue: T | T[],\n): T {\n  if (Array.isArray(value)) {\n    const v = value[index]\n    return v == null\n      ? Array.isArray(defaultValue)\n        ? defaultValue[index]\n        : defaultValue\n      : v\n  }\n\n  return value\n}\n\n/**\n * Prevents errors from being thrown while accessing nested modifier objects\n * in `popperOptions`\n */\nexport function getModifier(obj: any, key: string): any {\n  return obj && obj.modifiers && obj.modifiers[key]\n}\n\n/**\n * Determines if the value is a real element\n */\nexport function isRealElement(value: any): value is Element {\n  return value instanceof Element\n}\n\n/**\n * Firefox extensions don't allow setting .innerHTML directly, this will trick\n * it\n */\nexport function innerHTML(): 'innerHTML' {\n  return 'innerHTML'\n}\n\n/**\n * Evaluates a function if one, or returns the value\n */\nexport function invokeWithArgsOrReturn(value: any, args: any[]): any {\n  return typeof value === 'function' ? value.apply(null, args) : value\n}\n\n/**\n * Sets a popperInstance `flip` modifier's enabled state\n */\nexport function setFlipModifierEnabled(modifiers: any[], value: any): void {\n  modifiers.filter((m): boolean => m.name === 'flip')[0].enabled = value\n}\n\n/**\n * Returns a new `div` element\n */\nexport function div(): HTMLDivElement {\n  return document.createElement('div')\n}\n\n/**\n * Applies a transition duration to a list of elements\n */\nexport function setTransitionDuration(\n  els: (HTMLDivElement | null)[],\n  value: number,\n): void {\n  els.forEach((el): void => {\n    if (el) {\n      el.style.transitionDuration = `${value}ms`\n    }\n  })\n}\n\n/**\n * Sets the visibility state to elements so they can begin to transition\n */\nexport function setVisibilityState(\n  els: (HTMLDivElement | null)[],\n  state: 'visible' | 'hidden',\n): void {\n  els.forEach((el): void => {\n    if (el) {\n      el.setAttribute('data-state', state)\n    }\n  })\n}\n\n/**\n * Evaluates the props object by merging data attributes and disabling\n * conflicting props where necessary\n */\nexport function evaluateProps(\n  reference: ReferenceElement,\n  props: Props,\n): Props {\n  const out = {\n    ...props,\n    content: invokeWithArgsOrReturn(props.content, [reference]),\n    ...(props.ignoreAttributes ? {} : getDataAttributeProps(reference)),\n  }\n\n  if (out.animateFill) {\n    out.arrow = false\n  }\n\n  if (out.arrow || isUCBrowser) {\n    out.animateFill = false\n  }\n\n  return out\n}\n\n/**\n * Debounce utility. To avoid bloating bundle size, we're only passing 1\n * argument here, a more generic function would pass all arguments. Only\n * `onMouseMove` uses this which takes the event object for now.\n */\nexport function debounce<T>(\n  fn: (arg: T) => void,\n  ms: number,\n): (arg: T) => void {\n  // Avoid wrapping in `setTimeout` if ms is 0 anyway\n  if (ms === 0) {\n    return fn\n  }\n\n  let timeout: any\n\n  return (arg): void => {\n    clearTimeout(timeout)\n    timeout = setTimeout((): void => {\n      fn(arg)\n    }, ms)\n  }\n}\n\n/**\n * Returns offsets for virtual reference when using a cursor point\n */\nexport function getVirtualOffsets(\n  popper: PopperElement,\n  isVerticalPlacement: boolean,\n): {\n  size: number\n  x: number\n  y: number\n} {\n  const size = isVerticalPlacement ? popper.offsetWidth : popper.offsetHeight\n\n  return {\n    size,\n    x: isVerticalPlacement ? size : 0,\n    y: isVerticalPlacement ? 0 : size,\n  }\n}\n\n/**\n * Preserves the original function invocation when another function replaces it\n */\nexport function preserveInvocation<T>(\n  originalFn: undefined | ((...args: any) => void),\n  currentFn: undefined | ((...args: any) => void),\n  args: T[],\n): void {\n  if (originalFn && originalFn !== currentFn) {\n    originalFn.apply(null, args)\n  }\n}\n\n/**\n * Deletes properties from an object (pure)\n */\nexport function removeProperties<T>(\n  partialProps: T,\n  keys: Array<keyof T>,\n): Partial<T> {\n  const clone = { ...partialProps }\n  keys.forEach((key): void => {\n    delete clone[key]\n  })\n  return clone\n}\n\n/**\n * Ponyfill for Array.from - converts iterable values to an array\n */\nexport function arrayFrom(value: ArrayLike<any>): any[] {\n  return [].slice.call(value)\n}\n\n/**\n * Works like Element.prototype.closest, but uses a callback instead\n */\nexport function closestCallback(\n  element: Element | null,\n  callback: Function,\n): Element | null {\n  while (element) {\n    if (callback(element)) {\n      return element\n    }\n\n    element = element.parentElement\n  }\n\n  return null\n}\n\n/**\n * Determines if an array or string includes a string\n */\nexport function includes(a: string[] | string, b: string): boolean {\n  return a.indexOf(b) > -1\n}\n","import {\n  PopperElement,\n  Props,\n  PopperChildren,\n  BasePlacement,\n  Placement,\n} from './types'\nimport { innerHTML, div, isRealElement } from './utils'\nimport { isUCBrowser } from './browser'\nimport {\n  POPPER_CLASS,\n  TOOLTIP_CLASS,\n  BACKDROP_CLASS,\n  CONTENT_CLASS,\n  ARROW_CLASS,\n  SVG_ARROW_CLASS,\n  TOOLTIP_SELECTOR,\n  BACKDROP_SELECTOR,\n  CONTENT_SELECTOR,\n  ARROW_SELECTOR,\n  SVG_ARROW_SELECTOR,\n  ROUND_ARROW_INNER_HTML,\n} from './constants'\n\n/**\n * Sets the innerHTML of an element\n */\nexport function setInnerHTML(element: Element, html: string | Element): void {\n  element[innerHTML()] = isRealElement(html) ? html[innerHTML()] : html\n}\n\n/**\n * Sets the content of a tooltip\n */\nexport function setContent(\n  contentEl: PopperChildren['content'],\n  props: Props,\n): void {\n  if (isRealElement(props.content)) {\n    setInnerHTML(contentEl, '')\n    contentEl.appendChild(props.content)\n  } else if (typeof props.content !== 'function') {\n    const key: 'innerHTML' | 'textContent' = props.allowHTML\n      ? 'innerHTML'\n      : 'textContent'\n    contentEl[key] = props.content\n  }\n}\n\n/**\n * Returns the child elements of a popper element\n */\nexport function getChildren(popper: PopperElement): PopperChildren {\n  return {\n    tooltip: popper.querySelector(TOOLTIP_SELECTOR) as HTMLDivElement,\n    backdrop: popper.querySelector(BACKDROP_SELECTOR),\n    content: popper.querySelector(CONTENT_SELECTOR) as HTMLDivElement,\n    arrow:\n      popper.querySelector(ARROW_SELECTOR) ||\n      popper.querySelector(SVG_ARROW_SELECTOR),\n  }\n}\n\n/**\n * Adds `data-inertia` attribute\n */\nexport function addInertia(tooltip: PopperChildren['tooltip']): void {\n  tooltip.setAttribute('data-inertia', '')\n}\n\n/**\n * Removes `data-inertia` attribute\n */\nexport function removeInertia(tooltip: PopperChildren['tooltip']): void {\n  tooltip.removeAttribute('data-inertia')\n}\n\n/**\n * Creates an arrow element and returns it\n */\nexport function createArrowElement(arrow: Props['arrow']): HTMLDivElement {\n  const arrowElement = div()\n\n  if (arrow === true) {\n    arrowElement.className = ARROW_CLASS\n  } else {\n    arrowElement.className = SVG_ARROW_CLASS\n\n    if (isRealElement(arrow)) {\n      arrowElement.appendChild(arrow)\n    } else {\n      setInnerHTML(\n        arrowElement,\n        arrow === 'round' ? ROUND_ARROW_INNER_HTML : (arrow as string),\n      )\n    }\n  }\n\n  return arrowElement\n}\n\n/**\n * Creates a backdrop element and returns it\n */\nexport function createBackdropElement(isVisible: boolean): HTMLDivElement {\n  const backdrop = div()\n  backdrop.className = BACKDROP_CLASS\n  backdrop.setAttribute('data-state', isVisible ? 'visible' : 'hidden')\n  return backdrop\n}\n\n/**\n * Adds interactive-related attributes\n */\nexport function addInteractive(tooltip: PopperChildren['tooltip']): void {\n  tooltip.setAttribute('data-interactive', '')\n}\n\n/**\n * Removes interactive-related attributes\n */\nexport function removeInteractive(tooltip: PopperChildren['tooltip']): void {\n  tooltip.removeAttribute('data-interactive')\n}\n\n/**\n * Add/remove transitionend listener from tooltip\n */\nexport function updateTransitionEndListener(\n  tooltip: PopperChildren['tooltip'],\n  action: 'add' | 'remove',\n  listener: (event: TransitionEvent) => void,\n): void {\n  const eventName =\n    isUCBrowser && document.body.style.webkitTransition !== undefined\n      ? 'webkitTransitionEnd'\n      : 'transitionend'\n  tooltip[\n    (action + 'EventListener') as 'addEventListener' | 'removeEventListener'\n  ](eventName, listener as EventListener)\n}\n\n/**\n * Returns the popper's placement, ignoring shifting (top-start, etc)\n */\nexport function getBasePlacement(placement: Placement): BasePlacement {\n  return placement.split('-')[0] as BasePlacement\n}\n\n/**\n * Triggers reflow\n */\nexport function reflow(popper: PopperElement): void {\n  void popper.offsetHeight\n}\n\n/**\n * Adds/removes theme from tooltip's classList\n */\nexport function updateTheme(\n  tooltip: PopperChildren['tooltip'],\n  action: 'add' | 'remove',\n  theme: Props['theme'],\n): void {\n  theme.split(' ').forEach(\n    (name): void => {\n      if (name) {\n        tooltip.classList[action](`${name}-theme`)\n      }\n    },\n  )\n}\n\n/**\n * Constructs the popper element and returns it\n */\nexport function createPopperElement(id: number, props: Props): PopperElement {\n  const popper = div()\n  popper.className = POPPER_CLASS\n  popper.style.position = 'absolute'\n  popper.style.top = '0'\n  popper.style.left = '0'\n\n  const tooltip = div()\n  tooltip.className = TOOLTIP_CLASS\n  tooltip.id = `__NAMESPACE_PREFIX__-${id}`\n  tooltip.setAttribute('data-state', 'hidden')\n  tooltip.setAttribute('tabindex', '-1')\n\n  updateTheme(tooltip, 'add', props.theme)\n\n  const content = div()\n  content.className = CONTENT_CLASS\n  content.setAttribute('data-state', 'hidden')\n\n  if (props.interactive) {\n    addInteractive(tooltip)\n  }\n\n  if (props.arrow) {\n    tooltip.setAttribute('data-arrow', '')\n    tooltip.appendChild(createArrowElement(props.arrow))\n  }\n\n  if (props.animateFill) {\n    tooltip.appendChild(createBackdropElement(false))\n    tooltip.setAttribute('data-animatefill', '')\n  }\n\n  if (props.inertia) {\n    addInertia(tooltip)\n  }\n\n  setContent(content, props)\n\n  tooltip.appendChild(content)\n  popper.appendChild(tooltip)\n\n  updatePopperElement(popper, props, props, false)\n\n  return popper\n}\n\n/**\n * Updates the popper element based on the new props\n */\nexport function updatePopperElement(\n  popper: PopperElement,\n  prevProps: Props,\n  nextProps: Props,\n  isVisible: boolean,\n): void {\n  const { tooltip, content, backdrop, arrow } = getChildren(popper)\n\n  popper.style.zIndex = '' + nextProps.zIndex\n\n  tooltip.setAttribute('data-animation', nextProps.animation)\n  tooltip.style.maxWidth =\n    nextProps.maxWidth + (typeof nextProps.maxWidth === 'number' ? 'px' : '')\n\n  if (nextProps.role) {\n    tooltip.setAttribute('role', nextProps.role)\n  } else {\n    tooltip.removeAttribute('role')\n  }\n\n  if (prevProps.content !== nextProps.content) {\n    setContent(content, nextProps)\n  }\n\n  // animateFill\n  if (!prevProps.animateFill && nextProps.animateFill) {\n    tooltip.appendChild(createBackdropElement(isVisible))\n    tooltip.setAttribute('data-animatefill', '')\n  } else if (prevProps.animateFill && !nextProps.animateFill) {\n    tooltip.removeChild(backdrop!)\n    tooltip.removeAttribute('data-animatefill')\n  }\n\n  // arrow\n  if (!prevProps.arrow && nextProps.arrow) {\n    // false to true\n    tooltip.appendChild(createArrowElement(nextProps.arrow))\n    tooltip.setAttribute('data-arrow', '')\n  } else if (prevProps.arrow && !nextProps.arrow) {\n    // true to false\n    tooltip.removeChild(arrow!)\n    tooltip.removeAttribute('data-arrow')\n  } else if (prevProps.arrow !== nextProps.arrow) {\n    // true to 'round' or vice-versa\n    tooltip.removeChild(arrow!)\n    tooltip.appendChild(createArrowElement(nextProps.arrow))\n  }\n\n  // interactive\n  if (!prevProps.interactive && nextProps.interactive) {\n    addInteractive(tooltip)\n  } else if (prevProps.interactive && !nextProps.interactive) {\n    removeInteractive(tooltip)\n  }\n\n  // inertia\n  if (!prevProps.inertia && nextProps.inertia) {\n    addInertia(tooltip)\n  } else if (prevProps.inertia && !nextProps.inertia) {\n    removeInertia(tooltip)\n  }\n\n  // theme\n  if (prevProps.theme !== nextProps.theme) {\n    updateTheme(tooltip, 'remove', prevProps.theme)\n    updateTheme(tooltip, 'add', nextProps.theme)\n  }\n}\n\n/**\n * Determines if the mouse cursor is outside of the popper's interactive border\n * region\n */\nexport function isCursorOutsideInteractiveBorder(\n  popperPlacement: BasePlacement,\n  popperRect: ClientRect,\n  event: MouseEvent,\n  props: Props,\n): boolean {\n  if (!popperPlacement) {\n    return true\n  }\n\n  const { clientX: x, clientY: y } = event\n  const { interactiveBorder, distance } = props\n\n  const exceedsTop =\n    popperRect.top - y >\n    (popperPlacement === 'top'\n      ? interactiveBorder + distance\n      : interactiveBorder)\n\n  const exceedsBottom =\n    y - popperRect.bottom >\n    (popperPlacement === 'bottom'\n      ? interactiveBorder + distance\n      : interactiveBorder)\n\n  const exceedsLeft =\n    popperRect.left - x >\n    (popperPlacement === 'left'\n      ? interactiveBorder + distance\n      : interactiveBorder)\n\n  const exceedsRight =\n    x - popperRect.right >\n    (popperPlacement === 'right'\n      ? interactiveBorder + distance\n      : interactiveBorder)\n\n  return exceedsTop || exceedsBottom || exceedsLeft || exceedsRight\n}\n","import { Props, Targets, Instance } from './types'\nimport { hasOwnProperty, includes } from './utils'\nimport { defaultProps } from './props'\n\nfunction getDevMessage(message: string): string {\n  return (\n    '%ctippy.js\\n\\n' +\n    '%c' +\n    message +\n    '\\n\\n' +\n    '%cüë∑‚Äç This is a development only message. It will be removed in ' +\n    'production builds.'\n  )\n}\n\nexport function getFormattedMessage(message: string): string[] {\n  return [\n    getDevMessage(message),\n    // title\n    'color: #00C584; font-size: 1.3em; font-weight: bold;',\n    // message\n    'line-height: 1.5',\n    // footer\n    'color: #a6a095;',\n  ]\n}\n\n/**\n * Helpful wrapper around `console.warn()`.\n * TODO: Should we use a cache so it only warns a single time and not spam the\n * console? (Need to consider hot reloading and invalidation though). Chrome\n * already batches warnings as well.\n */\nexport function warnWhen(condition: boolean, message: string): void {\n  if (condition) {\n    console.warn(...getFormattedMessage(message))\n  }\n}\n\n/**\n * Helpful wrapper around thrown errors\n */\nexport function throwErrorWhen(condition: boolean, message: string): void {\n  if (condition) {\n    throw new Error(message)\n  }\n}\n\n/**\n * Validates props with the valid `defaultProps` object\n */\nexport function validateProps(partialProps: Partial<Props> = {}): void {\n  Object.keys(partialProps).forEach((prop): void => {\n    const value = (partialProps as any)[prop]\n    const didPassTargetProp = prop === 'target'\n    const didPassA11yProp = prop === 'a11y'\n    const didPassShowOnInitProp = prop === 'showOnInit'\n    const didPassArrowTypeProp = prop === 'arrowType'\n    const didPassTouchHoldProp = prop === 'touchHold'\n    const didPassSizeProp = prop === 'size'\n    const didPassGoogleTheme = prop === 'theme' && value === 'google'\n    const didSpecifyPlacementInPopperOptions =\n      prop === 'popperOptions' && value && hasOwnProperty(value, 'placement')\n    const didPassOtherUnknownProp =\n      !hasOwnProperty(defaultProps, prop) &&\n      !didPassTargetProp &&\n      !didPassA11yProp &&\n      !didPassShowOnInitProp &&\n      !includes(['followCursor'], prop)\n\n    warnWhen(\n      didPassTargetProp,\n      'The `target` prop was removed in v5 and ' +\n        'replaced with the `delegate()` method. Read more here: ' +\n        'https//atomiks.github.io/tippyjs/addons#event-delegation',\n    )\n\n    warnWhen(\n      didPassA11yProp,\n      'The `a11y` prop was removed in v5. Make ' +\n        'sure the element you are giving a tippy to is natively ' +\n        'focusable, such as <button> or <input>, not <div> or <span>.',\n    )\n\n    warnWhen(\n      didPassShowOnInitProp,\n      'The `showOnInit` prop was renamed to `showOnCreate` in v5.',\n    )\n\n    warnWhen(\n      didPassArrowTypeProp,\n      'The `arrowType` prop was removed in v5 ' +\n        'in favor of overloading the `arrow` prop. Specify ' +\n        '`arrow: \"' +\n        value +\n        '\"` instead.',\n    )\n\n    warnWhen(\n      didPassTouchHoldProp,\n      'The `touchHold` prop was removed in v5 in favor of overloading the ' +\n        '`touch` prop. Specify `touch: \"hold\"` instead.',\n    )\n\n    warnWhen(\n      didPassSizeProp,\n      'The `size` prop was removed in v5. Instead, use a theme that ' +\n        'specifies `font-size` and `padding` CSS properties.',\n    )\n\n    warnWhen(\n      didPassOtherUnknownProp,\n      '`' +\n        prop +\n        '` is not a valid prop. You ' +\n        'may have spelled it incorrectly. View all of the valid props ' +\n        'here: https://atomiks.github.io/tippyjs/all-props/',\n    )\n\n    warnWhen(\n      didPassGoogleTheme,\n      'The included theme `google` was renamed to `material` in v5.',\n    )\n\n    warnWhen(\n      didSpecifyPlacementInPopperOptions,\n      'Specifying `placement` in `popperOptions` is not supported. Use the ' +\n        'base-level `placement` prop instead.',\n    )\n  })\n}\n\n/**\n * Validates the `targets` value passed to `tippy()`\n */\nexport function validateTargets(targets: Targets): void {\n  const didPassFalsyValue = !targets\n  const didPassPlainObject =\n    Object.prototype.toString.call(targets) === '[object Object]' &&\n    !(targets as any).addEventListener\n\n  throwErrorWhen(\n    didPassFalsyValue,\n    '`tippy()` was passed `' +\n      targets +\n      '` (an invalid falsy value) as its targets argument. Valid types are: ' +\n      'String (CSS selector), Element, Element[], or NodeList.',\n  )\n\n  throwErrorWhen(\n    didPassPlainObject,\n    '`tippy()` was passed a plain object (virtual ' +\n      'reference element) which is no longer supported in v5. Instead, pass ' +\n      'a placeholder element like `document.createElement(\"div\")`',\n  )\n}\n\n/**\n * Ensures the instance has been configured with the extra prop's functionality\n * if the user is specifying it as a prop\n */\nexport function validateExtraPropsFunctionality(\n  instance: Instance,\n  partialProps: Partial<Props> = {},\n): void {\n  const extraProps = ['followCursor']\n\n  extraProps.forEach((prop): void => {\n    if (hasOwnProperty(partialProps, prop) && !instance.__extraProps[prop]) {\n      const didPassFollowCursor = prop === 'followCursor'\n      const didPassOtherExtraProp = !didPassFollowCursor\n\n      warnWhen(\n        didPassFollowCursor,\n        'The `followCursor` prop was specified, but the instance has not ' +\n          'been configured with followCursor functionality. In v5, ' +\n          '`followCursor` was moved to `extra-props`. View details: ' +\n          'https://atomiks.github.io/tippyjs/extra-props/',\n      )\n\n      warnWhen(\n        didPassOtherExtraProp,\n        'The `' +\n          prop +\n          '` prop was specified, but the instance has not been configured ' +\n          'with ' +\n          prop +\n          ' functionality. View details: ' +\n          'https://atomiks.github.io/tippyjs/extra-props/',\n      )\n    }\n  })\n}\n","import Popper from 'popper.js'\nimport {\n  ReferenceElement,\n  PopperInstance,\n  Props,\n  Instance,\n  Content,\n} from './types'\nimport { isIE } from './browser'\nimport {\n  PASSIVE,\n  PREVENT_OVERFLOW_PADDING,\n  NON_UPDATEABLE_PROPS,\n} from './constants'\nimport { currentInput } from './bindGlobalEventListeners'\nimport { defaultProps, POPPER_INSTANCE_DEPENDENCIES } from './props'\nimport {\n  createPopperElement,\n  updatePopperElement,\n  getChildren,\n  getBasePlacement,\n  updateTransitionEndListener,\n  isCursorOutsideInteractiveBorder,\n  reflow,\n} from './popper'\nimport {\n  hasOwnProperty,\n  getValueAtIndexOrReturn,\n  getModifier,\n  includes,\n  invokeWithArgsOrReturn,\n  setFlipModifierEnabled,\n  evaluateProps,\n  setTransitionDuration,\n  setVisibilityState,\n  debounce,\n  preserveInvocation,\n  closestCallback,\n} from './utils'\nimport {\n  warnWhen,\n  validateProps,\n  validateExtraPropsFunctionality,\n} from './validation'\n\ninterface PaddingObject {\n  top: number\n  right: number\n  bottom: number\n  left: number\n}\n\ninterface Listener {\n  eventType: string\n  handler: EventListenerOrEventListenerObject\n  options: boolean | object\n}\n\nlet idCounter = 1\n// Workaround for IE11's lack of new MouseEvent constructor\nlet mouseMoveListeners: ((event: MouseEvent) => void)[] = []\n\n/**\n * Creates and returns a Tippy object. We're using a closure pattern instead of\n * a class so that the exposed object API is clean without private members\n * prefixed with `_`.\n */\nexport default function createTippy(\n  reference: ReferenceElement,\n  collectionProps: Props,\n): Instance | null {\n  const props = evaluateProps(reference, collectionProps)\n\n  // If the reference shouldn't have multiple tippys, return null early\n  if (!props.multiple && reference._tippy) {\n    return null\n  }\n\n  /* ======================= üîí Private members üîí ======================= */\n  let lastTriggerEventType: string\n  let showTimeout: any\n  let hideTimeout: any\n  let scheduleHideAnimationFrame: number\n  let isBeingDestroyed = false\n  let hasMountCallbackRun = false\n  let didHideDueToDocumentMouseDown = false\n  let currentMountCallback: () => void\n  let currentTransitionEndListener: (event: TransitionEvent) => void\n  let listeners: Listener[] = []\n  let debouncedOnMouseMove = debounce(onMouseMove, props.interactiveDebounce)\n\n  /* ======================= üîë Public members üîë ======================= */\n  const id = idCounter++\n  const popper = createPopperElement(id, props)\n  const popperChildren = getChildren(popper)\n  const popperInstance: PopperInstance | null = null\n\n  // These two elements are static\n  const { tooltip, content } = popperChildren\n\n  const state = {\n    // The current real placement (`data-placement` attribute)\n    currentPlacement: props.placement,\n    // Does the instance have a pending timeout for show()?\n    isScheduledToShow: false,\n    // Is the instance currently enabled?\n    isEnabled: true,\n    // Is the tippy currently showing and not transitioning out?\n    isVisible: false,\n    // Has the instance been destroyed?\n    isDestroyed: false,\n    // Is the tippy currently mounted to the DOM?\n    isMounted: false,\n    // Has the tippy finished transitioning in?\n    isShown: false,\n  }\n\n  const instance: Instance = {\n    // properties\n    id,\n    reference,\n    popper,\n    popperChildren,\n    popperInstance,\n    props,\n    state,\n    // methods\n    clearDelayTimeouts,\n    setProps,\n    setContent,\n    show,\n    hide,\n    enable,\n    disable,\n    destroy,\n  }\n\n  if (__DEV__) {\n    Object.defineProperty(instance, 'set', {\n      value(): void {\n        warnWhen(true, '`set()` was renamed to `setProps()` in v5.')\n      },\n      enumerable: false,\n    })\n\n    Object.defineProperty(instance, '__extraProps', {\n      value: {},\n      enumerable: false,\n    })\n  }\n\n  /* ==================== Initial instance mutations =================== */\n  reference._tippy = instance\n  popper._tippy = instance\n\n  addTriggersToEventListenersTarget()\n\n  if (!props.lazy) {\n    createPopperInstance()\n  }\n\n  if (props.showOnCreate) {\n    scheduleShow()\n  }\n\n  // Prevent a tippy with a delay from hiding if the cursor left then returned\n  // before it started hiding\n  popper.addEventListener('mouseenter', (): void => {\n    if (\n      instance.props.interactive &&\n      instance.state.isVisible &&\n      lastTriggerEventType === 'mouseenter'\n    ) {\n      instance.clearDelayTimeouts()\n    }\n  })\n  popper.addEventListener('mouseleave', (): void => {\n    if (instance.props.interactive && lastTriggerEventType === 'mouseenter') {\n      document.addEventListener('mousemove', debouncedOnMouseMove)\n    }\n  })\n\n  props.onCreate(instance)\n\n  return instance\n\n  /* ======================= üîí Private methods üîí ======================= */\n  function getNormalizedTouchSettings(): [string | boolean, number] {\n    const { touch } = instance.props\n    return Array.isArray(touch) ? touch : [touch, 0]\n  }\n\n  function getIsCustomTouchBehavior(): boolean {\n    return getNormalizedTouchSettings()[0] === 'hold'\n  }\n\n  function getTransitionableElements(): (HTMLDivElement | null)[] {\n    return [tooltip, content, instance.popperChildren.backdrop]\n  }\n\n  function getEventListenersTarget(): ReferenceElement {\n    return instance.props.triggerTarget || reference\n  }\n\n  function cleanupInteractiveMouseListeners(): void {\n    document.body.removeEventListener('mouseleave', scheduleHide)\n    document.removeEventListener('mousemove', debouncedOnMouseMove)\n    mouseMoveListeners = mouseMoveListeners.filter(\n      (listener): boolean => listener !== debouncedOnMouseMove,\n    )\n  }\n\n  function onDocumentMouseDown(event: MouseEvent): void {\n    // Clicked on interactive popper\n    if (\n      instance.props.interactive &&\n      popper.contains(event.target as Element)\n    ) {\n      return\n    }\n\n    // Clicked on the event listeners target\n    if (getEventListenersTarget().contains(event.target as Element)) {\n      if (currentInput.isTouch) {\n        return\n      }\n\n      if (\n        instance.state.isVisible &&\n        includes(instance.props.trigger, 'click')\n      ) {\n        return\n      }\n    }\n\n    if (instance.props.hideOnClick === true) {\n      instance.clearDelayTimeouts()\n      instance.hide()\n\n      // `mousedown` event is fired right before `focus`. This lets a tippy with\n      // `focus` trigger know that it should not show\n      didHideDueToDocumentMouseDown = true\n      setTimeout((): void => {\n        didHideDueToDocumentMouseDown = false\n      })\n\n      // The listener gets added in `scheduleShow()`, but this may be hiding it\n      // before it shows, and hide()'s early bail-out behavior can prevent it\n      // from being cleaned up\n      if (!instance.state.isMounted) {\n        removeDocumentMouseDownListener()\n      }\n    }\n  }\n\n  function addDocumentMouseDownListener(): void {\n    document.addEventListener('mousedown', onDocumentMouseDown, true)\n  }\n\n  function removeDocumentMouseDownListener(): void {\n    document.removeEventListener('mousedown', onDocumentMouseDown, true)\n  }\n\n  function makeSticky(): void {\n    setTransitionDuration([popper], isIE ? 0 : instance.props.updateDuration)\n\n    let prevRefRect = reference.getBoundingClientRect()\n\n    function updatePosition(): void {\n      const currentRefRect = reference.getBoundingClientRect()\n\n      // Only schedule an update if the reference rect has changed\n      if (\n        prevRefRect.top !== currentRefRect.top ||\n        prevRefRect.right !== currentRefRect.right ||\n        prevRefRect.bottom !== currentRefRect.bottom ||\n        prevRefRect.left !== currentRefRect.left\n      ) {\n        instance.popperInstance!.scheduleUpdate()\n      }\n\n      prevRefRect = currentRefRect\n\n      if (instance.state.isMounted) {\n        requestAnimationFrame(updatePosition)\n      }\n    }\n\n    updatePosition()\n  }\n\n  function onTransitionedOut(duration: number, callback: () => void): void {\n    onTransitionEnd(duration, (): void => {\n      if (\n        !instance.state.isVisible &&\n        popper.parentNode &&\n        popper.parentNode.contains(popper)\n      ) {\n        callback()\n      }\n    })\n  }\n\n  function onTransitionedIn(duration: number, callback: () => void): void {\n    onTransitionEnd(duration, callback)\n  }\n\n  function onTransitionEnd(duration: number, callback: () => void): void {\n    /**\n     * Listener added as the `transitionend` handler\n     */\n    function listener(event: TransitionEvent): void {\n      if (event.target === tooltip) {\n        updateTransitionEndListener(tooltip, 'remove', listener)\n        callback()\n      }\n    }\n\n    // Make callback synchronous if duration is 0\n    // `transitionend` won't fire otherwise\n    if (duration === 0) {\n      return callback()\n    }\n\n    updateTransitionEndListener(tooltip, 'remove', currentTransitionEndListener)\n    updateTransitionEndListener(tooltip, 'add', listener)\n\n    currentTransitionEndListener = listener\n  }\n\n  function on(\n    eventType: string,\n    handler: EventListener,\n    options: boolean | object = false,\n  ): void {\n    getEventListenersTarget().addEventListener(eventType, handler, options)\n    listeners.push({ eventType, handler, options })\n  }\n\n  function addTriggersToEventListenersTarget(): void {\n    if (getIsCustomTouchBehavior()) {\n      on('touchstart', onTrigger, PASSIVE)\n      on('touchend', onMouseLeave as EventListener, PASSIVE)\n    }\n\n    // `click` for keyboard. Mouse uses `mousedown` (onDocumentMouseDown)\n    if (!includes(instance.props.trigger, 'click')) {\n      on('click', (): void => {\n        if (!currentInput.isTouch && instance.props.hideOnClick === true) {\n          instance.hide()\n        }\n      })\n    }\n\n    instance.props.trigger\n      .trim()\n      .split(' ')\n      .forEach((eventType): void => {\n        if (eventType === 'manual') {\n          return\n        }\n\n        on(eventType, onTrigger)\n\n        switch (eventType) {\n          case 'mouseenter':\n            on('mouseleave', onMouseLeave as EventListener)\n            break\n          case 'focus':\n            on(isIE ? 'focusout' : 'blur', onBlur as EventListener)\n            break\n        }\n      })\n  }\n\n  function removeTriggersFromEventListenersTarget(): void {\n    listeners.forEach(({ eventType, handler, options }: Listener): void => {\n      getEventListenersTarget().removeEventListener(eventType, handler, options)\n    })\n    listeners = []\n  }\n\n  function onTrigger(event: Event): void {\n    if (\n      didHideDueToDocumentMouseDown ||\n      !instance.state.isEnabled ||\n      isEventListenerStopped(event)\n    ) {\n      return\n    }\n\n    if (!instance.state.isVisible) {\n      lastTriggerEventType = event.type\n\n      if (event instanceof MouseEvent) {\n        // If scrolling, `mouseenter` events can be fired if the cursor lands\n        // over a new target, but `mousemove` events don't get fired. This\n        // causes interactive tooltips to get stuck open until the cursor is\n        // moved\n        mouseMoveListeners.forEach((listener): void => listener(event))\n      }\n    }\n\n    // Toggle show/hide when clicking click-triggered tooltips\n    if (\n      event.type === 'click' &&\n      instance.props.hideOnClick !== false &&\n      instance.state.isVisible\n    ) {\n      scheduleHide(event)\n    } else {\n      const [value, duration] = getNormalizedTouchSettings()\n\n      if (currentInput.isTouch && value === 'hold' && duration) {\n        // We can hijack the show timeout here, it will be cleared by\n        // `scheduleHide()` when necessary\n        showTimeout = setTimeout((): void => {\n          scheduleShow(event)\n        }, duration)\n      } else {\n        scheduleShow(event)\n      }\n    }\n  }\n\n  function onMouseMove(event: MouseEvent): void {\n    const isCursorOverReferenceOrPopper = closestCallback(\n      event.target as Element,\n      (el: Element): boolean => el === reference || el === popper,\n    )\n\n    if (isCursorOverReferenceOrPopper) {\n      return\n    }\n\n    if (\n      isCursorOutsideInteractiveBorder(\n        getBasePlacement(instance.state.currentPlacement),\n        popper.getBoundingClientRect(),\n        event,\n        instance.props,\n      )\n    ) {\n      cleanupInteractiveMouseListeners()\n      scheduleHide(event)\n    }\n  }\n\n  function onMouseLeave(event: MouseEvent): void {\n    if (isEventListenerStopped(event)) {\n      return\n    }\n\n    if (instance.props.interactive) {\n      document.body.addEventListener('mouseleave', scheduleHide)\n      document.addEventListener('mousemove', debouncedOnMouseMove)\n      mouseMoveListeners.push(debouncedOnMouseMove)\n\n      return\n    }\n\n    scheduleHide(event)\n  }\n\n  function onBlur(event: FocusEvent): void {\n    if (event.target !== getEventListenersTarget()) {\n      return\n    }\n\n    // If focus was moved to within the popper\n    if (\n      instance.props.interactive &&\n      event.relatedTarget &&\n      popper.contains(event.relatedTarget as Element)\n    ) {\n      return\n    }\n\n    scheduleHide(event)\n  }\n\n  function isEventListenerStopped(event: Event): boolean {\n    const supportsTouch = 'ontouchstart' in window\n    const isTouchEvent = includes(event.type, 'touch')\n    const isCustomTouch = getIsCustomTouchBehavior()\n\n    return (\n      (supportsTouch &&\n        currentInput.isTouch &&\n        isCustomTouch &&\n        !isTouchEvent) ||\n      (currentInput.isTouch && !isCustomTouch && isTouchEvent)\n    )\n  }\n\n  function createPopperInstance(): void {\n    const { popperOptions } = instance.props\n    const { arrow } = instance.popperChildren\n    const preventOverflowModifier = getModifier(\n      popperOptions,\n      'preventOverflow',\n    )\n\n    function applyMutations(data: Popper.Data): void {\n      instance.state.currentPlacement = data.placement\n\n      if (instance.props.flip && !instance.props.flipOnUpdate) {\n        if (data.flipped) {\n          instance.popperInstance!.options.placement = data.placement\n        }\n\n        setFlipModifierEnabled(instance.popperInstance!.modifiers, false)\n      }\n\n      tooltip.setAttribute('data-placement', data.placement)\n      if (data.attributes['x-out-of-boundaries'] !== false) {\n        tooltip.setAttribute('data-out-of-boundaries', '')\n      } else {\n        tooltip.removeAttribute('data-out-of-boundaries')\n      }\n\n      const basePlacement = getBasePlacement(data.placement)\n      const isVerticalPlacement = includes(['top', 'bottom'], basePlacement)\n      const isSecondaryPlacement = includes(['bottom', 'right'], basePlacement)\n\n      // Apply `distance` prop\n      const tooltipStyles = tooltip.style\n      tooltipStyles.top = '0'\n      tooltipStyles.left = '0'\n      tooltipStyles[\n        isVerticalPlacement ? 'top' : 'left'\n      ] = `${(isSecondaryPlacement ? 1 : -1) * instance.props.distance}px`\n    }\n\n    const config = {\n      eventsEnabled: false,\n      placement: instance.props.placement,\n      ...popperOptions,\n      modifiers: {\n        ...(popperOptions && popperOptions.modifiers),\n        preventOverflow: {\n          boundariesElement: instance.props.boundary,\n          padding: PREVENT_OVERFLOW_PADDING,\n          ...preventOverflowModifier,\n        },\n        // Adds the `distance` calculation to preventOverflow padding\n        tippySetPreventOverflowPadding: {\n          enabled: true,\n          order: 299,\n          fn(data: Popper.Data): Popper.Data {\n            const basePlacement = getBasePlacement(data.placement)\n\n            const padding =\n              preventOverflowModifier &&\n              preventOverflowModifier.padding !== undefined\n                ? preventOverflowModifier.padding\n                : PREVENT_OVERFLOW_PADDING\n\n            const isPaddingNumber = typeof padding === 'number'\n\n            const paddingObject = { top: 0, bottom: 0, left: 0, right: 0 }\n\n            const computedPadding = (Object.keys(paddingObject) as Array<\n              keyof PaddingObject\n            >).reduce((obj: PaddingObject, key): PaddingObject => {\n              obj[key] = isPaddingNumber ? padding : padding[key]\n\n              if (basePlacement === key) {\n                obj[key] = isPaddingNumber\n                  ? padding + instance.props.distance\n                  : (padding[basePlacement] || 0) + instance.props.distance\n              }\n\n              return obj\n            }, paddingObject)\n\n            instance.popperInstance!.modifiers.filter(\n              (m): boolean => m.name === 'preventOverflow',\n            )[0].padding = computedPadding\n\n            return data\n          },\n        },\n        arrow: {\n          element: arrow,\n          enabled: !!arrow,\n          ...getModifier(popperOptions, 'arrow'),\n        },\n        flip: {\n          enabled: instance.props.flip,\n          padding: instance.props.distance + PREVENT_OVERFLOW_PADDING,\n          behavior: instance.props.flipBehavior,\n          ...getModifier(popperOptions, 'flip'),\n        },\n        offset: {\n          offset: instance.props.offset,\n          ...getModifier(popperOptions, 'offset'),\n        },\n      },\n      onCreate(data: Popper.Data): void {\n        applyMutations(data)\n\n        preserveInvocation(\n          popperOptions && popperOptions.onCreate,\n          config.onCreate,\n          [data],\n        )\n\n        runMountCallback()\n      },\n      onUpdate(data: Popper.Data): void {\n        applyMutations(data)\n\n        preserveInvocation(\n          popperOptions && popperOptions.onUpdate,\n          config.onUpdate,\n          [data],\n        )\n\n        runMountCallback()\n      },\n    }\n\n    instance.popperInstance = new Popper(\n      reference,\n      popper,\n      config,\n    ) as PopperInstance\n  }\n\n  function runMountCallback(): void {\n    if (!hasMountCallbackRun && currentMountCallback) {\n      hasMountCallbackRun = true\n      reflow(popper)\n      currentMountCallback()\n    }\n  }\n\n  function mount(): void {\n    // The mounting callback (`currentMountCallback`) is only run due to a\n    // popperInstance update/create\n    hasMountCallbackRun = false\n\n    const { appendTo } = instance.props\n    const parentNode =\n      appendTo === 'parent'\n        ? reference.parentNode\n        : invokeWithArgsOrReturn(appendTo, [reference])\n\n    // The popper element needs to exist on the DOM before its position can be\n    // updated as Popper.js needs to read its dimensions\n    if (!parentNode.contains(popper)) {\n      parentNode.appendChild(popper)\n    }\n\n    if (instance.popperInstance) {\n      setFlipModifierEnabled(\n        instance.popperInstance.modifiers,\n        instance.props.flip,\n      )\n\n      instance.popperInstance.enableEventListeners()\n\n      // Mounting callback invoked in `onUpdate`\n      instance.popperInstance.scheduleUpdate()\n    } else {\n      // Mounting callback invoked in `onCreate`\n      createPopperInstance()\n\n      instance.popperInstance!.enableEventListeners()\n    }\n  }\n\n  function scheduleShow(event?: Event): void {\n    instance.clearDelayTimeouts()\n\n    instance.state.isScheduledToShow = true\n\n    if (!instance.popperInstance) {\n      createPopperInstance()\n    }\n\n    if (event) {\n      instance.props.onTrigger(instance, event)\n    }\n\n    addDocumentMouseDownListener()\n\n    const delay = getValueAtIndexOrReturn(\n      instance.props.delay,\n      0,\n      defaultProps.delay,\n    )\n\n    if (delay) {\n      showTimeout = setTimeout((): void => {\n        instance.show()\n      }, delay)\n    } else {\n      instance.show()\n    }\n  }\n\n  function scheduleHide(event: Event): void {\n    instance.clearDelayTimeouts()\n\n    instance.props.onUntrigger(instance, event)\n\n    if (!instance.state.isVisible) {\n      removeDocumentMouseDownListener()\n\n      return\n    }\n\n    instance.state.isScheduledToShow = false\n\n    const delay = getValueAtIndexOrReturn(\n      instance.props.delay,\n      1,\n      defaultProps.delay,\n    )\n\n    if (delay) {\n      hideTimeout = setTimeout((): void => {\n        if (instance.state.isVisible) {\n          instance.hide()\n        }\n      }, delay)\n    } else {\n      // Fixes a `transitionend` problem when it fires 1 frame too\n      // late sometimes, we don't want hide() to be called.\n      scheduleHideAnimationFrame = requestAnimationFrame((): void => {\n        instance.hide()\n      })\n    }\n  }\n\n  /* ======================= üîë Public methods üîë ======================= */\n  function enable(): void {\n    instance.state.isEnabled = true\n  }\n\n  function disable(): void {\n    // Disabling the instance should also hide it\n    // https://github.com/atomiks/tippy.js-react/issues/106\n    instance.hide()\n    instance.state.isEnabled = false\n  }\n\n  function clearDelayTimeouts(): void {\n    clearTimeout(showTimeout)\n    clearTimeout(hideTimeout)\n    cancelAnimationFrame(scheduleHideAnimationFrame)\n  }\n\n  // Cloning as we're deleting non-updateable props in DEV mode\n  function setProps({ ...partialProps }: Partial<Props>): void {\n    if (__DEV__) {\n      warnWhen(\n        instance.state.isDestroyed,\n        '`setProps()` was called on a destroyed instance. ' +\n          'This is a no-op but indicates a potential memory leak.',\n      )\n    }\n\n    if (instance.state.isDestroyed) {\n      return\n    }\n\n    if (__DEV__) {\n      validateProps(partialProps)\n      validateExtraPropsFunctionality(instance, partialProps)\n\n      NON_UPDATEABLE_PROPS.forEach((prop): void => {\n        if (hasOwnProperty(partialProps, prop)) {\n          delete partialProps[prop]\n          warnWhen(\n            true,\n            'Cannot update `' +\n              prop +\n              '` prop. Destroy this instance and create a new instance instead.',\n          )\n        }\n      })\n    }\n\n    removeTriggersFromEventListenersTarget()\n\n    const prevProps = instance.props\n    const nextProps = evaluateProps(reference, {\n      ...instance.props,\n      ...partialProps,\n      ignoreAttributes: true,\n    })\n    nextProps.ignoreAttributes = hasOwnProperty(\n      partialProps,\n      'ignoreAttributes',\n    )\n      ? partialProps.ignoreAttributes || false\n      : prevProps.ignoreAttributes\n    instance.props = nextProps\n\n    addTriggersToEventListenersTarget()\n\n    cleanupInteractiveMouseListeners()\n    debouncedOnMouseMove = debounce(onMouseMove, nextProps.interactiveDebounce)\n\n    updatePopperElement(popper, prevProps, nextProps, instance.state.isVisible)\n    instance.popperChildren = getChildren(popper)\n\n    if (instance.popperInstance) {\n      if (\n        POPPER_INSTANCE_DEPENDENCIES.some((prop): boolean => {\n          return (\n            hasOwnProperty(partialProps, prop) &&\n            partialProps[prop] !== prevProps[prop]\n          )\n        })\n      ) {\n        instance.popperInstance.destroy()\n        createPopperInstance()\n\n        if (instance.state.isVisible) {\n          instance.popperInstance.enableEventListeners()\n        }\n      } else {\n        instance.popperInstance.update()\n      }\n    }\n  }\n\n  function setContent(content: Content): void {\n    instance.setProps({ content })\n  }\n\n  function show(\n    duration: number = getValueAtIndexOrReturn(\n      instance.props.duration,\n      0,\n      defaultProps.duration,\n    ),\n    shouldPreventPopperTransition: boolean = true,\n  ): void {\n    if (__DEV__) {\n      warnWhen(\n        instance.state.isDestroyed,\n        '`show()` was called on a destroyed instance. ' +\n          'This is a no-op but indicates a potential memory leak.',\n      )\n    }\n\n    // Early bail-out\n    const isAlreadyVisible = instance.state.isVisible\n    const isDestroyed = instance.state.isDestroyed\n    const isDisabled = !instance.state.isEnabled\n    const isTouchAndTouchDisabled =\n      currentInput.isTouch && !instance.props.touch\n\n    if (\n      isAlreadyVisible ||\n      isDestroyed ||\n      isDisabled ||\n      isTouchAndTouchDisabled\n    ) {\n      return\n    }\n\n    // Normalize `disabled` behavior across browsers.\n    // Firefox allows events on disabled elements, but Chrome doesn't.\n    // Using a wrapper element (i.e. <span>) is recommended.\n    if (getEventListenersTarget().hasAttribute('disabled')) {\n      return\n    }\n\n    if (instance.props.onShow(instance) === false) {\n      return\n    }\n\n    addDocumentMouseDownListener()\n\n    popper.style.visibility = 'visible'\n    instance.state.isVisible = true\n\n    // Prevent a transition of the popper from its previous position and of the\n    // elements at a different placement.\n    const transitionableElements = getTransitionableElements()\n    setTransitionDuration(\n      shouldPreventPopperTransition\n        ? transitionableElements.concat(popper)\n        : transitionableElements,\n      0,\n    )\n\n    currentMountCallback = (): void => {\n      if (!instance.state.isVisible) {\n        return\n      }\n\n      // Double update will apply correct mutations\n      instance.popperInstance!.update()\n\n      instance.props.onMount(instance)\n      instance.state.isMounted = true\n\n      // The content should fade in after the backdrop has mostly filled the\n      // tooltip element. `clip-path` is the other alternative but is not well-\n      // supported and is buggy on some devices.\n      content.style.transitionDelay = instance.popperChildren.backdrop\n        ? `${Math.round(duration / 12)}ms`\n        : ''\n\n      if (instance.props.sticky) {\n        makeSticky()\n      }\n\n      setTransitionDuration([popper], instance.props.updateDuration)\n      setTransitionDuration(transitionableElements, duration)\n      setVisibilityState(transitionableElements, 'visible')\n\n      onTransitionedIn(duration, (): void => {\n        if (instance.props.aria) {\n          const node = getEventListenersTarget()\n          const attrName = `aria-${instance.props.aria}`\n          const currentAttrValue = node.getAttribute(attrName)\n          const nextAttrValue = currentAttrValue\n            ? `${currentAttrValue} ${tooltip.id}`\n            : tooltip.id\n          node.setAttribute(attrName, nextAttrValue)\n        }\n\n        instance.props.onShown(instance)\n        instance.state.isShown = true\n      })\n    }\n\n    mount()\n  }\n\n  function hide(\n    duration: number = getValueAtIndexOrReturn(\n      instance.props.duration,\n      1,\n      defaultProps.duration,\n    ),\n  ): void {\n    if (__DEV__) {\n      warnWhen(\n        instance.state.isDestroyed,\n        '`hide()` was called on a destroyed instance. ' +\n          'This is a no-op but indicates a potential memory leak.',\n      )\n    }\n\n    // Early bail-out\n    const isAlreadyHidden = !instance.state.isVisible && !isBeingDestroyed\n    const isDestroyed = instance.state.isDestroyed\n    const isDisabled = !instance.state.isEnabled && !isBeingDestroyed\n\n    if (isAlreadyHidden || isDestroyed || isDisabled) {\n      return\n    }\n\n    if (instance.props.onHide(instance) === false && !isBeingDestroyed) {\n      return\n    }\n\n    removeDocumentMouseDownListener()\n\n    popper.style.visibility = 'hidden'\n    instance.state.isVisible = false\n    instance.state.isShown = false\n\n    const transitionableElements = getTransitionableElements()\n    setTransitionDuration(transitionableElements, duration)\n    setVisibilityState(transitionableElements, 'hidden')\n\n    onTransitionedOut(duration, (): void => {\n      if (instance.props.aria) {\n        const node = getEventListenersTarget()\n        const attrName = `aria-${instance.props.aria}`\n        const currentAttrValue = node.getAttribute(attrName)\n        const nextAttrValue = currentAttrValue\n          ? currentAttrValue.replace(tooltip.id, '').trim()\n          : null\n\n        if (nextAttrValue) {\n          node.setAttribute(attrName, nextAttrValue)\n        } else {\n          node.removeAttribute(attrName)\n        }\n      }\n\n      instance.popperInstance!.disableEventListeners()\n      instance.popperInstance!.options.placement = instance.props.placement\n\n      popper.parentNode!.removeChild(popper)\n      instance.props.onHidden(instance)\n      instance.state.isMounted = false\n    })\n  }\n\n  function destroy(): void {\n    if (__DEV__) {\n      warnWhen(\n        instance.state.isDestroyed,\n        '`destroy()` was called on an already-destroyed ' +\n          'instance. This is a no-op but indicates a potential memory leak.',\n      )\n    }\n\n    if (instance.state.isDestroyed) {\n      return\n    }\n\n    isBeingDestroyed = true\n\n    instance.hide(0)\n\n    removeTriggersFromEventListenersTarget()\n\n    delete reference._tippy\n\n    if (instance.popperInstance) {\n      instance.popperInstance.destroy()\n    }\n\n    isBeingDestroyed = false\n    instance.state.isDestroyed = true\n  }\n}\n","import { version } from '../package.json'\nimport { isBrowser } from './browser'\nimport { defaultProps } from './props'\nimport createTippy from './createTippy'\nimport bindGlobalEventListeners, {\n  currentInput,\n} from './bindGlobalEventListeners'\nimport {\n  arrayFrom,\n  isRealElement,\n  getArrayOfElements,\n  isReferenceElement,\n} from './utils'\nimport {\n  warnWhen,\n  validateTargets,\n  validateProps,\n  validateExtraPropsFunctionality,\n} from './validation'\nimport { POPPER_SELECTOR } from './constants'\nimport {\n  Props,\n  Instance,\n  Targets,\n  PopperElement,\n  HideAllOptions,\n} from './types'\n\n/**\n * Exported module\n */\nfunction tippy(\n  targets: Targets,\n  optionalProps?: Partial<Props>,\n): Instance | Instance[] {\n  if (__DEV__) {\n    validateTargets(targets)\n    validateProps(optionalProps)\n  }\n\n  bindGlobalEventListeners()\n\n  const props: Props = { ...defaultProps, ...optionalProps }\n\n  const elements = getArrayOfElements(targets)\n\n  if (__DEV__) {\n    const isSingleContentElement = isRealElement(props.content)\n    const isMoreThanOneReferenceElement = elements.length > 1\n    warnWhen(\n      isSingleContentElement && isMoreThanOneReferenceElement,\n      '`tippy()` was passed a targets argument that will create more than ' +\n        'one tippy instance, but only a single element was supplied as the ' +\n        '`content` prop. This means the content will only be appended to the ' +\n        'last tippy element of the list. Instead, use a function that ' +\n        'returns a cloned version of the element instead, or pass the ' +\n        '.innerHTML of the element.',\n    )\n  }\n\n  const instances = elements.reduce<Instance[]>(\n    (acc, reference): Instance[] => {\n      const instance = reference && createTippy(reference, props)\n\n      if (instance) {\n        if (__DEV__) {\n          validateExtraPropsFunctionality(instance, optionalProps)\n        }\n\n        acc.push(instance)\n      }\n\n      return acc\n    },\n    [],\n  )\n\n  return isRealElement(targets) ? instances[0] : instances\n}\n\ntippy.version = version\ntippy.defaultProps = defaultProps\ntippy.currentInput = currentInput\n\n/**\n * Mutates the defaultProps object by setting the props specified\n */\ntippy.setDefaultProps = (partialProps: Partial<Props>): void => {\n  if (__DEV__) {\n    validateProps(partialProps)\n  }\n\n  Object.keys(partialProps).forEach((key): void => {\n    // @ts-ignore\n    defaultProps[key] = partialProps[key]\n  })\n}\n\n/**\n * Hides all visible poppers on the document\n */\ntippy.hideAll = ({\n  exclude: excludedReferenceOrInstance,\n  duration,\n}: HideAllOptions = {}): void => {\n  arrayFrom(document.querySelectorAll(POPPER_SELECTOR)).forEach(\n    (popper: PopperElement): void => {\n      const instance = popper._tippy\n\n      if (instance) {\n        let isExcluded = false\n        if (excludedReferenceOrInstance) {\n          isExcluded = isReferenceElement(excludedReferenceOrInstance)\n            ? instance.reference === excludedReferenceOrInstance\n            : popper === excludedReferenceOrInstance.popper\n        }\n\n        if (!isExcluded) {\n          instance.hide(duration)\n        }\n      }\n    },\n  )\n}\n\nif (__DEV__) {\n  Object.defineProperty(tippy, 'group', {\n    value: (): void => {\n      warnWhen(\n        true,\n        '`tippy.group()` was removed in v5 and replaced with ' +\n          '`createSingleton()`. Read more here: ' +\n          'https://atomiks.github.io/tippyjs/addons#singleton',\n      )\n    },\n    enumerable: false,\n  })\n\n  Object.defineProperty(tippy, 'setDefaults', {\n    value: (): void => {\n      warnWhen(\n        true,\n        '`tippy.setDefaults()` was renamed to `tippy.setDefaultProps()` in v5.',\n      )\n    },\n    enumerable: false,\n  })\n\n  Object.defineProperty(tippy, 'defaults', {\n    get(): void {\n      warnWhen(\n        true,\n        'The `tippy.defaults` property was renamed to `tippy.defaultProps` ' +\n          'in v5.',\n      )\n      return undefined\n    },\n    enumerable: false,\n  })\n}\n\n/**\n * Auto-init tooltips for elements with a `data-tippy=\"...\"` attribute\n */\nexport function autoInit(): void {\n  arrayFrom(document.querySelectorAll('[data-tippy]')).forEach((el): void => {\n    const content = el.getAttribute('data-tippy')\n\n    if (content) {\n      tippy(el, { content })\n    }\n  })\n}\n\nif (isBrowser) {\n  setTimeout(autoInit)\n}\n\nexport default tippy\n","/**\n * Injects a string of CSS styles to a style node in <head>\n */\nexport function injectCSS(css: string): void {\n  const style = document.createElement('style')\n  style.textContent = css\n  style.setAttribute('data-__NAMESPACE_PREFIX__-stylesheet', '')\n  const head = document.head\n  const firstStyleOrLinkTag = head.querySelector('style,link')\n\n  if (firstStyleOrLinkTag) {\n    head.insertBefore(style, firstStyleOrLinkTag)\n  } else {\n    head.appendChild(style)\n  }\n}\n","import css from '../tippy.css'\nimport tippy from '../src'\nimport { injectCSS } from '../src/css'\nimport { isBrowser } from '../src/browser'\n\nif (isBrowser) {\n  injectCSS(css)\n}\n\nexport default tippy\n"],"names":["isBrowser","window","document","ua","navigator","userAgent","isIE","test","isUCBrowser","isIOS","platform","defaultProps","allowHTML","animateFill","animation","appendTo","body","aria","arrow","boundary","content","delay","distance","duration","flip","flipBehavior","flipOnUpdate","followCursor","hideOnClick","ignoreAttributes","inertia","interactive","interactiveBorder","interactiveDebounce","lazy","maxWidth","multiple","offset","onCreate","onHidden","onHide","onMount","onShow","onShown","onTrigger","onUntrigger","placement","popperOptions","role","showOnCreate","sticky","theme","touch","trigger","triggerTarget","updateDuration","zIndex","POPPER_INSTANCE_DEPENDENCIES","PASSIVE","passive","PREVENT_OVERFLOW_PADDING","ROUND_ARROW_INNER_HTML","IOS_CLASS","POPPER_CLASS","TOOLTIP_CLASS","CONTENT_CLASS","BACKDROP_CLASS","ARROW_CLASS","SVG_ARROW_CLASS","POPPER_SELECTOR","TOOLTIP_SELECTOR","CONTENT_SELECTOR","BACKDROP_SELECTOR","ARROW_SELECTOR","SVG_ARROW_SELECTOR","NON_UPDATEABLE_PROPS","currentInput","isTouch","lastMouseMoveTime","onDocumentTouchStart","classList","add","performance","addEventListener","onDocumentMouseMove","now","removeEventListener","remove","onWindowBlur","activeElement","instance","_tippy","blur","state","isVisible","bindGlobalEventListeners","capture","keys","Object","getDataAttributeProps","reference","props","reduce","acc","key","valueAsString","getAttribute","trim","JSON","parse","e","isReferenceElement","value","contains","hasOwnProperty","obj","call","getArrayOfElements","isRealElement","NodeList","arrayFrom","Array","isArray","querySelectorAll","getValueAtIndexOrReturn","index","defaultValue","v","getModifier","modifiers","Element","innerHTML","invokeWithArgsOrReturn","args","apply","setFlipModifierEnabled","filter","m","name","enabled","div","createElement","setTransitionDuration","els","forEach","el","style","transitionDuration","setVisibilityState","setAttribute","evaluateProps","out","debounce","fn","ms","timeout","arg","clearTimeout","setTimeout","preserveInvocation","originalFn","currentFn","slice","closestCallback","element","callback","parentElement","includes","a","b","indexOf","setInnerHTML","html","setContent","contentEl","appendChild","getChildren","popper","tooltip","querySelector","backdrop","addInertia","removeInertia","removeAttribute","createArrowElement","arrowElement","className","createBackdropElement","addInteractive","removeInteractive","updateTransitionEndListener","action","listener","eventName","webkitTransition","undefined","getBasePlacement","split","reflow","offsetHeight","updateTheme","createPopperElement","id","position","top","left","updatePopperElement","prevProps","nextProps","removeChild","isCursorOutsideInteractiveBorder","popperPlacement","popperRect","event","x","clientX","y","clientY","exceedsTop","exceedsBottom","bottom","exceedsLeft","exceedsRight","right","getDevMessage","message","getFormattedMessage","warnWhen","condition","console","warn","throwErrorWhen","Error","validateProps","partialProps","prop","didPassTargetProp","didPassA11yProp","didPassShowOnInitProp","didPassArrowTypeProp","didPassTouchHoldProp","didPassSizeProp","didPassGoogleTheme","didSpecifyPlacementInPopperOptions","didPassOtherUnknownProp","validateTargets","targets","didPassFalsyValue","didPassPlainObject","prototype","toString","validateExtraPropsFunctionality","extraProps","__extraProps","didPassFollowCursor","didPassOtherExtraProp","idCounter","mouseMoveListeners","createTippy","collectionProps","lastTriggerEventType","showTimeout","hideTimeout","scheduleHideAnimationFrame","isBeingDestroyed","hasMountCallbackRun","didHideDueToDocumentMouseDown","currentMountCallback","currentTransitionEndListener","listeners","debouncedOnMouseMove","onMouseMove","popperChildren","popperInstance","currentPlacement","isScheduledToShow","isEnabled","isDestroyed","isMounted","isShown","clearDelayTimeouts","setProps","show","hide","enable","disable","destroy","defineProperty","enumerable","addTriggersToEventListenersTarget","createPopperInstance","scheduleShow","getNormalizedTouchSettings","getIsCustomTouchBehavior","getTransitionableElements","getEventListenersTarget","cleanupInteractiveMouseListeners","scheduleHide","onDocumentMouseDown","target","removeDocumentMouseDownListener","addDocumentMouseDownListener","makeSticky","prevRefRect","getBoundingClientRect","updatePosition","currentRefRect","scheduleUpdate","requestAnimationFrame","onTransitionedOut","onTransitionEnd","parentNode","onTransitionedIn","on","eventType","handler","options","push","onMouseLeave","onBlur","removeTriggersFromEventListenersTarget","isEventListenerStopped","type","MouseEvent","isCursorOverReferenceOrPopper","relatedTarget","supportsTouch","isTouchEvent","isCustomTouch","preventOverflowModifier","applyMutations","data","flipped","attributes","basePlacement","isVerticalPlacement","isSecondaryPlacement","tooltipStyles","config","eventsEnabled","preventOverflow","boundariesElement","padding","tippySetPreventOverflowPadding","order","isPaddingNumber","paddingObject","computedPadding","behavior","runMountCallback","onUpdate","Popper","mount","enableEventListeners","cancelAnimationFrame","some","update","shouldPreventPopperTransition","isAlreadyVisible","isDisabled","isTouchAndTouchDisabled","hasAttribute","visibility","transitionableElements","concat","transitionDelay","Math","round","node","attrName","currentAttrValue","nextAttrValue","isAlreadyHidden","replace","disableEventListeners","tippy","optionalProps","elements","isSingleContentElement","isMoreThanOneReferenceElement","length","instances","version","setDefaultProps","hideAll","excludedReferenceOrInstance","exclude","isExcluded","get","autoInit","injectCSS","css","textContent","head","firstStyleOrLinkTag","insertBefore"],"mappings":"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"}