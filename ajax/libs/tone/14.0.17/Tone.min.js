!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tone=e():t.Tone=e()}("undefined"!=typeof self?self:this,function(){return d={},e.m=c=[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(2);function c(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(!o.length)return t;var r=o.shift();if(u.isObject(t)&&u.isObject(r))for(var s in r)u.isObject(r[s])?(t[s]||Object.assign(t,((e={})[s]={},e)),c(t[s],r[s])):Object.assign(t,((n={})[s]=r[s],n));return c.apply(void 0,[t].concat(o))}e.deepMerge=c,e.optionsFromArguments=function(e,t,n,o){var i;void 0===n&&(n=[]);var r={},s=Array.from(t);if(u.isObject(s[0])&&o&&!Reflect.has(s[0],o)&&(Object.keys(s[0]).some(function(t){return Reflect.has(e,t)})||(c(r,((i={})[o]=s[0],i)),n.splice(n.indexOf(o),1),s.shift())),1===s.length&&u.isObject(s[0]))c(r,s[0]);else for(var a=0;a<n.length;a++)u.isDefined(s[a])&&(r[n[a]]=s[a]);return c(e,r)},e.getDefaultsFromInstance=function(t){return t.constructor.getDefaults()},e.defaultArg=function(t,e){return u.isUndef(t)?e:t},e.omitFromObject=function(e,t){return t.forEach(function(t){Reflect.has(e,t)&&delete e[t]}),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);e.readOnly=function e(n,t){o.isArray(t)?t.forEach(function(t){return e(n,t)}):Object.defineProperty(n,t,{enumerable:!0,writable:!1})},e.writable=function e(n,t){o.isArray(t)?t.forEach(function(t){return e(n,t)}):Object.defineProperty(n,t,{writable:!0})},e.noOp=function(){}},function(t,e,n){"use strict";function o(t){return void 0===t}function i(t){return"string"==typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.isUndef=o,e.isDefined=function(t){return!o(t)},e.isFunction=function(t){return"function"==typeof t},e.isNumber=function(t){return"number"==typeof t},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},e.isBoolean=function(t){return"boolean"==typeof t},e.isArray=function(t){return Array.isArray(t)},e.isString=i,e.isNote=function(t){return i(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(2),u=n(11),c=(r=u.ToneWithContext,i(p,r),p.getDefaults=function(){return Object.assign(u.ToneWithContext.getDefaults(),{channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",numberOfInputs:0,numberOfOutputs:0})},p.prototype.createInsOuts=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=0),1===t)this.input=this.context.createGain();else if(1<t){this.input=[];for(var n=0;n<t;n++)this.input[n]=this.context.createGain()}if(1===e)this.output=this.context.createGain();else if(1<e){this.output=[];for(var o=0;o<e;o++)this.output[o]=this.context.createGain()}},p.prototype._setChannelProperties=function(e){this._internalChannels.length&&this._internalChannels.forEach(function(t){t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation})},p.prototype._getChannelProperties=function(){if(this._internalChannels.length){var t=this._internalChannels[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}return{channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"}},Object.defineProperty(p.prototype,"channelCount",{get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"channelCountMode",{get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"channelInterpretation",{get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))},enumerable:!0,configurable:!0}),p.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),h(this,t,e,n),this},p.prototype.toDestination=function(){return this.connect(this.context.destination),this},p.prototype.toMaster=function(){return this.toDestination()},p.prototype.disconnect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),f(this,t,e,n),this},p.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.apply(void 0,[this].concat(t)),this},p.prototype.fan=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.connect(t)}),this},p.prototype.dispose=function(){return r.prototype.dispose.call(this),a.isDefined(this.input)&&(a.isArray(this.input)?this.input.forEach(function(t){t instanceof p?t.dispose():t instanceof AudioNode&&t.disconnect()}):this.input instanceof p?this.input.dispose():this.input instanceof AudioNode&&this.input.disconnect()),a.isDefined(this.output)&&(a.isArray(this.output)?this.output.forEach(function(t){t instanceof p?t.dispose():t.disconnect()}):this.output instanceof p?this.output.dispose():this.output instanceof AudioNode&&this.output.disconnect()),this._internalChannels=[],this},p);function p(){var t=r.call(this,s.optionsFromArguments(p.getDefaults(),arguments,["context"]))||this;t.name="AudioNode";var e=s.optionsFromArguments(p.getDefaults(),arguments,["context"]);return t.numberOfInputs=e.numberOfInputs,t.numberOfOutputs=e.numberOfOutputs,t}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();t.reduce(function(t,e){return t instanceof c?t.connect(e):t instanceof AudioNode&&h(t,e),e},n)}function h(t,e,n,o){for(void 0===n&&(n=0),void 0===o&&(o=0);!(e instanceof AudioNode||e instanceof AudioParam);)a.isArray(e.input)?(this.assert(e.input.length<o,"the output number is greater than the number of outputs"),e=e.input[o]):a.isDefined(e.input)&&(e=e.input),o=0;t instanceof c&&(a.isArray(t.output)?(this.assert(t.output.length<n,"the output number is greater than the number of outputs"),t=t.output[n]):a.isDefined(t.output)&&(t=t.output),n=0),e instanceof AudioParam?t.connect(e,n):t.connect(e,n,o)}function f(e,t,n,o){if(void 0===n&&(n=0),void 0===o&&(o=0),a.isDefined(t))for(;t instanceof c;)a.isArray(t.input)?(a.isNumber(o)?(this.assert(t.input.length<o,"the input number is greater than the number of inputs"),t=t.input[o]):t.input.forEach(function(t){try{f(e,t,n)}catch(t){}}),o=0):t.input&&(t=t.input);for(;!(e instanceof AudioNode);)a.isArray(e.output)?(this.assert(e.output.length<n,"the output number is greater than the number of outputs"),e=e.output[n]):a.isDefined(e.output)&&(e=e.output),n=0;t instanceof AudioParam?e.disconnect(t,n):t instanceof AudioNode?e.disconnect(t,n,o):e.disconnect()}e.ToneAudioNode=c,e.connectSeries=l,e.connect=h,e.disconnect=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(12);n(14);var s,a=n(0),u=n(1),c=n(3),p=(s=c.ToneAudioNode,i(l,s),l.getDefaults=function(){return Object.assign(c.ToneAudioNode.getDefaults(),{convert:!0,gain:1,numberOfInputs:1,numberOfOutputs:1,units:"gain"})},l.prototype.dispose=function(){return s.prototype.dispose.call(this),this._gainNode.disconnect(),this.gain.dispose(),this},l);function l(){var t=s.call(this,a.optionsFromArguments(l.getDefaults(),arguments,["gain","units"]))||this;t.name="Gain",t._gainNode=t.context.createGain(),t.input=t._gainNode,t.output=t._gainNode,t._internalChannels=[t._gainNode];var e=a.optionsFromArguments(l.getDefaults(),arguments,["gain","units"]);return t.gain=new r.Param({context:t.context,convert:e.convert,param:t._gainNode.gain,units:e.units,value:e.gain}),u.readOnly(t,"gain"),t}e.Gain=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(12),a=n(3),u=n(3),c=n(0),p=(r=a.ToneAudioNode,i(l,r),l.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",convert:!0,numberOfInputs:1,numberOfOutputs:1,units:"number",value:0})},l.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),h(this,t,e,n),this},l.prototype.dispose=function(){return r.prototype.dispose.call(this),this._param.dispose(),this},l.prototype.setValueAtTime=function(t,e){return this._param.setValueAtTime(t,e),this},l.prototype.getValueAtTime=function(t){return this._param.getValueAtTime(t)},l.prototype.setRampPoint=function(t){return this._param.setRampPoint(t),this},l.prototype.linearRampToValueAtTime=function(t,e){return this._param.linearRampToValueAtTime(t,e),this},l.prototype.exponentialRampToValueAtTime=function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this},l.prototype.exponentialRampTo=function(t,e,n){return this._param.exponentialRampTo(t,e,n),this},l.prototype.linearRampTo=function(t,e,n){return this._param.linearRampTo(t,e,n),this},l.prototype.targetRampTo=function(t,e,n){return this._param.targetRampTo(t,e,n),this},l.prototype.exponentialApproachValueAtTime=function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this},l.prototype.setTargetAtTime=function(t,e,n){return this._param.setTargetAtTime(t,e,n),this},l.prototype.setValueCurveAtTime=function(t,e,n,o){return this._param.setValueCurveAtTime(t,e,n,o),this},l.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(t),this},l.prototype.cancelAndHoldAtTime=function(t){return this._param.cancelAndHoldAtTime(t),this},l.prototype.rampTo=function(t,e,n){return this._param.rampTo(t,e,n),this},Object.defineProperty(l.prototype,"value",{get:function(){return this._param.value},set:function(t){this._param.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"convert",{get:function(){return this._param.convert},set:function(t){this._param.convert=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"units",{get:function(){return this._param.units},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"overridden",{get:function(){return this._param.overridden},set:function(t){this._param.overridden=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"maxValue",{get:function(){return this._param.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"minValue",{get:function(){return this._param.minValue},enumerable:!0,configurable:!0}),l);function l(){var t=r.call(this,c.optionsFromArguments(l.getDefaults(),arguments,["value","units"]))||this;t.name="Signal",t.override=!0,t._constantSource=t.context.createConstantSource(),t.output=t._constantSource,t._internalChannels=[t._constantSource];var e=c.optionsFromArguments(l.getDefaults(),arguments,["value","units"]);return t._constantSource.start(0),t.input=t._param=new s.Param({context:t.context,convert:e.convert,param:t._constantSource.offset,units:e.units,value:e.value}),t}function h(t,e,n,o){(e instanceof s.Param||e instanceof AudioParam||e instanceof p&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof p&&(e.overridden=!0)),u.connect(t,e,n,o)}e.Signal=p,e.connectSignal=h},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(22),a=n(3),u=n(0),c=n(1),p=n(16),l=n(2),h=(r=a.ToneAudioNode,i(f,r),f.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{mute:!1,numberOfOutputs:1,volume:0})},Object.defineProperty(f.prototype,"state",{get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),f.prototype.start=function(t,e,n){var o=this;if(void 0===n&&(n=0),t=l.isUndef(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t),"started"===this._state.getValueAtTime(t))this._state.cancel(t),this._state.setStateAtTime("started",t),this.restart(t,e,n);else if(this._state.setStateAtTime("started",t),this._synced){var i=this._state.get(t);i&&(i.offset=this.toSeconds(u.defaultArg(e,0)),i.duration=this.toSeconds(n));var r=this.context.transport.schedule(function(t){o._start(t,e,n)},t);this._scheduled.push(r),"started"===this.context.transport.state&&this._syncedStart(this.now(),this.context.transport.seconds)}else this._start.apply(this,arguments);return this},f.prototype.stop=function(t){if(t=l.isUndef(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t),this._synced){var e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop.apply(this,arguments);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this},f.prototype.sync=function(){var r=this;return this._synced||(this._synced=!0,this._syncedStart=function(t,e){if(0<e){var n=r._state.get(e);if(n&&"started"===n.state&&n.time!==e){var o=e-r.toSeconds(n.time),i=void 0;n.duration&&(i=r.toSeconds(n.duration)-o),r._start(t,r.toSeconds(n.offset)+o,i)}}},this._syncedStop=function(t){var e=r.context.transport.getSecondsAtTime(Math.max(t-r.sampleTime,0));"started"===r._state.getValueAtTime(e)&&r._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this},f.prototype.unsync=function(){var e=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(function(t){return e.context.transport.clear(t)}),this._scheduled=[],this._state.cancel(0),this},f.prototype.dispose=function(){return r.prototype.dispose.call(this),this.unsync(),this._volume.dispose(),this._state.dispose(),this},f);function f(){var t=r.call(this,u.optionsFromArguments(s.Volume.getDefaults(),arguments,["volume"]))||this;t._volume=new s.Volume({context:t.context}),t.output=t._volume,t._internalChannels=[t.output],t.input=void 0,t.volume=t._volume.volume,t._state=new p.StateTimeline("stopped"),t._synced=!1,t._scheduled=[],t._syncedStart=c.noOp,t._syncedStop=c.noOp;var e=u.optionsFromArguments(s.Volume.getDefaults(),arguments,["volume"]);return c.readOnly(t,"volume"),t._state.memory=100,t.volume.value=e.volume,t.mute=e.mute,t}e.Source=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(42),r=n(27);function s(t){(o=t).initialize(),window.TONE_CONTEXT=t}if(o=window.TONE_CONTEXT,e.getContext=function(){return o||s(new r.Context),o},e.setContext=s,e.start=function(){return o.resume()},!this.TONE_SILENCE_LOGGING){var a="v";"dev"===i.version&&(a="");var u=" * Tone.js "+a+i.version+" * ";console.log("%c"+u,"background: #000; color: #fff")}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(10),a=n(0),u=(r=s.Tone,i(c,r),c.getDefaults=function(){return{memory:1/0}},Object.defineProperty(c.prototype,"length",{get:function(){return this._timeline.length},enumerable:!0,configurable:!0}),c.prototype.add=function(t){this.assert(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf();var e=this._search(t.time);if(this._timeline.splice(e+1,0,t),this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},c.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},c.prototype.get=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return-1!==n?this._timeline[n]:null},c.prototype.peek=function(){return this._timeline[0]},c.prototype.shift=function(){return this._timeline.shift()},c.prototype.getAfter=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null},c.prototype.getBefore=function(t){var e=this._timeline.length;if(0<e&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return 0<=n-1?this._timeline[n-1]:null},c.prototype.cancel=function(t){if(1<this._timeline.length){var e=this._search(t);if(0<=e)if(this._timeline[e].time===t){for(var n=e;0<=n&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},c.prototype.cancelBefore=function(t){var e=this._search(t);return 0<=e&&(this._timeline=this._timeline.slice(e+1)),this},c.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return 0<e?this._timeline[e-1]:null},c.prototype._search=function(t,e){if(void 0===e&&(e="time"),0===this._timeline.length)return-1;var n=0,o=this._timeline.length,i=o;if(0<o&&this._timeline[o-1][e]<=t)return o-1;for(;n<i;){var r=Math.floor(n+(i-n)/2),s=this._timeline[r],a=this._timeline[r+1];if(s[e]===t){for(var u=r;u<this._timeline.length;u++)this._timeline[u][e]===t&&(r=u);return r}if(s[e]<t&&a[e]>t)return r;s[e]>t?i=r:n=r+1}return-1},c.prototype._iterate=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this._timeline.length-1),this._timeline.slice(e,n+1).forEach(t)},c.prototype.forEach=function(t){return this._iterate(t),this},c.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},c.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},c.prototype.forEachBetween=function(t,e,n){var o=this._search(t),i=this._search(e);return-1!==o&&-1!==i?(this._timeline[o].time!==t&&(o+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,o,i)):-1===o&&this._iterate(n,0,i),this},c.prototype.forEachFrom=function(t,e){for(var n=this._search(t);0<=n&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},c.prototype.forEachAtTime=function(e,n){var t=this._search(e);return-1!==t&&this._iterate(function(t){t.time===e&&n(t)},0,t),this},c.prototype.dispose=function(){return r.prototype.dispose.call(this),this._timeline=[],this},c);function c(){var t=r.call(this)||this;t.name="Timeline",t._timeline=[];var e=a.optionsFromArguments(c.getDefaults(),arguments,["memory"]);return t.memory=e.memory,t}e.Timeline=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(1),u=n(5),c=n(6),p=n(36),l=(r=c.Source,i(h,r),h.getDefaults=function(){return Object.assign(c.Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})},h.prototype._start=function(t){var e=this;this.log("start",t);var n=new p.ToneOscillatorNode({context:this.context});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),n.onended=function(){setTimeout(function(){e.frequency.disconnect(n.frequency),e.detune.disconnect(n.detune)},100)},t=this.toSeconds(t),this._oscillator.start(t)},h.prototype._stop=function(t){this.log("stop",t),this._oscillator&&(t=this.toSeconds(t),this._oscillator.stop(t))},h.prototype.restart=function(t){return this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(this.toSeconds(t)),this},h.prototype.syncFrequency=function(){return this.context.transport.syncSignal(this.frequency),this},h.prototype.unsyncFrequency=function(){return this.context.transport.unsyncSignal(this.frequency),this},Object.defineProperty(h.prototype,"type",{get:function(){return this._type},set:function(t){var e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var n=this._getRealImaginary(t,this._phase),o=n[0],i=n[1],r=this.context.createPeriodicWave(o,i);this._wave=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount,"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);n&&(e=n[1]),"custom"!==this._type&&(this.type=0===t?e:e+t.toString())},enumerable:!0,configurable:!0}),h.prototype.get=function(){var t=r.prototype.get.call(this);return"custom"!==t.type&&delete t.partials,t},h.prototype._getRealImaginary=function(t,e){var n=2048,o=new Float32Array(n),i=new Float32Array(n),r=1;if("custom"===t)r=this._partials.length+1,this._partialCount=this._partials.length,n=r;else{var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);s?(r=parseInt(s[2],10)+1,this._partialCount=parseInt(s[2],10),t=s[1],n=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(var a=1;a<n;++a){var u=2/(a*Math.PI),c=void 0;switch(t){case"sine":c=a<=r?1:0,this._partials[a-1]=c;break;case"square":c=1&a?2*u:0,this._partials[a-1]=c;break;case"sawtooth":c=u*(1&a?1:-1),this._partials[a-1]=c;break;case"triangle":c=1&a?u*u*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=c;break;case"custom":c=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==c?(o[a]=-c*Math.sin(e*a),i[a]=c*Math.cos(e*a)):(o[a]=0,i[a]=0)}return[o,i]},h.prototype._inverseFFT=function(t,e,n){for(var o=0,i=t.length,r=0;r<i;r++)o+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return o},h.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],n=t[1],o=0,i=2*Math.PI,r=0;r<8;r++)o=Math.max(this._inverseFFT(e,n,r/8*i),o);return-this._inverseFFT(e,n,this._phase)/o},Object.defineProperty(h.prototype,"partials",{get:function(){return this._partials},set:function(t){(this._partials=t).length&&(this.type="custom")},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type},enumerable:!0,configurable:!0}),h.prototype.dispose=function(){return r.prototype.dispose.call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this},h);function h(){var t=r.call(this,s.optionsFromArguments(h.getDefaults(),arguments,["frequency","type"]))||this;t.name="Oscillator",t._oscillator=null;var e=s.optionsFromArguments(h.getDefaults(),arguments,["frequency","type"]);return t.frequency=new u.Signal({context:t.context,units:"frequency",value:e.frequency}),a.readOnly(t,"frequency"),t.detune=new u.Signal({context:t.context,units:"cents",value:e.detune}),a.readOnly(t,"detune"),t._partials=e.partials,t._partialCount=e.partialCount,t._phase=e.phase,t._type=e.type,e.partialCount&&"custom"!==e.type&&(t._type=t.baseType+e.partialCount.toString()),t.phase=t._phase,t}e.Oscillator=l},function(t,i,r){"use strict";(function(n){Object.defineProperty(i,"__esModule",{value:!0});var t=r(42);r(14);var e=(o.getDefaults=function(){return{}},o.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!this.debug&&this.toString()!==n.TONE_DEBUG_CLASS||(t.unshift(this.toString()+":"),console.log.apply(console,t))},o.prototype.assert=function(t,e){if(!t)throw new Error(e)},o.prototype.dispose=function(){return this._wasDisposed=!0,this},Object.defineProperty(o.prototype,"disposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),o.prototype.toString=function(){return this.name},o.version=t.version,o);function o(){this.debug=!1,this._wasDisposed=!1}i.Tone=e}).call(this,r(62))},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),s=n(10),a=n(25),u=n(13),c=n(17);n(14);var p,l=n(0),h=n(2),f=(p=s.Tone,i(_,p),_.getDefaults=function(){return{context:r.getContext()}},_.prototype.now=function(){return this.context.currentTime+this.context.lookAhead},_.prototype.immediate=function(){return this.context.currentTime},Object.defineProperty(_.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate},enumerable:!0,configurable:!0}),_.prototype.toSeconds=function(t){return new u.TimeClass(this.context,t).toSeconds()},_.prototype.toFrequency=function(t){return new a.FrequencyClass(this.context,t).toFrequency()},_.prototype.toTicks=function(t){return new c.TransportTimeClass(this.context,t).toTicks()},_.prototype.get=function(){var n=this,o=l.getDefaultsFromInstance(this);return Object.keys(o).forEach(function(t){if(Reflect.has(n,t)){var e=n[t];h.isDefined(e)&&h.isDefined(e.value)&&h.isDefined(e.setValueAtTime)?o[t]=e.value:e instanceof _?o[t]=e.get():h.isArray(e)||h.isNumber(e)||h.isString(e)||h.isBoolean(e)?o[t]=e:delete o[t]}}),o},_.prototype.set=function(e){var n=this;return Object.keys(e).forEach(function(t){Reflect.has(n,t)&&h.isDefined(n[t])&&(h.isDefined(n[t].value)&&h.isDefined(n[t].setValueAtTime)?n[t].value=e[t]:n[t]instanceof _?n[t].set(e[t]):n[t]=e[t])}),this},_);function _(t){var e=this,n=l.optionsFromArguments(_.getDefaults(),arguments,["context"]);return(e=p.call(this)||this).defaultContext?e.context=e.defaultContext:e.context=n.context,e}e.ToneWithContext=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(18);n(14);var s,a=n(0),u=n(8),c=n(2),p=n(11),l=(s=p.ToneWithContext,i(h,s),h.getDefaults=function(){return Object.assign(p.ToneWithContext.getDefaults(),{convert:!0,units:"number"})},Object.defineProperty(h.prototype,"value",{get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this._initialValue=this._fromType(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"minValue",{get:function(){return"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"maxValue",{get:function(){return"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue},enumerable:!0,configurable:!0}),h.prototype._is=function(t,e){return this.units===e},h.prototype._fromType=function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?r.dbToGain(t):this._is(t,"frequency")?this.toFrequency(t):this._is(t,"normalRange")?Math.min(Math.max(t,0),1):this._is(t,"audioRange")?Math.min(Math.max(t,-1),1):this._is(t,"positive")?Math.max(t,0):(this._is(t,"number"),t):t},h.prototype._toType=function(t){return this.convert&&"decibels"===this.units?r.gainToDb(t):t},h.prototype.setValueAtTime=function(t,e){e=this.toSeconds(e);var n=this._fromType(t);return this._events.add({time:e,type:"setValue",value:n}),this.log("setValue",t,e),this._param.setValueAtTime(n,e),this},h.prototype.getValueAtTime=function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),o=this._events.get(e),i=this._initialValue;if(null===o)i=this._initialValue;else if("setTarget"!==o.type||null!==n&&"setValue"!==n.type)if(null===n)i=o.value;else if("linear"===n.type||"exponential"===n.type){var r=o.value;"setTarget"===o.type&&(r=null===(s=this._events.getBefore(o.time))?this._initialValue:s.value),i="linear"===n.type?this._linearInterpolate(o.time,r,n.time,n.value,e):this._exponentialInterpolate(o.time,r,n.time,n.value,e)}else i=o.value;else{var s,a;a=null===(s=this._events.getBefore(o.time))?this._initialValue:s.value,c.isDefined(o.constant)&&(i=this._exponentialApproach(o.time,a,o.value,o.constant,e))}return this._toType(i)},h.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this},h.prototype.linearRampToValueAtTime=function(t,e){var n=this._fromType(t);return e=this.toSeconds(e),this._events.add({time:e,type:"linear",value:n}),this.log("linear",t,e),this._param.linearRampToValueAtTime(n,e),this},h.prototype.exponentialRampToValueAtTime=function(t,e){var n=this._fromType(t);return n=Math.max(this._minOutput,n),e=this.toSeconds(e),this._events.add({time:e,type:"exponential",value:n}),this.log("exponential",t,e),this._param.exponentialRampToValueAtTime(n,e),this},h.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},h.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},h.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this},h.prototype.exponentialApproachValueAtTime=function(t,e,n){var o=Math.log(this.toSeconds(n)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,o)},h.prototype.setTargetAtTime=function(t,e,n){var o=this._fromType(t);return this.assert(0<n,"timeConstant must be greater than 0"),e=this.toSeconds(e),this._events.add({constant:n,time:e,type:"setTarget",value:o}),this.log("setTarget",t,e,n),this._param.setTargetAtTime(o,e,n),this},h.prototype.setValueCurveAtTime=function(t,e,n,o){void 0===o&&(o=1),n=this.toSeconds(n),e=this.toSeconds(e);var i=this._fromType(t[0])*o;this.setValueAtTime(this._toType(i),e);for(var r=n/(t.length-1),s=1;s<t.length;s++){var a=this._fromType(t[s])*o;this.linearRampToValueAtTime(this._toType(a),e+s*r)}return this},h.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log("cancel",t),this},h.prototype.cancelAndHoldAtTime=function(t){t=this.toSeconds(t);var e=this._fromType(this.getValueAtTime(t));this.log("cancelAndHoldAtTime",t,"value="+e),this._param.cancelScheduledValues(t);var n=this._events.get(t),o=this._events.getAfter(t);return n&&n.time===t?o?this._events.cancel(o.time):this._events.cancel(t+this.sampleTime):o&&(this._events.cancel(o.time),"linear"===o.type?this.linearRampToValueAtTime(this._toType(e),t):"exponential"===o.type&&this.exponentialRampToValueAtTime(this._toType(e),t)),this._events.add({time:t,type:"setValue",value:e}),this._param.setValueAtTime(e,t),this},h.prototype.rampTo=function(t,e,n){return void 0===e&&(e=.1),"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this},h.prototype.dispose=function(){return s.prototype.dispose.call(this),this._events.dispose(),this},h.prototype._exponentialApproach=function(t,e,n,o,i){return n+(e-n)*Math.exp(-(i-t)/o)},h.prototype._linearInterpolate=function(t,e,n,o,i){return e+(i-t)/(n-t)*(o-e)},h.prototype._exponentialInterpolate=function(t,e,n,o,i){return e*Math.pow(o/e,(i-t)/(n-t))},h);function h(){var t=s.call(this,a.optionsFromArguments(h.getDefaults(),arguments,["param","units","convert"]))||this;t.name="Param",t.overridden=!1,t._minOutput=1e-5;var e=a.optionsFromArguments(h.getDefaults(),arguments,["param","units","convert"]);return t.assert(c.isDefined(e.param)&&e.param instanceof AudioParam,"param must be an AudioParam"),t._param=t.input=e.param,t._events=new u.Timeline(1e3),t._initialValue=t._param.value,t.units=e.units,t.convert=e.convert,c.isDefined(e.value)&&t.setValueAtTime(e.value,0),t}e.Param=l},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(7),a=n(18),u=(r=n(59).TimeBaseClass,i(c,r),c.prototype._getExpressions=function(){var n=this;return Object.assign(r.prototype._getExpressions.call(this),{now:{method:function(t){return n._now()+new n.constructor(n.context,t).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(t){var e=new c(n.context,t).valueOf();return n._secondsToUnits(n.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})},c.prototype.quantize=function(t,e){void 0===e&&(e=1);var n=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/n)*n-o)*e},c.prototype.toNotation=function(){for(var n=this,o=this.toSeconds(),t=["1m"],e=1;e<9;e++){var i=Math.pow(2,e);t.push(i+"n."),t.push(i+"n"),t.push(i+"t")}t.push("0");var r=t[0],s=new c(this.context,t[0]).toSeconds();return t.forEach(function(t){var e=new c(n.context,t).toSeconds();Math.abs(e-o)<Math.abs(s-o)&&(r=t,s=e)}),r},c.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),o=e%1*4;e=Math.floor(e)%this._getTimeSignature();var i=o.toString();return 3<i.length&&(o=parseFloat(parseFloat(i).toFixed(3))),[n,e,o].join(":")},c.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},c.prototype.toSeconds=function(){return this.valueOf()},c.prototype.toMidi=function(){return a.ftom(this.toFrequency())},c.prototype._now=function(){return this.context.now()},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="Time",t}e.TimeClass=u,e.Time=function(t,e){return new u(s.getContext(),t,e)}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3);e.connect=o.connect,e.disconnect=o.disconnect,e.connectSeries=o.connectSeries},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=(r=n(8).Timeline,i(a,r),a.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},a.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},a.prototype.getLastState=function(t,e){for(var n=this._search(e);0<=n;n--){var o=this._timeline[n];if(o.state===t)return o}},a.prototype.getNextState=function(t,e){var n=this._search(e);if(-1!==n)for(var o=n;o<this._timeline.length;o++){var i=this._timeline[o];if(i.state===t)return i}},a);function a(t){void 0===t&&(t="stopped");var e=r.call(this)||this;return e._initial=t,e}e.StateTimeline=s},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(7),a=(r=n(13).TimeClass,i(u,r),u.prototype._now=function(){return this.context.transport.seconds},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="TransportTime",t}e.TransportTimeClass=a,e.TransportTime=function(t,e){return new a(s.getContext(),t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(14),e.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},e.dbToGain=function(t){return Math.pow(10,t/20)},e.gainToDb=function(t){return Math.log(t)/Math.LN10*20},e.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)};var o=440;e.getA4=function(){return o},e.setA4=function(t){o=t},e.ftom=function(t){return 69+Math.round(12*Math.log2(t/o))},e.mtof=function(t){return o*Math.pow(2,(t-69)/12)}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(10),a=n(2),u=(r=s.Tone,i(c,r),c.prototype.on=function(t,e){var n=this;return t.split(/\W+/).forEach(function(t){a.isUndef(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)}),this},c.prototype.once=function(n,o){var i=this,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.apply(void 0,t),i.off(n,r)};return this.on(n,r),this},c.prototype.off=function(o,i){var r=this;return o.split(/\W+/).forEach(function(t){if(a.isUndef(r._events)&&(r._events={}),r._events.hasOwnProperty(o))if(a.isUndef(i))r._events[o]=[];else for(var e=r._events[o],n=0;n<e.length;n++)e[n]===i&&e.splice(n,1)}),this},c.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._events&&this._events.hasOwnProperty(t))for(var o=this._events[t].slice(0),i=0,r=o.length;i<r;i++)o[i].apply(this,e);return this},c.mixin=function(n){["on","once","off","emit"].forEach(function(t){var e=Object.getOwnPropertyDescriptor(c.prototype,t);Object.defineProperty(n.prototype,t,e)})},c.prototype.dispose=function(){return r.prototype.dispose.call(this),this._events=void 0,this},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="Emitter",t}e.Emitter=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(0),u=n(1),c=n(5),p=n(33),l=n(6),h=n(9),f=(r=l.Source,i(_,r),_.getDefaults=function(){return Object.assign(l.Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})},_.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},_.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)},_.prototype.restart=function(t){var e=this.toSeconds(t);return this._sawtooth.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e),this},Object.defineProperty(_.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"type",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"baseType",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){return r.prototype.dispose.call(this),this._sawtooth.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this},_);function _(){var t=r.call(this,a.optionsFromArguments(_.getDefaults(),arguments,["frequency","width"]))||this;t.name="PulseOscillator",t.width=new c.Signal({context:t.context,units:"audioRange"}),t._widthGate=new s.Gain({context:t.context,gain:0}),t._sawtooth=new h.Oscillator({context:t.context,type:"sawtooth"}),t.frequency=t._sawtooth.frequency,t.detune=t._sawtooth.detune,t._thresh=new p.WaveShaper({context:t.context,mapping:function(t){return t<=0?-1:1}});var e=a.optionsFromArguments(_.getDefaults(),arguments,["frequency","width"]);return t.width.setValueAtTime(e.width,0),t._sawtooth.frequency.setValueAtTime(e.frequency,0),t._sawtooth.detune.setValueAtTime(e.detune,0),t._sawtooth.phase=e.phase,t._sawtooth.chain(t._thresh,t.output),t.width.chain(t._widthGate,t._thresh),u.readOnly(t,["width","frequency","detune"]),t}e.PulseOscillator=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(0),u=n(5),c=(r=u.Signal,i(p,r),p.getDefaults=function(){return Object.assign(u.Signal.getDefaults(),{value:0})},p.prototype.dispose=function(){return r.prototype.dispose.call(this),this._mult.dispose(),this},p);function p(){var t=r.call(this,Object.assign(a.optionsFromArguments(p.getDefaults(),arguments,["value"])))||this;t.name="Multiply",t.override=!1,t._mult=new s.Gain({context:t.context}),t.input=t._mult,t.output=t._mult;var e=a.optionsFromArguments(p.getDefaults(),arguments,["value"]);return t.factor=t._param=t._mult.gain,t.factor.setValueAtTime(e.value,0),t}e.Multiply=c},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(3),u=n(0),c=n(1),p=(r=a.ToneAudioNode,i(l,r),l.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(l.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){return r.prototype.dispose.call(this),this.input.dispose(),this.volume.dispose(),this},l);function l(){var t=r.call(this,u.optionsFromArguments(l.getDefaults(),arguments,["volume"]))||this;t.name="Volume",t.output=new s.Gain({context:t.context,units:"decibels"}),t._internalChannels=[t.output],t.input=t.output,t.volume=t.output.gain;var e=u.optionsFromArguments(l.getDefaults(),arguments,["volume"]);return t.volume.value=e.volume,c.readOnly(t,"volume"),t._unmutedVolume=e.volume,t.mute=e.mute,t}e.Volume=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(7),a=(r=n(17).TransportTimeClass,i(u,r),u.prototype._now=function(){return this.context.transport.ticks},u.prototype._beatsToUnits=function(t){return this._getPPQ()*t},u.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},u.prototype._ticksToUnits=function(t){return t},u.prototype.toTicks=function(){return this.valueOf()},u.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="Ticks",t.defaultUnits="i",t}e.TicksClass=a,e.Ticks=function(t,e){return new a(s.getContext(),t,e)}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(r,s,a,u){return new(a=a||Promise)(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,o)}i((u=u.apply(r,s||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=o.call(n,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var r,l=n(7),a=n(10),u=n(0),c=n(1),h=n(2),f=(r=a.Tone,i(_,r),_.getDefaults=function(){return{onerror:c.noOp,onload:c.noOp,reverse:!1}},Object.defineProperty(_.prototype,"sampleRate",{get:function(){return this._buffer?this._buffer.sampleRate:l.getContext().sampleRate},enumerable:!0,configurable:!0}),_.prototype.set=function(t){var e=this;return t instanceof _?t.loaded?this._buffer=t.get():t.onload=function(){e.set(t),e.onload(e)}:this._buffer=t,this._reversed&&this._reverse(),this},_.prototype.get=function(){return this._buffer},_.prototype.load=function(r){return s(this,void 0,void 0,function(){var e,n,o,i;return p(this,function(t){switch(t.label){case 0:e=_.load(r),_.downloads.push(e),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e];case 2:return n=t.sent(),this.set(n),this.onload(this),[3,4];case 3:throw o=t.sent(),i=_.downloads.indexOf(e),_.downloads.splice(i,1),o;case 4:return[2,this]}})})},_.prototype.dispose=function(){return r.prototype.dispose.call(this),this._buffer=void 0,this},_.prototype.fromArray=function(t){for(var e=h.isArray(t)&&0<t[0].length,n=e?t.length:1,o=e?t[0].length:t.length,i=l.getContext(),r=i.createBuffer(n,o,i.sampleRate),s=e||1!==n?t:[t],a=0;a<n;a++)r.copyToChannel(s[a],a);return this._buffer=r,this},_.prototype.toMono=function(t){if(h.isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,o=0;o<n;o++)for(var i=this.toArray(o),r=0;r<i.length;r++)e[r]+=i[r];e=e.map(function(t){return t/n}),this.fromArray(e)}return this},_.prototype.toArray=function(t){if(h.isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e},_.prototype.getChannelData=function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)},_.prototype.slice=function(t,e){void 0===e&&(e=this.duration);for(var n=Math.floor(t*this.sampleRate),o=Math.floor(e*this.sampleRate),i=[],r=0;r<this.numberOfChannels;r++)i[r]=this.toArray(r).slice(n,o);return(new _).fromArray(i)},_.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(_.prototype,"loaded",{get:function(){return 0<this.length},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())},enumerable:!0,configurable:!0}),_.fromArray=function(t){return(new _).fromArray(t)},_.fromUrl=function(e){return s(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(new _).load(e)];case 1:return[2,t.sent()]}})})},_.load=function(c){return s(this,void 0,void 0,function(){var e,n,o,i,r,s,a,u;return p(this,function(t){switch(t.label){case 0:if(e=c.match(/\[(.+\|?)+\]$/)){for(n=e[1].split("|"),o=n[0],i=0,r=n;i<r.length;i++)if(s=r[i],_.supportsType(s)){o=s;break}c=c.replace(e[0],o)}return[4,fetch(_.baseUrl+c)];case 1:if(!(a=t.sent()).ok)throw new Error("could not load url: "+c);return[4,a.arrayBuffer()];case 2:return u=t.sent(),[4,l.getContext().decodeAudioData(u)];case 3:return[2,t.sent()]}})})},_.supportsType=function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)},_.loaded=function(){return s(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:e=0,n=_.downloads,t.label=1;case 1:return e<n.length?[4,n[e]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},_.baseUrl="",_.downloads=[],_);function _(){var t=r.call(this)||this;t.name="ToneAudioBuffer",t.onload=c.noOp;var e=u.optionsFromArguments(_.getDefaults(),arguments,["url","onload","onerror"]);return t.reverse=e.reverse,t.onload=e.onload,e.url&&e.url instanceof AudioBuffer||e.url instanceof _?t.set(e.url):h.isString(e.url)&&t.load(e.url).catch(e.onerror),t}e.ToneAudioBuffer=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(7),a=n(18),u=n(18),c=(r=n(13).TimeClass,i(p,r),Object.defineProperty(p,"A4",{get:function(){return u.getA4()},set:function(t){u.setA4(t)},enumerable:!0,configurable:!0}),p.prototype._getExpressions=function(){return Object.assign({},r.prototype._getExpressions.call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:p.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var n=l[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:p.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(o*=this._beatsToUnits(parseFloat(n)/4)),o}}})},p.prototype.transpose=function(t){return new p(this.context,this.valueOf()*a.intervalToFrequencyRatio(t))},p.prototype.harmonize=function(t){var e=this;return t.map(function(t){return e.transpose(t)})},p.prototype.toMidi=function(){return u.ftom(this.valueOf())},p.prototype.toNote=function(){var t=this.toFrequency(),e=Math.log2(t/p.A4),n=Math.round(12*e)+57,o=Math.floor(n/12);return o<0&&(n+=-12*o),h[n%12]+o.toString()},p.prototype.toSeconds=function(){return 1/r.prototype.toSeconds.call(this)},p.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())},p.prototype._noArg=function(){return 0},p.prototype._frequencyToUnits=function(t){return t},p.prototype._ticksToUnits=function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))},p.prototype._beatsToUnits=function(t){return 1/r.prototype._beatsToUnits.call(this,t)},p.prototype._secondsToUnits=function(t){return 1/t},p.mtof=function(t){return a.mtof(t)},p.ftom=function(t){return u.ftom(t)},p);function p(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="Frequency",t.defaultUnits="hz",t}e.FrequencyClass=c;var l={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];e.Frequency=function(t,e){return new c(s.getContext(),t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=[];e.onContextInit=function(t){o.push(t)},e.initializeContext=function(e){o.forEach(function(t){return t(e)})};var i=[];e.onContextClose=function(t){i.push(t)},e.closeContext=function(e){i.forEach(function(t){return t(e)})}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(r,s,a,u){return new(a=a||Promise)(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,o)}i((u=u.apply(r,s||[])).next())})},s=this&&this.__generator||function(n,o){var i,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=o.call(n,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var a,u=n(63),c=n(0),p=n(19),l=n(8),h=n(2),f=n(61),_=n(26),d=(a=p.Emitter,i(y,a),y.getDefaults=function(){return{clockSource:"worker",context:f.getAudioContext(),latencyHint:"interactive",lookAhead:.1,updateInterval:.03}},y.prototype.initialize=function(){return this._initialized||(_.initializeContext(this),this._initialized=!0),this},y.prototype.createAnalyser=function(){return this._context.createAnalyser()},y.prototype.createOscillator=function(){return this._context.createOscillator()},y.prototype.createBufferSource=function(){return this._context.createBufferSource()},y.prototype.createBiquadFilter=function(){return this._context.createBiquadFilter()},y.prototype.createBuffer=function(t,e,n){return this._context.createBuffer(t,e,n)},y.prototype.createChannelMerger=function(t){return this._context.createChannelMerger(t)},y.prototype.createChannelSplitter=function(t){return this._context.createChannelSplitter(t)},y.prototype.createConstantSource=function(){return this._context.createConstantSource()},y.prototype.createConvolver=function(){return this._context.createConvolver()},y.prototype.createDelay=function(t){return this._context.createDelay(t)},y.prototype.createDynamicsCompressor=function(){return this._context.createDynamicsCompressor()},y.prototype.createGain=function(){return this._context.createGain()},y.prototype.createIIRFilter=function(t,e){return this._context.createIIRFilter(t,e)},y.prototype.createPanner=function(){return this._context.createPanner()},y.prototype.createPeriodicWave=function(t,e,n){return this._context.createPeriodicWave(t,e,n)},y.prototype.createStereoPanner=function(){return this._context.createStereoPanner()},y.prototype.createWaveShaper=function(){return this._context.createWaveShaper()},y.prototype.decodeAudioData=function(t){return this._context.decodeAudioData(t)},Object.defineProperty(y.prototype,"currentTime",{get:function(){return this._context.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"state",{get:function(){return this._context.state},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"sampleRate",{get:function(){return this._context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"listener",{get:function(){return this._context.listener},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"transport",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._transport},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"destination",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._destination},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._destination=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=0;if(this._latencyHint=t,h.isString(t))switch(t){case"interactive":e=.1;break;case"playback":e=.8;break;case"balanced":e=.25;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/3},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"rawContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),y.prototype.now=function(){return this._context.currentTime+this.lookAhead},y.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},y.prototype.close=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._context instanceof AudioContext?[4,this._context.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._initialized&&_.closeContext(this),[2,this]}})})},y.prototype.getConstant=function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),o=0;o<n.length;o++)n[o]=t;var i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i},y.prototype.dispose=function(){var e=this;return a.prototype.dispose.call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(function(t){return e._constants[t].disconnect()}),this},y.prototype._timeoutLoop=function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()},y.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds},y.prototype.clearTimeout=function(e){var n=this;return this._timeouts.forEach(function(t){t.id===e&&n._timeouts.remove(t)}),this},y);function y(){var t=a.call(this)||this;t.name="Context",t._constants=new Map,t._timeouts=new l.Timeline,t._timeoutIds=0,t._initialized=!1;var e=c.optionsFromArguments(y.getDefaults(),arguments,["context"]);return t._context=e.context,t._latencyHint=e.latencyHint,t.lookAhead=e.lookAhead,t._ticker=new u.Ticker(t.emit.bind(t,"tick"),e.clockSource,e.updateInterval),t.on("tick",t._timeoutLoop.bind(t)),t._context.addEventListener("statechange",function(){t.emit("statechange",t.state)}),t}e.Context=d},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(3),a=n(0),u=n(2),c=n(5),p=(r=s.ToneAudioNode,i(l,r),l.getDefaults=function(){return Object.assign(s.ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})},Object.defineProperty(l.prototype,"value",{get:function(){return this.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),l.prototype._getCurve=function(t,e){if(u.isString(t))return t;var n=void 0;for(n in h)if(h[n][e]===t)return n;return t},l.prototype._setCurve=function(t,e,n){if(u.isString(n)&&Reflect.has(h,n)){var o=h[n];u.isObject(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!u.isArray(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}},Object.defineProperty(l.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(e){this.assert(["linear","exponential"].some(function(t){return t===e}),"Invalid envelope curve: "+e),this._decayCurve=e},enumerable:!0,configurable:!0}),l.prototype.triggerAttack=function(t,e){void 0===e&&(e=1),this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),o=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(0<i&&(n=(1-i)/(1/n)),0===n)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else if(0<n){this._sig.cancelAndHoldAtTime(t);for(var r=this._attackCurve,s=1;s<r.length;s++)if(r[s-1]<=i&&i<=r[s]){(r=this._attackCurve.slice(s))[0]=i;break}this._sig.setValueCurveAtTime(r,t,n,e)}if(o){var a=e*this.sustain,u=t+n;this.log("decay",u),"linear"===this._decayCurve?this._sig.linearRampTo(a,o,u+this.sampleTime):"exponential"===this._decayCurve&&this._sig.exponentialApproachValueAtTime(a,u,o)}return this},l.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(0<e){var n=this.toSeconds(this.release);"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):u.isArray(this._releaseCurve)&&(this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this},l.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},l.prototype.triggerAttackRelease=function(t,e,n){return void 0===n&&(n=1),e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},l.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},l.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),c.connectSignal(this,t,e,n),this},l.prototype.dispose=function(){return r.prototype.dispose.call(this),this._sig.dispose(),this},l);function l(){var t=r.call(this,a.optionsFromArguments(l.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;t.name="Envelope",t._sig=new c.Signal({context:t.context,value:0}),t._internalChannels=[t._sig],t.output=t._sig,t.input=void 0;var e=a.optionsFromArguments(l.getDefaults(),arguments,["attack","decay","sustain","release"]);return t.attack=e.attack,t.decay=e.decay,t.sustain=e.sustain,t.release=e.release,t.attackCurve=e.attackCurve,t.releaseCurve=e.releaseCurve,t.decayCurve=e.decayCurve,t}e.Envelope=p;var h=function(){var t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));var o=[];for(t=0;t<127;t++){e=t/127;var i=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=i/10+.83*e}o[127]=1;var r=[];for(t=0;t<128;t++)r[t]=Math.ceil(t/127*5)/5;var s=[];for(t=0;t<128;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));var a,u=[];for(t=0;t<128;t++){e=t/127;var c=4*Math.pow(e,3)+.2,p=Math.cos(c*Math.PI*2*e);u[t]=Math.abs(p*(1-e))}function l(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:l(u),Out:u},cosine:{In:n,Out:(a=n,a.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:o,Out:l(o)},sine:{In:s,Out:l(s)},step:{In:r,Out:l(r)}}}()},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(1),u=n(2),c=n(5),p=n(6),l=n(35),h=n(31),f=n(32),_=n(9),d=n(20),y=n(30),m={am:l.AMOscillator,fat:h.FatOscillator,fm:f.FMOscillator,oscillator:_.Oscillator,pulse:d.PulseOscillator,pwm:y.PWMOscillator},g=(r=p.Source,i(v,r),v.getDefaults=function(){return Object.assign(_.Oscillator.getDefaults(),f.FMOscillator.getDefaults(),l.AMOscillator.getDefaults(),h.FatOscillator.getDefaults(),d.PulseOscillator.getDefaults(),y.PWMOscillator.getDefaults())},v.prototype._start=function(t){this._oscillator.start(t)},v.prototype._stop=function(t){this._oscillator.stop(t)},v.prototype.restart=function(t){return this._oscillator.restart(t),this},Object.defineProperty(v.prototype,"type",{get:function(){var e=this,t="";return["am","fm","fat"].some(function(t){return e._sourceType===t})&&(t=this._sourceType),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)},enumerable:!0,configurable:!0}),v.prototype.set=function(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),r.prototype.set.call(this,t),this},v.prototype.get=function(){var t=this._oscillator.get();return t.type=this.type,t},v.prototype._createNewOscillator=function(t){if(t!==this._sourceType){this._sourceType=t;var e=m[t],n=this.now();if(this._oscillator){var o=this._oscillator;o.stop(n),this.context.setTimeout(function(){return o.dispose()},this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),"started"===this.state&&this._oscillator.start(n)}},Object.defineProperty(v.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"sourceType",{get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")},enumerable:!0,configurable:!0}),v.prototype._getOscType=function(t,e){return t instanceof m[e]},Object.defineProperty(v.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"width",{get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"count",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&u.isNumber(t)&&(this._oscillator.count=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"spread",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&u.isNumber(t)&&(this._oscillator.spread=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"modulationType",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&u.isString(t)&&(this._oscillator.modulationType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"modulationIndex",{get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"harmonicity",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"modulationFrequency",{get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0},enumerable:!0,configurable:!0}),v.prototype.dispose=function(){return r.prototype.dispose.call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this},v);function v(){var t=r.call(this,s.optionsFromArguments(v.getDefaults(),arguments,["frequency","type"]))||this;t.name="OmniOscillator",t.frequency=new c.Signal({context:t.context,units:"frequency"}),t.detune=new c.Signal({context:t.context,units:"cents"});var e=s.optionsFromArguments(v.getDefaults(),arguments,["frequency","type"]);return t.frequency.setValueAtTime(e.frequency,0),t.detune.setValueAtTime(e.detune,0),a.readOnly(t,["frequency","detune"]),t.set(e),t}e.OmniOscillator=g},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(1),u=n(21),c=n(6),p=n(9),l=n(20),h=(r=c.Source,i(f,r),f.getDefaults=function(){return Object.assign(c.Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})},f.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},f.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},f.prototype.restart=function(t){return this._modulator.restart(t),this._pulse.restart(t),this},Object.defineProperty(f.prototype,"type",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"baseType",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t},enumerable:!0,configurable:!0}),f.prototype.dispose=function(){return r.prototype.dispose.call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this},f);function f(){var t=r.call(this,s.optionsFromArguments(f.getDefaults(),arguments,["frequency","modulationFrequency"]))||this;t.name="PWMOscillator",t.sourceType="pwm",t._pulse=new l.PulseOscillator({context:t.context}),t._modulator=new p.Oscillator({context:t.context}),t._scale=new u.Multiply({context:t.context,value:2}),t.frequency=t._modulator.frequency,t.detune=t._modulator.detune,t.modulationFrequency=t._pulse.frequency;var e=s.optionsFromArguments(f.getDefaults(),arguments,["frequency","modulationFrequency"]);return t._pulse._sawtooth.type="sine",t._pulse.frequency.setValueAtTime(e.modulationFrequency,0),t._modulator.frequency.setValueAtTime(e.frequency,0),t._modulator.detune.setValueAtTime(e.detune,0),t._modulator.phase=e.phase,t._modulator.chain(t._scale,t._pulse.width),t._pulse.connect(t.output),a.readOnly(t,["modulationFrequency","frequency","detune"]),t}e.PWMOscillator=h},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(1),u=n(5),c=n(6),p=n(9),l=(r=c.Source,i(h,r),h.getDefaults=function(){return Object.assign(p.Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})},h.prototype._start=function(e){e=this.toSeconds(e),this._forEach(function(t){return t.start(e)})},h.prototype._stop=function(e){e=this.toSeconds(e),this._forEach(function(t){return t.stop(e)})},h.prototype.restart=function(e){return e=this.toSeconds(e),this._forEach(function(t){return t.restart(e)}),this},h.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)},Object.defineProperty(h.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._forEach(function(t){return t.type=e})},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,1<this._oscillators.length){var n=-t/2,o=t/(this._oscillators.length-1);this._forEach(function(t,e){return t.detune.value=n+o*e})}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){if(t=Math.max(t,1),this._oscillators.length!==t){this._forEach(function(t){return t.dispose()}),this._oscillators=[];for(var e=0;e<t;e++){var n=new p.Oscillator({context:this.context});"custom"===this.type?n.partials=this._partials:n.type=this._type,n.partialCount=this._partialCount,n.phase=this._phase+e/t*360,n.volume.value=-6-1.1*t,this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(function(t){return t.start()})}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"phase",{get:function(){return this._phase},set:function(e){this._phase=e,this._forEach(function(t){return t.phase=e})},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(e){this._forEach(function(t){return t.baseType=e}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(e){(this._partials=e).length&&(this._type="custom",this._forEach(function(t){return t.partials=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(e){this._partialCount=e,this._forEach(function(t){return t.partialCount=e}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),h.prototype.dispose=function(){return r.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach(function(t){return t.dispose()}),this},h);function h(){var t=r.call(this,s.optionsFromArguments(h.getDefaults(),arguments,["frequency","type","spread"]))||this;t.name="FatOscillator",t.frequency=new u.Signal({context:t.context,units:"frequency"}),t.detune=new u.Signal({context:t.context,units:"cents"}),t._oscillators=[];var e=s.optionsFromArguments(h.getDefaults(),arguments,["frequency","type","spread"]);return t.frequency.setValueAtTime(e.frequency,0),t.detune.setValueAtTime(e.detune,0),t._spread=e.spread,t._type=e.type,t._phase=e.phase,t._partials=e.partials,t._partialCount=e.partialCount,t.count=e.count,a.readOnly(t,["frequency","detune"]),t}e.FatOscillator=l},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(0),u=n(1),c=n(21),p=n(5),l=n(6),h=n(9),f=(r=l.Source,i(_,r),_.getDefaults=function(){return Object.assign(h.Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})},_.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},_.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},_.prototype.restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(_.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){return r.prototype.dispose.call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this},_);function _(){var t=r.call(this,a.optionsFromArguments(_.getDefaults(),arguments,["frequency","type","modulationType"]))||this;t.name="FMOscillator",t._carrier=new h.Oscillator({context:t.context,frequency:0}),t.frequency=new p.Signal({context:t.context,units:"frequency"}),t.detune=t._carrier.detune,t._modulator=new h.Oscillator({context:t.context}),t.harmonicity=new c.Multiply({context:t.context,units:"positive"}),t.modulationIndex=new c.Multiply({context:t.context,units:"positive"}),t._modulationNode=new s.Gain({context:t.context,gain:0});var e=a.optionsFromArguments(_.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier.type=e.type,t._modulator.type=e.modulationType,t.frequency.setValueAtTime(e.frequency,0),t.detune.setValueAtTime(e.detune,0),t.harmonicity.setValueAtTime(e.harmonicity,0),t.modulationIndex.setValueAtTime(e.modulationIndex,0),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.frequency.chain(t.modulationIndex,t._modulationNode),t._modulator.connect(t._modulationNode.gain),t._modulationNode.connect(t._carrier.frequency),t._carrier.connect(t.output),t.detune.connect(t._modulator.detune),t.phase=e.phase,u.readOnly(t,["modulationIndex","frequency","detune","harmonicity"]),t}e.FMOscillator=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(2),u=n(5),c=(r=n(34).SignalOperator,i(p,r),p.getDefaults=function(){return Object.assign(u.Signal.getDefaults(),{length:1024})},p.prototype.setMap=function(t,e){void 0===e&&(e=1024);for(var n=new Float32Array(e),o=0,i=e;o<i;o++){var r=o/(i-1)*2-1;n[o]=t(r,o)}return this.curve=n,this},Object.defineProperty(p.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(e){var t=["none","2x","4x"].some(function(t){return t.includes(e)});this.assert(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e},enumerable:!0,configurable:!0}),p.prototype.dispose=function(){return r.prototype.dispose.call(this),this._shaper.disconnect(),this},p);function p(){var t=r.call(this,Object.assign(s.optionsFromArguments(p.getDefaults(),arguments,["mapping","length"])))||this;t.name="WaveShaper",t._shaper=t.context.createWaveShaper(),t.input=t._shaper,t.output=t._shaper,t._internalChannels=[t._shaper];var e=s.optionsFromArguments(p.getDefaults(),arguments,["mapping","length"]);return a.isArray(e.mapping)||e.mapping instanceof Float32Array?t.curve=Float32Array.from(e.mapping):a.isFunction(e.mapping)&&t.setMap(e.mapping,e.length),t}e.WaveShaper=c},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(0),a=n(3),u=n(5),c=(r=a.ToneAudioNode,i(p,r),p.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),u.connectSignal(this,t,e,n),this},p);function p(){return r.call(this,Object.assign(s.optionsFromArguments(p.getDefaults(),arguments,["context"])))||this}e.SignalOperator=c},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(0),u=n(1),c=n(48),p=n(21),l=n(6),h=n(9),f=(r=l.Source,i(_,r),_.getDefaults=function(){return Object.assign(h.Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})},_.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},_.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},_.prototype.restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(_.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){return r.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this},_);function _(){var t=r.call(this,a.optionsFromArguments(_.getDefaults(),arguments,["frequency","type","modulationType"]))||this;t.name="AMOscillator",t._carrier=new h.Oscillator({context:t.context}),t.frequency=t._carrier.frequency,t.detune=t._carrier.detune,t._modulator=new h.Oscillator({context:t.context}),t._modulationScale=new c.AudioToGain({context:t.context}),t.harmonicity=new p.Multiply({context:t.context,units:"positive"}),t._modulationNode=new s.Gain({context:t.context});var e=a.optionsFromArguments(_.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier.type=e.type,t._modulator.type=e.modulationType,t.frequency.setValueAtTime(e.frequency,0),t.detune.setValueAtTime(e.detune,0),t.harmonicity.setValueAtTime(e.harmonicity,0),t.frequency.chain(t.harmonicity,t._modulator.frequency),t._modulator.chain(t._modulationScale,t._modulationNode.gain),t._carrier.chain(t._modulationNode,t.output),t.phase=e.phase,u.readOnly(t,["frequency","detune","harmonicity"]),t}e.AMOscillator=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(15),a=n(12),u=n(0),c=n(37),p=(r=c.OneShotSource,i(l,r),l.getDefaults=function(){return Object.assign(c.OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})},l.prototype.start=function(t){this.log("start",t);var e=this.toSeconds(t);return this._startGain(e),this._oscillator.start(e),this},l.prototype._stopSource=function(t){this._oscillator.stop(t)},l.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},Object.defineProperty(l.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){return r.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this},l);function l(){var t=r.call(this,u.optionsFromArguments(l.getDefaults(),arguments,["frequency","type"]))||this;t.name="ToneOscillatorNode",t._oscillator=t.context.createOscillator(),t._internalChannels=[t._gainNode,t._oscillator];var e=u.optionsFromArguments(l.getDefaults(),arguments,["frequency","type"]);return s.connect(t._oscillator,t._gainNode),t.type=e.type,t.frequency=new a.Param({context:t.context,param:t._oscillator.frequency,units:"frequency",value:t.toFrequency(e.frequency)}),t.detune=new a.Param({context:t.context,param:t._oscillator.detune,units:"cents",value:e.detune}),t}e.ToneOscillatorNode=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(3),u=n(1),c=(r=a.ToneAudioNode,i(p,r),p.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:u.noOp})},p.prototype._startGain=function(t,e){void 0===e&&(e=1),this.assert(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),0<n?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this},p.prototype.stop=function(t){return this._stopGain(this.toSeconds(t)),this},p.prototype._stopGain=function(t){var e=this;this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),0<n?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){var t="exponential"===e._curve?2*e.toSeconds(e._fadeOut):0;e._stopSource(e.now()+t),e._onended()},this._stopTime-this.context.currentTime),this},p.prototype._onended=function(){var t=this;this.onended!==u.noOp&&(this.onended(),this.onended=u.noOp,setTimeout(function(){return t.dispose()},1e3))},Object.defineProperty(p.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),p.prototype.cancelStop=function(){return this.assert(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this},p.prototype.dispose=function(){return r.prototype.dispose.call(this),this._gainNode.disconnect(),this},p);function p(t){var e=r.call(this,t)||this;return e.onended=u.noOp,e._startTime=-1,e._stopTime=-1,e._timeout=-1,e.output=new s.Gain({context:e.context,gain:0}),e._gainNode=e.output,e.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},e._fadeIn=t.fadeIn,e._fadeOut=t.fadeOut,e._curve=t.curve,e}e.OneShotSource=c},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(15),a=n(12),u=n(24),c=n(0),p=n(1),l=n(2),h=n(37),f=(r=h.OneShotSource,i(_,r),_.getDefaults=function(){return Object.assign(h.OneShotSource.getDefaults(),{buffer:new u.ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:p.noOp,playbackRate:1})},Object.defineProperty(_.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t},enumerable:!0,configurable:!0}),_.prototype.start=function(t,e,n,o){if(void 0===o&&(o=1),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),t=this.toSeconds(t),this._startGain(t,o),e=this.loop?c.defaultArg(e,this.loopStart):c.defaultArg(e,0),e=this.toSeconds(e),e=Math.max(e,0),this.loop){var i=this.toSeconds(this.loopEnd)||this.buffer.duration,r=this.toSeconds(this.loopStart);i<=e&&(e=(e-r)%(i-r)+r)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,e<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(t,e)),l.isDefined(n)){var s=this.toSeconds(n);s=Math.max(s,0),this.stop(t+s)}return this},_.prototype._stopSource=function(t){this._sourceStopped||(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())},Object.defineProperty(_.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){return r.prototype.dispose.call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this},_);function _(){var t=r.call(this,c.optionsFromArguments(_.getDefaults(),arguments,["buffer","onload"]))||this;t.name="ToneBufferSource",t._source=t.context.createBufferSource(),t._internalChannels=[t._gainNode,t._source],t._sourceStarted=!1,t._sourceStopped=!1;var e=c.optionsFromArguments(_.getDefaults(),arguments,["buffer","onload"]);return s.connect(t._source,t._gainNode),t._source.onended=function(){return t._stopSource()},t.playbackRate=new a.Param({context:t.context,param:t._source.playbackRate,units:"positive",value:e.playbackRate}),t.loop=e.loop,t.loopStart=e.loopStart,t.loopEnd=e.loopEnd,t._buffer=new u.ToneAudioBuffer(e.buffer,e.onload),t}e.ToneBufferSource=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=(r.getDefaults=function(){return{callback:o.noOp,once:!1,time:0}},r.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))},r.prototype.dispose=function(){return this.callback=void 0,this},r._eventId=0,r);function r(t,e){this.id=r._eventId++;var n=Object.assign(r.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}e.TransportEvent=i},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(10),a=n(2),u=(r=s.Tone,i(c,r),c.prototype.add=function(t){this.assert(a.isDefined(t.time),"Events must have a time property"),this.assert(a.isDefined(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new p(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},c.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t){this._removeNode(i),this._length--;break}}}return this},Object.defineProperty(c.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),c.prototype.cancel=function(t){var e=this;return this.forEachFrom(t,function(t){return e.remove(t)}),this},c.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},c.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},c.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e=void 0,n=null;if(0<t.getBalance())if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()},c.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),o=t.right;t.right=o.left,o.left=t,null!==e?n?e.left=o:e.right=o:this._setRoot(o)},c.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),o=t.left;t.left=o.right,o.right=t,null!==e?n?e.left=o:e.right=o:this._setRoot(o)},c.prototype._rebalance=function(t){var e=t.getBalance();1<e&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(0<t.right.getBalance()?this._rotateRight(t.right):this._rotateLeft(t))},c.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),0<e.length){for(var n=e[0],o=1;o<e.length;o++)e[o].low>n.low&&(n=e[o]);return n.event}}return null},c.prototype.forEach=function(e){if(null!==this._root){var n=[];this._root.traverse(function(t){return n.push(t)}),n.forEach(function(t){t.event&&e(t.event)})}return this},c.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},c.prototype.forEachFrom=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},c.prototype.dispose=function(){return r.prototype.dispose.call(this),null!==this._root&&this._root.traverse(function(t){return t.dispose()}),this._root=null,this},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="IntervalTimeline",t._root=null,t._length=0,t}e.IntervalTimeline=u;var p=(l.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},l.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},l.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},l.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},l.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},l.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},l.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},l.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(l.prototype,"left",{get:function(){return this._left},set:function(t){null!==(this._left=t)&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"right",{get:function(){return this._right},set:function(t){null!==(this._right=t)&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},l);function l(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(11),a=n(0),u=n(19),c=n(1),p=n(16),l=n(56),h=(r=s.ToneWithContext,i(f,r),f.getDefaults=function(){return Object.assign(s.ToneWithContext.getDefaults(),{callback:c.noOp,frequency:1,units:"hertz"})},Object.defineProperty(f.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),f.prototype.start=function(t,e){this.context.resume();var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this},f.prototype.stop=function(t){var e=this.toSeconds(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},f.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(f.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t},enumerable:!0,configurable:!0}),f.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},f.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},f.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},f.prototype.nextTickTime=function(t,e){var n=this.toSeconds(e),o=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(o+t,n)},f.prototype._loop=function(){var n=this,t=this._lastUpdate,e=this.now();t!==(this._lastUpdate=e)&&(this._state.forEachBetween(t,e,function(t){switch(t.state){case"started":var e=n._tickSource.getTicksAtTime(t.time);n.emit("start",t.time,e);break;case"stopped":0!==t.time&&n.emit("stop",t.time);break;case"paused":n.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,function(t,e){n.callback(t,e)}))},f.prototype.getStateAtTime=function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)},f.prototype.dispose=function(){return r.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this},f);function f(){var t=r.call(this,a.optionsFromArguments(f.getDefaults(),arguments,["callback","frequency"]))||this;t.name="Clock",t.callback=c.noOp,t._lastUpdate=0,t._state=new p.StateTimeline("stopped"),t._boundLoop=t._loop.bind(t);var e=a.optionsFromArguments(f.getDefaults(),arguments,["callback","frequency"]);return t.callback=e.callback,t._tickSource=new l.TickSource({context:t.context,frequency:e.frequency,units:e.units}),t._lastUpdate=0,t.frequency=t._tickSource.frequency,c.readOnly(t,"frequency"),t._state.setStateAtTime("stopped",0),t.context.on("tick",t._boundLoop),t}e.Clock=h,u.Emitter.mixin(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="14.0.17"},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(22),a=n(3),u=n(0),c=n(1),p=(r=a.ToneAudioNode,i(l,r),l.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{numberOfOutputs:1,volume:0})},l.prototype.sync=function(){return this._synced||(this._synced=!0,this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this},l.prototype._syncMethod=function(t,i){var r=this,s=this["_original_"+t]=this[t];this[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[i],o=r.context.transport.schedule(function(t){e[i]=t,s.apply(r,e)},n);r._scheduledEvents.push(o)}},l.prototype.unsync=function(){var e=this;return this._scheduledEvents.forEach(function(t){return e.context.transport.clear(t)}),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},l.prototype.triggerAttackRelease=function(t,e,n,o){var i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,o),this.triggerRelease(i+r),this},l.prototype.dispose=function(){return r.prototype.dispose.call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this},l);function l(){var t=r.call(this,u.optionsFromArguments(l.getDefaults(),arguments))||this;t._scheduledEvents=[],t._synced=!1,t._original_triggerAttack=t.triggerAttack,t._original_triggerRelease=t.triggerRelease;var e=u.optionsFromArguments(l.getDefaults(),arguments);return t._volume=new s.Volume({context:t.context,volume:e.volume}),t.volume=t._volume.volume,t.output=t._volume,c.readOnly(t,"volume"),t}e.Instrument=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(25),a=n(0),u=n(43),c=(r=u.Instrument,i(p,r),p.getDefaults=function(){return Object.assign(u.Instrument.getDefaults(),{portamento:0})},p.prototype.triggerAttack=function(t,e,n){return void 0===n&&(n=1),this.log("triggerAttack",t,e,n),e=this.toSeconds(e),this._triggerEnvelopeAttack(e,n),this.setNote(t,e),this},p.prototype.triggerRelease=function(t){return this.log("triggerRelease",t),t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},p.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},p.prototype.setNote=function(t,e){e=this.toSeconds(e);var n=t instanceof s.FrequencyClass?t.toFrequency():t;if(0<this.portamento&&.05<this.getLevelAtTime(e)){var o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(n,o,e)}else this.frequency.setValueAtTime(n,e);return this},p);function p(){var t=r.call(this,a.optionsFromArguments(p.getDefaults(),arguments))||this,e=a.optionsFromArguments(p.getDefaults(),arguments);return t.portamento=e.portamento,t}e.Monophonic=c},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(4),a=n(0),u=(r=n(28).Envelope,i(c,r),c.prototype.dispose=function(){return r.prototype.dispose.call(this),this._gainNode.dispose(),this},c);function c(){var t=r.call(this,a.optionsFromArguments(c.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;return t.name="AmplitudeEnvelope",t._gainNode=new s.Gain({context:t.context,gain:0}),t.output=t._gainNode,t.input=t._gainNode,t._sig.connect(t._gainNode.gain),t.output=t._gainNode,t.input=t._gainNode,t}e.AmplitudeEnvelope=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(45),a=n(28),u=n(0),c=n(1),p=n(29),l=n(6),h=n(44),f=(r=h.Monophonic,i(_,r),_.getDefaults=function(){return Object.assign(h.Monophonic.getDefaults(),{envelope:Object.assign(u.omitFromObject(a.Envelope.getDefaults(),Object.keys(l.Source.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(u.omitFromObject(p.OmniOscillator.getDefaults(),Object.keys(l.Source.getDefaults())),{type:"triangle"})})},_.prototype._triggerEnvelopeAttack=function(t,e){void 0===e&&(e=1);var n=this.toSeconds(t);if(this.envelope.triggerAttack(n,e),this.oscillator.start(n),0===this.envelope.sustain){var o=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(n+o+i)}},_.prototype._triggerEnvelopeRelease=function(t){t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))},_.prototype.dispose=function(){return r.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this},_);function _(){var t=r.call(this,u.optionsFromArguments(_.getDefaults(),arguments))||this;t.name="Synth",t.oscillator=new p.OmniOscillator({context:t.context}),t.frequency=t.oscillator.frequency,t.detune=t.oscillator.detune,t.envelope=new s.AmplitudeEnvelope({context:t.context}),t._internalChannels=[t.oscillator,t.envelope,t.output];var e=u.optionsFromArguments(_.getDefaults(),arguments);return t.oscillator.set(e.oscillator),t.envelope.set(e.envelope),t.oscillator.chain(t.envelope,t.output),c.readOnly(t,["oscillator","frequency","detune","envelope"]),t}e.Synth=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(46);e.Synth=o.Synth},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(34),a=n(33),u=(r=s.SignalOperator,i(c,r),c.prototype.dispose=function(){return r.prototype.dispose.call(this),this._norm.dispose(),this},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="AudioToGain",t._norm=new a.WaveShaper({context:t.context,mapping:function(t){return(t+1)/2}}),t._internalChannels=[t._norm],t.input=t._norm,t.output=t._norm,t}e.AudioToGain=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,h=n(24),s=n(0),a=n(6),u=n(38),c=(r=a.Source,i(p,r),p.getDefaults=function(){return Object.assign(a.Source.getDefaults(),{playbackRate:1,type:"white"})},Object.defineProperty(p.prototype,"type",{get:function(){return this._type},set:function(t){if(this.assert(t in l,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var e=this.now();this._stop(e),this._start(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)},enumerable:!0,configurable:!0}),p.prototype._start=function(t){var e=l[this._type];this._source=new u.ToneBufferSource(e).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))},p.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},p.prototype.restart=function(t){return this._stop(t),this._start(t),this},p.prototype.dispose=function(){return r.prototype.dispose.call(this),this._source&&this._source.disconnect(),this},p);function p(){var t=r.call(this,s.optionsFromArguments(p.getDefaults(),arguments,["type"]))||this;t.name="Noise",t._source=null;var e=s.optionsFromArguments(p.getDefaults(),arguments,["type"]);return t._playbackRate=e.playbackRate,t.type=e.type,t}e.Noise=c;var f={brown:null,pink:null,white:null},l={get brown(){if(!f.brown){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var o=0,i=0;i<220500;i++){var r=2*Math.random()-1;n[i]=(o+.02*r)/1.02,o=n[i],n[i]*=3.5}}f.brown=(new h.ToneAudioBuffer).fromArray(t)}return f.brown},get pink(){if(!f.pink){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;var o=void 0,i=void 0,r=void 0,s=void 0,a=void 0,u=void 0,c=void 0;o=i=r=s=a=u=c=0;for(var p=0;p<220500;p++){var l=2*Math.random()-1;o=.99886*o+.0555179*l,i=.99332*i+.0750759*l,r=.969*r+.153852*l,s=.8665*s+.3104856*l,a=.55*a+.5329522*l,u=-.7616*u-.016898*l,n[p]=o+i+r+s+a+u+c+.5362*l,n[p]*=.11,c=.115926*l}}f.pink=(new h.ToneAudioBuffer).fromArray(t)}return f.pink},get white(){if(!f.white){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var o=0;o<220500;o++)n[o]=2*Math.random()-1}f.white=(new h.ToneAudioBuffer).fromArray(t)}return f.white}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(49);e.Noise=o.Noise;var i=n(9);e.Oscillator=i.Oscillator;var r=n(35);e.AMOscillator=r.AMOscillator;var s=n(32);e.FMOscillator=s.FMOscillator;var a=n(20);e.PulseOscillator=a.PulseOscillator;var u=n(31);e.FatOscillator=u.FatOscillator;var c=n(30);e.PWMOscillator=c.PWMOscillator;var p=n(29);e.OmniOscillator=p.OmniOscillator;var l=n(36);e.ToneOscillatorNode=l.ToneOscillatorNode;var h=n(38);e.ToneBufferSource=h.ToneBufferSource},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(23),a=n(39),u=(r=a.TransportEvent,i(c,r),c.getDefaults=function(){return Object.assign({},a.TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})},c.prototype.invoke=function(t){this._createEvents(t),r.prototype.invoke.call(this,t)},c.prototype._createEvents=function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new s.TicksClass(this.context,this._nextTick).toSeconds()))},c.prototype._restart=function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new s.TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new s.TicksClass(this.context,this._nextTick).toSeconds())},c.prototype.dispose=function(){return r.prototype.dispose.call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this},c);function c(t,e){var n=r.call(this,t,e)||this;n._currentId=-1,n._nextId=-1,n._nextTick=n.time,n._boundRestart=n._restart.bind(n);var o=Object.assign(c.getDefaults(),e);return n.duration=s.Ticks(o.duration).valueOf(),n._interval=s.Ticks(o.interval).valueOf(),n._nextTick=o.time,n.transport.on("start",n._boundRestart),n.transport.on("loopStart",n._boundRestart),n.context=n.transport.context,n._restart(),n}e.TransportRepeatEvent=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(13),a=n(26),u=n(4),c=n(11),p=n(23),l=n(17),h=n(0),f=n(19),_=n(1),d=n(40),y=n(8),m=n(2),g=n(41),v=n(39),b=n(51),T=(r=c.ToneWithContext,i(O,r),O.getDefaults=function(){return Object.assign(c.ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})},O.prototype._processTick=function(e,t){if(0<this._swingAmount&&t%this._ppq!=0&&t%(2*this._swingTicks)!=0){var n=t%(2*this._swingTicks)/(2*this._swingTicks),o=Math.sin(n*Math.PI)*this._swingAmount;e+=new p.TicksClass(this.context,2*this._swingTicks/3).toSeconds()*o}this.loop&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._timeline.forEachAtTime(t,function(t){return t.invoke(e)})},O.prototype.schedule=function(t,e){var n=new v.TransportEvent(this,{callback:t,time:new l.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},O.prototype.scheduleRepeat=function(t,e,n,o){void 0===o&&(o=1/0);var i=new b.TransportRepeatEvent(this,{callback:t,duration:new s.TimeClass(this.context,o).toTicks(),interval:new s.TimeClass(this.context,e).toTicks(),time:new l.TransportTimeClass(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)},O.prototype.scheduleOnce=function(t,e){var n=new v.TransportEvent(this,{callback:t,once:!0,time:new l.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},O.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},O.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},O.prototype.cancel=function(t){var e=this;void 0===t&&(t=0);var n=this.toTicks(t);return this._timeline.forEachFrom(n,function(t){return e.clear(t.id)}),this._repeatedEvents.forEachFrom(n,function(t){return e.clear(t.id)}),this},O.prototype._bindClockEvents=function(){var n=this;this._clock.on("start",function(t,e){e=new p.TicksClass(n.context,e).toSeconds(),n.emit("start",t,e)}),this._clock.on("stop",function(t){n.emit("stop",t)}),this._clock.on("pause",function(t){n.emit("pause",t)})},Object.defineProperty(O.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),O.prototype.start=function(t,e){var n;return m.isDefined(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this},O.prototype.stop=function(t){return this._clock.stop(t),this},O.prototype.pause=function(t){return this._clock.pause(t),this},O.prototype.toggle=function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this},Object.defineProperty(O.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){m.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"loopStart",{get:function(){return s.Time(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"loopEnd",{get:function(){return s.Time(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)},enumerable:!0,configurable:!0}),O.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(O.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"swingSubdivision",{get:function(){return new p.TicksClass(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new p.TicksClass(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();"started"===this.state?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}},enumerable:!0,configurable:!0}),O.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},O.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(O.prototype,"PPQ",{get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t},enumerable:!0,configurable:!0}),O.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)},O.prototype.syncSignal=function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var o=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/o}else e=0}var i=new u.Gain(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this},O.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;0<=e;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this},O.prototype.dispose=function(){return r.prototype.dispose.call(this),this._clock.dispose(),_.writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this},O);function O(){var t=r.call(this,h.optionsFromArguments(O.getDefaults(),arguments))||this;t.name="Transport",t.loop=!1,t._loopStart=0,t._loopEnd=0,t._scheduledEvents={},t._timeline=new y.Timeline,t._repeatedEvents=new d.IntervalTimeline,t._syncedSignals=[],t._swingAmount=0;var e=h.optionsFromArguments(O.getDefaults(),arguments);return t._ppq=e.ppq,t._clock=new g.Clock({callback:t._processTick.bind(t),context:t.context,frequency:0,units:"bpm"}),t._bindClockEvents(),t.bpm=t._clock.frequency,t._clock.frequency.multiplier=e.ppq,t.bpm.value=e.bpm,_.readOnly(t,"bpm"),t._timeSignature=e.timeSignature,t._swingTicks=e.ppq/2,t}e.Transport=T,f.Emitter.mixin(T),a.onContextInit(function(t){t.transport=new T({context:t})}),a.onContextClose(function(t){t.transport.dispose()})},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(22),a=n(15),u=n(0),c=n(26),p=n(4),l=n(3),h=(r=l.ToneAudioNode,i(f,r),f.getDefaults=function(){return Object.assign(l.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(f.prototype,"mute",{get:function(){return this.input.mute},set:function(t){this.input.mute=t},enumerable:!0,configurable:!0}),f.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.input.disconnect(),t.unshift(this.input),t.push(this.output),a.connectSeries.apply(void 0,t),this},f.prototype.dispose=function(){return r.prototype.dispose.call(this),this.volume.dispose(),this},f);function f(){var t=r.call(this,u.optionsFromArguments(f.getDefaults(),arguments))||this;t.name="Destination",t.input=new s.Volume({context:t.context}),t.output=new p.Gain({context:t.context}),t.volume=t.input.volume,t._internalChannels=[t.input,t.output];var e=u.optionsFromArguments(f.getDefaults(),arguments);return a.connectSeries(t.input,t.output,t.context.rawContext.destination),t.volume.value=e.volume,t.mute=e.mute,t}e.Destination=h,c.onContextInit(function(t){t.destination=new h({context:t})}),c.onContextClose(function(t){t.destination.dispose()})},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(11),a=n(8),u=(r=s.ToneWithContext,i(c,r),c.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this},c.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},c.prototype._drawLoop=function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}0<this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))},c.prototype.dispose=function(){return r.prototype.dispose.call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="Draw",t.expiration=.25,t.anticipation=.008,t._events=new a.Timeline,t._boundDrawLoop=t._drawLoop.bind(t),t._animationFrame=-1,t}e.Draw=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s,r=n(15),a=n(12),u=n(7),c=n(0),p=n(8),l=n(2),h=(s=a.Param,i(f,s),f.getDefaults=function(){return Object.assign(a.Param.getDefaults(),{multiplier:1,param:u.getContext().createConstantSource().offset,units:"hertz",value:1})},f.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var o=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1)),s=0;s<=r;s++){var a=n*s+e,u=this._exponentialApproach(i.time,i.value,o,n,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},f.prototype.setValueAtTime=function(t,e){var n=this.toSeconds(e);s.prototype.setValueAtTime.call(this,t,e);var o=this._events.get(n),i=this._events.previousEvent(o),r=this._getTicksUntilEvent(i,n);return o.ticks=Math.max(r,0),this},f.prototype.linearRampToValueAtTime=function(t,e){var n=this.toSeconds(e);s.prototype.linearRampToValueAtTime.call(this,t,e);var o=this._events.get(n),i=this._events.previousEvent(o),r=this._getTicksUntilEvent(i,n);return o.ticks=Math.max(r,0),this},f.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),o=this._events.get(e),i=Math.round(Math.max(10*(e-o.time),1)),r=(e-o.time)/i,s=0;s<=i;s++){var a=r*s+o.time,u=this._exponentialInterpolate(o.time,o.value,e,n,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},f.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0,type:"setValue",value:0};else if(l.isUndef(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var o=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),r=this._events.get(e);return r&&r.time===e&&"setValue"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(o+i)+t.ticks},f.prototype.getTicksAtTime=function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)},f.prototype.getDurationOfTicks=function(t,e){var n=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-n},f.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linear"===n.type&&e.value!==n.value){var o=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-o)/(n.time-e.time),r=Math.sqrt(Math.pow(o,2)-2*i*(e.ticks-t)),s=(-o+r)/i;return(0<s?s:(-o-r)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},f.prototype.ticksToTime=function(t,e){return this.getDurationOfTicks(t,e)},f.prototype.timeToTicks=function(t,e){var n=this.toSeconds(e),o=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+o)-i},f.prototype._fromType=function(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):s.prototype._fromType.call(this,t)},f.prototype._toType=function(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:s.prototype._toType.call(this,t)},Object.defineProperty(f.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.value=e},enumerable:!0,configurable:!0}),f.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),r.connect(this._sig,t,e,n),this},f);function f(){var t=s.call(this,c.optionsFromArguments(f.getDefaults(),arguments,["value"]))||this;t.name="TickSignal",t._events=new p.Timeline(1/0),t._sig=t.context.createConstantSource(),t._param=t._sig.offset,t._multiplier=1;var e=c.optionsFromArguments(f.getDefaults(),arguments,["value"]);return t._sig=t.context.createConstantSource(),t._sig.start(0),t._param=t._sig.offset,t.multiplier=e.multiplier,t.cancelScheduledValues(0),t._events.add({ticks:0,time:0,type:"setValue",value:t._fromType(e.value)}),t.setValueAtTime(e.value,0),t}e.TickSignal=h},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(11),a=n(0),u=n(1),c=n(16),p=n(8),l=n(2),h=n(55),f=(r=s.ToneWithContext,i(_,r),_.getDefaults=function(){return Object.assign({frequency:1,units:"hertz"},s.ToneWithContext.getDefaults())},Object.defineProperty(_.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),_.prototype.start=function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),l.isDefined(e)&&this.setTicksAtTime(e,n)),this},_.prototype.stop=function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&0<n.time&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this},_.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this},_.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},_.prototype.getTicksAtTime=function(t){var o=this,e=this.toSeconds(t),n=this._state.getLastState("stopped",e);if(!n)return 0;var i={state:"paused",time:e};this._state.add(i);var r=n,s=0;return this._state.forEachBetween(n.time,e+this.sampleTime,function(t){var e=r.time,n=o._tickOffset.get(t.time);n&&n.time>=r.time&&(s=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(s+=o.frequency.getTicksAtTime(t.time)-o.frequency.getTicksAtTime(e)),r=t}),this._state.remove(i),s},Object.defineProperty(_.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)},enumerable:!0,configurable:!0}),_.prototype.getSecondsAtTime=function(t){var o=this;t=this.toSeconds(t);var e=this._state.getLastState("stopped",t);if(!e)return 0;var n={state:"paused",time:t};this._state.add(n);var i=e,r=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=i.time,n=o._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.seconds,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-e),i=t}),this._state.remove(n),r},_.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this},_.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},_.prototype.getTimeOfTick=function(t,e){void 0===e&&(e=this.now());var n=this._tickOffset.get(e),o=this._state.get(e),i=Math.max(n.time,o.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)},_.prototype.forEachTickBetween=function(t,e,n){var o=this,i=this.toSeconds(t),r=this.toSeconds(e),s=this._state.get(i);this._state.forEachBetween(i,r,function(t){s&&"started"===s.state&&"started"!==t.state&&o.forEachTickBetween(Math.max(s.time,i),t.time-o.sampleTime,n),s=t});var a=null;if(s&&"started"===s.state&&this._state){var u=Math.max(s.time,i),c=this.frequency.getTicksAtTime(u),p=(c-this.frequency.getTicksAtTime(s.time))%1;0!==p&&(p=1-p);for(var l=this.frequency.getTimeOfTick(c+p);l<r&&this._state;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(t){a=t;break}this._state&&(l+=this.frequency.getDurationOfTicks(1,l))}}if(a)throw a;return this},_.prototype.dispose=function(){return r.prototype.dispose.call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this},_);function _(){var t=r.call(this,a.optionsFromArguments(_.getDefaults(),arguments,["frequency"]))||this;t.name="TickSource",t._state=new c.StateTimeline,t._tickOffset=new p.Timeline;var e=a.optionsFromArguments(_.getDefaults(),arguments,["frequency"]);return t.frequency=new h.TickSignal({context:t.context,units:e.units,value:t.toFrequency(e.frequency)}),u.readOnly(t,"frequency"),t._state.setStateAtTime("stopped",0),t.setTicksAtTime(0,0),t}e.TickSource=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(12),a=n(0),u=n(1),c=n(3),p=(r=c.ToneAudioNode,i(l,r),l.getDefaults=function(){return Object.assign(c.ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1,numberOfInputs:1,numberOfOutputs:1})},l.prototype.dispose=function(){return r.prototype.dispose.call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this},l);function l(){var t=r.call(this,a.optionsFromArguments(l.getDefaults(),arguments,["delayTime","maxDelay"]))||this;t.name="Delay";var e=a.optionsFromArguments(l.getDefaults(),arguments,["delayTime","maxDelay"]);return t.maxDelay=Math.max(t.toSeconds(e.maxDelay),t.toSeconds(e.delayTime)),t._delayNode=t.input=t.output=t.context.createDelay(e.maxDelay),t._internalChannels=[t._delayNode],t.delayTime=new s.Param({context:t.context,param:t._delayNode.delayTime,units:"time",value:e.delayTime}),u.readOnly(t,"delayTime"),t}e.Delay=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=(r=n(27).Context,i(a,r),a.prototype.now=function(){return this._currentTime},Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),a.prototype.render=function(){for(;0<=this._duration-this._currentTime;)this.emit("tick"),this._currentTime+=.005;return this._context.startRendering()},a.prototype.close=function(){return Promise.resolve(this)},a);function a(t,e,n){var o=r.call(this,{clockSource:"offline",context:t instanceof OfflineAudioContext?t:new OfflineAudioContext(t,e*n,n),lookAhead:0,updateInterval:t instanceof OfflineAudioContext?128/t.sampleRate:128/n})||this;return o.name="OfflineContext",o._currentTime=0,o._duration=t instanceof OfflineAudioContext?t.length/t.sampleRate:e,o}e.OfflineContext=s},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(10),a=n(2),u=(r=s.Tone,i(c,r),c.prototype._getExpressions=function(){var i=this;return{hz:{method:function(t){return i._frequencyToUnits(parseFloat(t))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(t){return i._ticksToUnits(parseInt(t,10))},regexp:/^(\d+)i$/i},m:{method:function(t){return i._beatsToUnits(parseInt(t,10)*i._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(t,e){var n=parseInt(t,10),o="."===e?1.5:1;return 1===n?i._beatsToUnits(i._getTimeSignature())*o:i._beatsToUnits(4/n)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:function(t){return i._expressions[i.defaultUnits].method.call(i,t)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(t){return i._secondsToUnits(parseFloat(t))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(t){return parseInt(t,10)/i.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(t){var e=parseInt(t,10);return i._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:function(t,e,n){var o=0;return t&&"0"!==t&&(o+=i._beatsToUnits(i._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o+=i._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(o+=i._beatsToUnits(parseFloat(n)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}},c.prototype.valueOf=function(){if(this._val instanceof c&&this.fromType(this._val),a.isUndef(this._val))return this._noArg();if(a.isString(this._val)&&a.isUndef(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(a.isObject(this._val)){var e=0;for(var n in this._val)if(a.isDefined(this._val[n])){var o=this._val[n];e+=new this.constructor(this.context,n).valueOf()*o}return e}if(a.isDefined(this._units)){var i=this._expressions[this._units],r=this._val.toString().trim().match(i.regexp);return r?i.method.apply(this,r.slice(1)):i.method.call(this,this._val)}return a.isString(this._val)?parseFloat(this._val):this._val},c.prototype._frequencyToUnits=function(t){return 1/t},c.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},c.prototype._secondsToUnits=function(t){return t},c.prototype._ticksToUnits=function(t){return t*this._beatsToUnits(1)/this._getPPQ()},c.prototype._noArg=function(){return this._now()},c.prototype._getBpm=function(){return this.context.transport.bpm.value},c.prototype._getTimeSignature=function(){return this.context.transport.timeSignature},c.prototype._getPPQ=function(){return this.context.transport.PPQ},c.prototype.fromType=function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this},c.prototype.toFrequency=function(){return 1/this.toSeconds()},c.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},c.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},c);function c(t,e,n){var o=r.call(this)||this;return o.defaultUnits="s",o._val=e,o._units=n,o.context=t,o._expressions=o._getExpressions(),o}e.TimeBaseClass=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.Gain=o.Gain;var i=n(27);e.Context=i.Context;var r=n(58);e.OfflineContext=r.OfflineContext;var s=n(24);e.ToneAudioBuffer=s.ToneAudioBuffer;var a=n(57);e.Delay=a.Delay;var u=n(41);e.Clock=u.Clock;var c=n(25);e.Frequency=c.Frequency;var p=n(13);e.Time=p.Time;var l=n(23);e.Ticks=l.Ticks;var h=n(17);e.TransportTime=h.TransportTime;var f=n(54);e.Draw=f.Draw;var _=n(16);e.StateTimeline=_.StateTimeline;var d=n(40);e.IntervalTimeline=d.IntervalTimeline;var y=n(8);e.Timeline=y.Timeline;var m=n(19);e.Emitter=m.Emitter;var g=n(10);e.Tone=g.Tone;var v=n(53);e.Destination=v.Destination;var b=n(52);e.Transport=b.Transport},function(t,e,n){"use strict";var o;function i(t){o=t,window.TONE_AUDIO_CONTEXT=o}Object.defineProperty(e,"__esModule",{value:!0}),o=window.TONE_AUDIO_CONTEXT,e.getAudioContext=function(){return o||i(new AudioContext),o},e.setAudioContext=i},function(tR,uR){var vR;vR=function(){return this}();try{vR=vR||Function("return this")()||eval("this")}catch(tR){"object"==typeof window&&(vR=window)}tR.exports=vR},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(i.prototype._createWorker=function(){var t=new Blob(["var timeoutTime =  "+(1e3*this._updateInterval).toFixed(1)+";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();"]),e=window.URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},i.prototype._createTimeout=function(){var t=this;this._timeout=window.setTimeout(function(){t._createTimeout(),t._callback()},1e3*this._updateInterval)},i.prototype._createClock=function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()},i.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)},Object.defineProperty(i.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._disposeClock()},i);function i(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}e.Ticker=o},function(t,n,e){"use strict";function o(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0});var i=e(7);n.getContext=i.getContext,n.setContext=i.setContext,o(e(60)),o(e(50)),o(e(47));var r=e(7);n.now=function(){return r.getContext().now()}}],e.c=d,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=64);function e(t){if(d[t])return d[t].exports;var n=d[t]={i:t,l:!1,exports:{}};return c[t].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var c,d});