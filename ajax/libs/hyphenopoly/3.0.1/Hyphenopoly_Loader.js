/**
 * @license Hyphenopoly_Loader 3.0.1 - client side hyphenation
 * ©2019  Mathias Nater, Zürich (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
!function(){"use strict";const e=document,t=Hyphenopoly;function n(){return Object.create(null)}function s(e,t){Object.keys(e).forEach(t)}function a(n,s){const a=e.createElement("script");a.src=n+s,"hyphenEngine.asm.js"===s&&a.addEventListener("load",function(){t.events.dispatch("engineLoaded",{msg:"asm"})}),e.head.appendChild(a)}t.cacheFeatureTests&&sessionStorage.getItem("Hyphenopoly_Loader")?t.clientFeat=JSON.parse(sessionStorage.getItem("Hyphenopoly_Loader")):t.clientFeat={langs:n(),polyfill:!1,wasm:null},t.dfltPaths=Object.create({maindir:"../Hyphenopoly/",patterndir:"../Hyphenopoly/patterns/"}),t.paths&&(t.paths.patterndir&&(t.dfltPaths.patterndir=t.paths.patterndir),t.paths.maindir&&(t.dfltPaths.maindir=t.paths.maindir)),t.setup?(t.setup.selectors=t.setup.selectors||{".hyphenate":{}},t.setup.timeout=t.setup.timeout||1e3,t.setup.hide=t.setup.hide||"all"):t.setup={hide:"all",selectors:{".hyphenate":{}},timeout:1e3},t.lcRequire=new Map,s(t.require,function(e){t.lcRequire.set(e.toLowerCase(),t.require[e])}),t.fallbacks&&(t.lcFallbacks=new Map,s(t.fallbacks,function(e){t.lcFallbacks.set(e.toLowerCase(),t.fallbacks[e].toLowerCase())})),t.toggle=function(n){if("on"===n){const t=e.getElementById("H9Y_Styles");t&&t.parentNode.removeChild(t)}else{const n=" {visibility: hidden !important}\n",a=e.createElement("style");switch(a.id="H9Y_Styles",t.setup.hide){case"all":a.innerHTML="html"+n;break;case"element":s(t.setup.selectors,function(e){a.innerHTML+=e+n});break;case"text":s(t.setup.selectors,function(e){a.innerHTML+=e+" {color: transparent !important}\n"});break;default:a.innerHTML=""}e.getElementsByTagName("head")[0].appendChild(a)}},function(){const e=new Map,a=[],o=[];function i(t,n,s){e.set(t,{cancellable:s,default:n,register:[]})}function l(n,s,a){e.has(n)?e.get(n).register.push(s):a?o.push({handler:s,name:n}):t.events.dispatch("error",{lvl:"warn",msg:'unknown Event "'+n+'" discarded'})}i("timeout",function(e){t.toggle("on"),window.console.info("Hyphenopolys 'FOUHC'-prevention timed out after %dms",e.delay)},!1),i("error",function(e){switch(e.lvl){case"info":window.console.info(e.msg);break;case"warn":window.console.warn(e.msg);break;default:window.console.error(e.msg)}},!0),i("contentLoaded",function(e){a.push({data:e,name:"contentLoaded"})},!1),i("engineLoaded",function(e){a.push({data:e,name:"engineLoaded"})},!1),i("hpbLoaded",function(e){a.push({data:e,name:"hpbLoaded"})},!1),i("loadError",function(e){a.push({data:e,name:"loadError"})}),i("tearDown",null,!0),t.handleEvent&&s(t.handleEvent,function(e){l(e,t.handleEvent[e],!0)}),t.events=n(),t.events.deferred=a,t.events.tempRegister=o,t.events.dispatch=function(t,s){s=s||n();let a=!1;e.get(t).register.forEach(function(n){s.preventDefault=function(){e.get(t).cancellable&&(a=!0)},n(s)}),!a&&e.get(t).default&&e.get(t).default(s)},t.events.define=i,t.events.addListener=l}();const o=new Map;function i(e,n,s,a){var i,l,r,c;t.clientFeat.wasm?(i=e,l=n,r=s,c=a,o.has(l)?"hyphenEngine"!==r&&o.get(l).push(c):(o.set(l,[c]),window.fetch(i+l).then(function(e){if(e.ok)if("hyphenEngine"===r)t.binaries.set(r,e.arrayBuffer().then(function(e){return new WebAssembly.Module(e)})),t.events.dispatch("engineLoaded",{msg:c});else{const n=o.get(l);n.forEach(function(s){t.binaries.set(s,n.length>1?e.clone().arrayBuffer():e.arrayBuffer()),t.events.dispatch("hpbLoaded",{msg:s})})}else t.events.dispatch("loadError",{file:l,msg:c,name:r,path:i})}))):function(e,n,s,a){if(o.has(n))o.get(n).push(a);else{o.set(n,[a]);const i=new XMLHttpRequest;i.onload=function(){"OK"===i.statusText?o.get(n).forEach(function(e){t.binaries.set(e,i.response),t.events.dispatch("hpbLoaded",{msg:e})}):t.events.dispatch("loadError",{file:n,msg:a,name:s,path:e})},i.open("GET",e+n),i.responseType="arraybuffer",i.send()}}(e,n,s,a)}function l(){t.setup.hide.match(/^(?:element|text)$/)&&t.toggle("off"),t.events.dispatch("contentLoaded",{msg:["contentLoaded"]})}!function(){const o=function(){let n=null;const s=["visibility:hidden;","-moz-hyphens:auto;","-webkit-hyphens:auto;","-ms-hyphens:auto;","hyphens:auto;","width:48px;","font-size:12px;","line-height:12px;","border:none;","padding:0;","word-wrap:normal"].join("");return{append:function(e){return n?(e.appendChild(n),n):null},clear:function(){n&&n.parentNode.removeChild(n)},create:function(a){if(t.clientFeat.langs[a])return;n=n||e.createElement("body");const o=e.createElement("div");o.lang=a,o.id=a,o.style.cssText=s,o.appendChild(e.createTextNode(t.lcRequire.get(a))),n.appendChild(o)}}}();function l(e){let n=e+".hpb",s=e;t.lcFallbacks&&t.lcFallbacks.has(e)&&(n=(s=t.lcFallbacks.get(e))+".hpb"),t.binaries=t.binaries||new Map,i(t.dfltPaths.patterndir,n,s,e)}null===t.clientFeat.wasm&&(t.clientFeat.wasm=function(){if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.from([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]));if(WebAssembly.Module.prototype.isPrototypeOf(e)){const t=new WebAssembly.Instance(e);return WebAssembly.Instance.prototype.isPrototypeOf(t)&&0!==t.exports.test(4)}}return!1}()),t.lcRequire.forEach(function(e,n){"FORCEHYPHENOPOLY"===e?(t.clientFeat.polyfill=!0,t.clientFeat.langs[n]="H9Y",l(n)):t.clientFeat.langs[n]&&"H9Y"===t.clientFeat.langs[n]?l(n):o.create(n)}),null!==o.append(e.documentElement)&&(t.lcRequire.forEach(function(n,s){if("FORCEHYPHENOPOLY"!==n){const n=e.getElementById(s);("auto"===(a=n).style.hyphens||"auto"===a.style.webkitHyphens||"auto"===a.style.msHyphens||"auto"===a.style["-moz-hyphens"])&&n.offsetHeight>12?t.clientFeat.langs[s]="CSS":(t.clientFeat.polyfill=!0,t.clientFeat.langs[s]="H9Y",l(s))}var a}),o.clear()),t.clientFeat.polyfill&&(a(t.dfltPaths.maindir,"Hyphenopoly.js"),t.clientFeat.wasm?i(t.dfltPaths.maindir,"hyphenEngine.wasm","hyphenEngine","wasm"):a(t.dfltPaths.maindir,"hyphenEngine.asm.js"),s(t.clientFeat.langs,function(e){"H9Y"===t.clientFeat.langs[e]&&(function(e){const n=new Map([["de",54],["hu",205],["nb-no",91],["nl",41]]).get(e)||32;if(t.specMems=t.specMems||new Map,t.clientFeat.wasm)t.specMems.set(e,new WebAssembly.Memory({initial:n,maximum:256}));else{Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E};const s=65536*(2<<Math.floor(Math.log2(n)));t.specMems.set(e,new ArrayBuffer(s))}}(e),function(e){t.hyphenators=t.hyphenators||n(),t.hyphenators[e]||(window.Promise?t.hyphenators[e]=new Promise(function(n,s){t.events.addListener("engineReady",function(s){s.msg===e&&n(t.createHyphenator(s.msg))},!0),t.events.addListener("error",function(t){t.key!==e&&"hyphenEngine"!==t.key||s(t.msg)},!0)}):t.hyphenators[e]={then:function(){t.events.dispatch("error",{msg:"Promises not supported in this engine. Use a polyfill (e.g. https://github.com/taylorhakes/promise-polyfill)!"})}})}(e))}))}(),t.clientFeat.polyfill?("all"===t.setup.hide&&t.toggle("off"),"none"!==t.setup.hide&&(t.setup.timeOutHandler=window.setTimeout(function(){t.toggle("on"),t.events.dispatch("timeout",{delay:t.setup.timeout})},t.setup.timeout)),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",l,{once:!0,passive:!0}):l()):(t.events.dispatch("tearDown",{}),window.Hyphenopoly=null),t.cacheFeatureTests&&sessionStorage.setItem("Hyphenopoly_Loader",JSON.stringify(t.clientFeat))}();