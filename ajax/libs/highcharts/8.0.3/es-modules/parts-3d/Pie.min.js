"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var pick=U.pick,wrap=U.wrap,deg2rad=H.deg2rad,seriesTypes=H.seriesTypes,svg=H.svg;wrap(seriesTypes.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var a=this,s=a.options,e=s.depth||0,r=a.chart.options.chart.options3d,i=r.alpha,o=r.beta,p=s.stacking?(s.stack||0)*e:a._i*e;p+=e/2,!1!==s.grouping&&(p=0),a.data.forEach(function(t){var r,n=t.shapeArgs;t.shapeType="arc3d",n.z=p,n.depth=.75*e,n.alpha=i,n.beta=o,n.center=a.center,r=(n.end+n.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(r)*s.slicedOffset*Math.cos(i*deg2rad)),translateY:Math.round(Math.sin(r)*s.slicedOffset*Math.cos(i*deg2rad))}})}}),wrap(seriesTypes.pie.prototype.pointClass.prototype,"haloPath",function(t){var a=arguments;return this.series.chart.is3d()?[]:t.call(this,a[1])}),wrap(seriesTypes.pie.prototype,"pointAttribs",function(t,a,s){var e=t.call(this,a,s),r=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(e.stroke=r.edgeColor||a.color||this.color,e["stroke-width"]=pick(r.edgeWidth,1)),e}),wrap(seriesTypes.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var a=this.chart.options.chart.options3d;this.data.forEach(function(t){var s=t.shapeArgs,e=s.r,r=(s.alpha||a.alpha)*deg2rad,i=(s.beta||a.beta)*deg2rad,o=(s.start+s.end)/2,p=t.labelPosition,n=p.connectorPosition,l=-e*(1-Math.cos(r))*Math.sin(o),c=e*(Math.cos(i)-1)*Math.cos(o);[p.natural,n.breakAt,n.touchingSliceAt].forEach(function(t){t.x+=c,t.y+=l})})}t.apply(this,[].slice.call(arguments,1))}),wrap(seriesTypes.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),wrap(seriesTypes.pie.prototype,"animate",function(t){if(this.chart.is3d()){var a,s=arguments[1],e=this.options.animation,r=this.center,i=this.group,o=this.markerGroup;svg&&(!0===e&&(e={}),s?(i.oldtranslateX=i.translateX,i.oldtranslateY=i.translateY,a={translateX:r[0],translateY:r[1],scaleX:.001,scaleY:.001},i.attr(a),o&&(o.attrSetters=i.attrSetters,o.attr(a))):(a={translateX:i.oldtranslateX,translateY:i.oldtranslateY,scaleX:1,scaleY:1},i.animate(a,e),o&&o.animate(a,e)))}else t.apply(this,[].slice.call(arguments,1))});