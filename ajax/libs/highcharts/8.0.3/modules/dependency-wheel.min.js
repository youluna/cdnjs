!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(e,t,n,a){e.hasOwnProperty(t)||(e[t]=a.apply(null,n))}t(e=e?e._modules:{},"modules/dependency-wheel.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(e,t){var n=t.animObject;t=t.seriesType;var a=e.seriesTypes.sankey.prototype;t("dependencywheel","sankey",{center:[null,null],curveFactor:.6,startAngle:0},{orderNodes:!1,getCenter:e.seriesTypes.pie.prototype.getCenter,createNodeColumns:function(){var t=[this.createNodeColumn()];return this.nodes.forEach(function(e){e.column=0,t[0].push(e)}),t},getNodePadding:function(){return this.options.nodePadding/Math.PI},createNode:function(e){var r=a.createNode.call(this,e);return r.index=this.nodes.length-1,r.getSum=function(){return r.linksFrom.concat(r.linksTo).reduce(function(e,t){return e+t.weight},0)},r.offset=function(e){function n(e){return e.fromNode===r?e.toNode:e.fromNode}var t,a=0,i=r.linksFrom.concat(r.linksTo);for(i.sort(function(e,t){return n(e).index-n(t).index}),t=0;t<i.length;t++)if(n(i[t]).index>r.index){i=i.slice(0,t).reverse().concat(i.slice(t).reverse());var s=!0;break}for(s||i.reverse(),t=0;t<i.length;t++){if(i[t]===e)return a;a+=i[t].weight}},r},translate:function(){var d=this.options,u=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),i=this.getCenter(),l=(d.startAngle-90)*e.deg2rad;a.translate.call(this),this.nodeColumns[0].forEach(function(e){if(e.sum){var t=e.shapeArgs,o=i[0],c=i[1],n=i[2]/2,h=n-d.nodeWidth,a=l+u*t.y;t=l+u*(t.y+t.height),e.angle=a+(t-a)/2,e.shapeType="arc",e.shapeArgs={x:o,y:c,r:n,innerR:h,start:a,end:t},e.dlBox={x:o+Math.cos((a+t)/2)*(n+h)/2,y:c+Math.sin((a+t)/2)*(n+h)/2,width:1,height:1},e.linksFrom.forEach(function(s){if(s.linkBase){var r,e=s.linkBase.map(function(e,t){e*=u;var n=Math.cos(l+e)*(1+h),a=Math.sin(l+e)*(1+h),i=d.curveFactor;return(r=Math.abs(s.linkBase[3-t]*u-e))>Math.PI&&(r=2*Math.PI-r),(r*=h)<h&&(i*=r/h),{x:o+n,y:c+a,cpX:o+(1-i)*n,cpY:c+(1-i)*a}});s.shapeArgs={d:["M",e[0].x,e[0].y,"A",h,h,0,0,1,e[1].x,e[1].y,"C",e[1].cpX,e[1].cpY,e[2].cpX,e[2].cpY,e[2].x,e[2].y,"A",h,h,0,0,1,e[3].x,e[3].y,"C",e[3].cpX,e[3].cpY,e[0].cpX,e[0].cpY,e[0].x,e[0].y]}}})}})},animate:function(e){if(!e){var a=n(this.options.animation).duration/2/this.nodes.length;this.nodes.forEach(function(e,t){var n=e.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){n.animate({opacity:1},{duration:a})},a*t))},this),this.points.forEach(function(e){var t=e.graphic;!e.isNode&&t&&t.attr({opacity:0}).animate({opacity:1},this.options.animation)},this)}}},{setState:e.NodesMixin.setNodeState,getDataLabelPath:function(e){var t=this.series.chart.renderer,n=this.shapeArgs,a=this.angle<0||this.angle>Math.PI,i=n.start,s=n.end;return this.dataLabelPath||(this.dataLabelPath=t.arc({open:!0}).add(e)),this.dataLabelPath.attr({x:n.x,y:n.y,r:n.r+(this.dataLabel.options.distance||0),start:a?i:s,end:a?s:i,clockwise:+a}),this.dataLabelPath},isValid:function(){return!0}})}),t(e,"masters/modules/dependency-wheel.src.js",[],function(){})});