"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/data",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function r(e,t,r,n){e.hasOwnProperty(t)||(e[t]=n.apply(null,r))}r(t,"mixins/ajax.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(r,e){var i=e.merge,a=e.objectEach;r.ajax=function(e){var r=i(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e),t={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},n=new XMLHttpRequest;function s(e,t){r.error&&r.error(e,t)}if(!r.url)return!1;n.open(r.type.toUpperCase(),r.url,!0),r.headers["Content-Type"]||n.setRequestHeader("Content-Type",t[r.dataType]||t.text),a(r.headers,function(e,t){n.setRequestHeader(t,e)}),n.onreadystatechange=function(){var e;if(4===n.readyState){if(200===n.status){if(e=n.responseText,"json"===r.dataType)try{e=JSON.parse(e)}catch(e){return s(n,e)}return r.success&&r.success(e)}s(n,n.responseText)}};try{r.data=JSON.stringify(r.data)}catch(e){}n.send(r.data||!0)},r.getJSON=function(e,t){r.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})}}),r(t,"modules/data.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(x,e){function a(e,t,r){this.init(e,t,r)}var p,m=e.defined,t=e.extend,y=e.isNumber,g=e.objectEach,i=e.pick,C=e.splat,r=x.addEvent,n=x.Chart,s=x.win.document,f=x.merge,R=x.fireEvent;t(a.prototype,{init:function(e,t,r){var n,s=e.decimalPoint;t&&(this.chartOptions=t),r&&(this.chart=r),"."!==s&&","!==s&&(s=void 0),this.options=e,this.columns=e.columns||this.rowsToColumns(e.rows)||[],this.firstRowAsNames=i(e.firstRowAsNames,this.firstRowAsNames,!0),this.decimalRegex=s&&new RegExp("^(-?[0-9]+)"+s+"([0-9]+)$"),this.rawColumns=[],this.columns.length&&(this.dataFound(),n=!0),this.hasURLOption(e)&&(clearTimeout(this.liveDataTimeout),n=!1),!(n=(n=(n=(n=n||this.fetchLiveData())||Boolean(this.parseCSV().length))||Boolean(this.parseTable().length))||this.parseGoogleSpreadsheet())&&e.afterComplete&&e.afterComplete()},hasURLOption:function(e){return Boolean(e&&(e.rowsURL||e.csvURL||e.columnsURL))},getColumnDistribution:function(){function a(e){return(x.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length}function o(e){return x.seriesTypes[e||"line"].prototype.pointArrayMap}var l,u=this.chartOptions,e=this.options,t=[],h=u&&u.chart&&u.chart.type,d=[],c=[],f=0,r=e&&e.seriesMapping||u&&u.series&&u.series.map(function(){return{x:0}})||[];(u&&u.series||[]).forEach(function(e){d.push(a(e.type||h))}),r.forEach(function(e){t.push(e.x||0)}),0===t.length&&t.push(0),r.forEach(function(e){var r=new p,t=d[f]||a(h),n=(u&&u.series||[])[f]||{},s=o(n.type||h),i=s||["y"];for(!m(e.x)&&!n.isCartesian&&s||r.addColumnReader(e.x,"x"),g(e,function(e,t){"x"!==t&&r.addColumnReader(e,t)}),l=0;l<t;l++)r.hasReader(i[l])||r.addColumnReader(void 0,i[l]);c.push(r),f++});var n=o(h);void 0===n&&(n=["y"]),this.valueCount={global:a(h),xColumns:t,individual:d,seriesBuilders:c,globalPointArrayMap:n}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()},parseCSV:function(e){var m,p,t,l,u,r,d=this,c=e||this.options,n=c.csv,s=void 0!==c.startRow&&c.startRow?c.startRow:0,i=c.endRow||Number.MAX_VALUE,g=void 0!==c.startColumn&&c.startColumn?c.startColumn:0,v=c.endColumn||Number.MAX_VALUE,a=0,x=[],h={",":0,";":0,"\t":0};function o(t,e,r,n){var s=0,i="",a="",o="",l="",u=0,h=0;function d(e){i=t[e],a=t[e-1],o=t[e+1]}function c(e){x.length<h+1&&x.push([e]),x[h][x[h].length-1]!==e&&x[h].push(e)}function f(){if(u<g||v<u)return++u,void(l="");!isNaN(parseFloat(l))&&isFinite(l)?(l=parseFloat(l),c("number")):isNaN(Date.parse(l))?c("string"):(l=l.replace(/\//g,"-"),c("date")),m.length<h+1&&m.push([]),r||(m[h][e]=l),l="",++h,++u}if(t.trim().length&&"#"!==t.trim()[0]){for(;s<t.length;s++){if(d(s),"#"===i)return void f();if('"'===i)for(d(++s);s<t.length&&('"'!==i||'"'===a||'"'===o);)('"'!==i||'"'===i&&'"'!==a)&&(l+=i),d(++s);else n&&n[i]?n[i](i,l)&&f():i===p?f():l+=i}f()}}if(m=this.columns=[],n&&c.beforeParse&&(n=c.beforeParse.call(this,n)),n){t=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(c.lineDelimiter||"\n"),(!s||s<0)&&(s=0),(!i||i>=t.length)&&(i=t.length-1),p=c.itemDelimiter?c.itemDelimiter:(p=null,u=l=0,r=!1,t.some(function(e,t){var r,n,s,i=!1,a="";if(13<t)return!0;for(var o=0;o<e.length;o++){if(r=e[o],n=e[o+1],s=e[o-1],"#"===r)return;if('"'===r)if(i){if('"'!==s&&'"'!==n){for(;" "===n&&o<e.length;)n=e[++o];void 0!==h[n]&&h[n]++,i=!1}}else i=!0;else void 0!==h[r]?(a=a.trim(),isNaN(Date.parse(a))&&!isNaN(a)&&isFinite(a)||h[r]++,a=""):a+=r;","===r&&u++,"."===r&&l++}}),r=h[";"]>h[","]?";":(h[","],h[";"],","),c.decimalPoint||(c.decimalPoint=u<l?".":",",d.decimalRegex=new RegExp("^(-?[0-9]+)"+c.decimalPoint+"([0-9]+)$")),r);var f=0;for(a=s;a<=i;a++)"#"===t[a][0]?f++:o(t[a],a-s-f);c.columnTypes&&0!==c.columnTypes.length||!x.length||!x[0].length||"date"!==x[0][1]||c.dateFormat||(c.dateFormat=function(e,t){var r,n,s,i="YYYY/mm/dd",a=[],o=0,l=!1,u=[],h=[];for((!t||t>e.length)&&(t=e.length);o<t;o++)if(void 0!==e[o]&&e[o]&&e[o].length)for(r=e[o].trim().replace(/\//g," ").replace(/\-/g," ").replace(/\./g," ").split(" "),a=["","",""],s=0;s<r.length;s++)s<a.length&&(r[s]=parseInt(r[s],10),r[s]&&(h[s]=!h[s]||h[s]<r[s]?r[s]:h[s],void 0!==u[s]?u[s]!==r[s]&&(u[s]=!1):u[s]=r[s],31<r[s]?r[s]<100?a[s]="YY":a[s]="YYYY":12<r[s]&&r[s]<=31?(a[s]="dd",l=!0):a[s].length||(a[s]="mm")));if(l){for(s=0;s<u.length;s++)!1!==u[s]?12<h[s]&&"YY"!==a[s]&&"YYYY"!==a[s]&&(a[s]="YY"):12<h[s]&&"mm"===a[s]&&(a[s]="dd");return 3===a.length&&"dd"===a[1]&&"dd"===a[2]&&(a[2]="YY"),n=a.join("/"),(c.dateFormats||d.dateFormats)[n]?n:(R("deduceDateFailed"),i)}return i}(m[0])),this.dataFound()}return m},parseTable:function(){var e=this.options,t=e.table,i=this.columns,a=e.startRow||0,r=e.endRow||Number.MAX_VALUE,o=e.startColumn||0,l=e.endColumn||Number.MAX_VALUE;return t&&("string"==typeof t&&(t=s.getElementById(t)),[].forEach.call(t.getElementsByTagName("tr"),function(e,s){a<=s&&s<=r&&[].forEach.call(e.children,function(e,t){var r=i[t-o],n=1;if(("TD"===e.tagName||"TH"===e.tagName)&&o<=t&&t<=l)for(i[t-o]||(i[t-o]=[]),i[t-o][s-a]=e.innerHTML;n<=s-a&&void 0===r[s-a-n];)r[s-a-n]=null,n++})}),this.dataFound()),i},fetchLiveData:function(){var a=this,o=this.chart,l=this.options,u=3,h=0,d=l.enablePolling,c=1e3*(l.dataRefreshRate||2),t=f(l);if(!this.hasURLOption(l))return!1;return c<1e3&&(c=1e3),delete l.csvURL,delete l.rowsURL,delete l.columnsURL,function s(i){function e(e,t,r){if(e&&0===e.indexOf("http"))return i&&(clearTimeout(a.liveDataTimeout),o.liveDataURL=e),x.ajax({url:e,dataType:r||"json",success:function(e){o&&o.series&&t(e),n()},error:function(e,t){return++h<u&&n(),l.error&&l.error(t,e)}}),1;function n(){d&&o.liveDataURL===e&&(a.liveDataTimeout=setTimeout(s,c))}e&&l.error&&l.error("Invalid URL")}e(t.csvURL,function(e){o.update({data:{csv:e}})},"text")||e(t.rowsURL,function(e){o.update({data:{rows:e}})})||e(t.columnsURL,function(e){o.update({data:{columns:e}})})}(!0),this.hasURLOption(l)},parseGoogleSpreadsheet:function(){var c=this,n=this.options,s=n.googleSpreadsheetKey,f=this.chart,i=n.googleSpreadsheetWorksheet||1,m=n.startRow||0,p=n.endRow||Number.MAX_VALUE,g=n.startColumn||0,v=n.endColumn||Number.MAX_VALUE,e=1e3*(n.dataRefreshRate||2);return e<4e3&&(e=4e3),s&&(delete n.googleSpreadsheetKey,function t(r){var e=["https://spreadsheets.google.com/feeds/cells",s,i,"public/values?alt=json"].join("/");x.ajax({url:e,dataType:"json",success:function(e){r(e),n.enablePolling&&setTimeout(function(){t(r)},1e3*(n.dataRefreshRate||2))},error:function(e,t){return n.error&&n.error(t,e)}})}(function(e){var t,r,n,s,i,a,o=[],l=e.feed.entry,u=(l||[]).length,h=0,d=0;if(!l||0===l.length)return!1;for(a=0;a<u;a++)t=l[a],h=Math.max(h,t.gs$cell.col),d=Math.max(d,t.gs$cell.row);for(a=0;a<h;a++)g<=a&&a<=v&&(o[a-g]=[]);for(a=0;a<u;a++)n=(t=l[a]).gs$cell.row-1,s=t.gs$cell.col-1,g<=s&&s<=v&&m<=n&&n<=p&&(r=null,(i=t.gs$cell||t.content).numericValue?r=0<=i.$t.indexOf("/")||0<=i.$t.indexOf("-")?i.$t:0<i.$t.indexOf("%")?100*parseFloat(i.numericValue):parseFloat(i.numericValue):i.$t&&i.$t.length&&(r=i.$t),o[s-g][n-m]=r);o.forEach(function(e){for(a=0;a<e.length;a++)void 0===e[a]&&(e[a]=null)}),f&&f.series?f.update({data:{columns:o}}):(c.columns=o,c.dataFound())})),!1},trim:function(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/^[0-9\s]+$/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e},parseTypes:function(){for(var e=this.columns,t=e.length;t--;)this.parseColumn(e[t],t)},parseColumn:function(e,t){var r,n,s,i,a,o,l,u=this.rawColumns,h=this.columns,d=e.length,c=this.firstRowAsNames,f=-1!==this.valueCount.xColumns.indexOf(t),m=[],p=this.chartOptions,g=(this.options.columnTypes||[])[t],v=f&&(p&&p.xAxis&&"category"===C(p.xAxis)[0].type||"string"===g);for(u[t]||(u[t]=[]);d--;)r=m[d]||e[d],s=this.trim(r),i=this.trim(r,!0),n=parseFloat(i),void 0===u[t][d]&&(u[t][d]=s),v||0===d&&c?e[d]=""+s:+i===n?(31536e6<(e[d]=n)&&"float"!==g?e.isDatetime=!0:e.isNumeric=!0,void 0!==e[d+1]&&(l=n>e[d+1])):(s&&s.length&&(a=this.parseDate(r)),f&&y(a)&&"float"!==g?(m[d]=r,e[d]=a,e.isDatetime=!0,void 0!==e[d+1]&&((o=a>e[d+1])!==l&&void 0!==l&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,d=e.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):e.unsorted=!0),l=o)):(e[d]=""===s?null:s,0!==d&&(e.isDatetime||e.isNumeric)&&(e.mixed=!0)));if(f&&e.mixed&&(h[t]=u[t]),f&&l&&this.options.sort)for(t=0;t<h.length;t++)h[t].reverse(),c&&h[t].unshift(h[t].pop())},dateFormats:{"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(e){return Date.UTC(+e[1],e[2]-1,+e[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return Date.UTC(+e[3],e[2]-1,+e[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return Date.UTC(+e[3],e[1]-1,+e[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){var t=+e[3];return t>(new Date).getFullYear()-2e3?t+=1900:t+=2e3,Date.UTC(t,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){return Date.UTC(+e[3]+2e3,e[1]-1,+e[2])}}},parseDate:function(e){var t,r,n,s,i=this.options.parseDate,a=this.options.dateFormat||this.dateFormat;if(i)t=i(e);else if("string"==typeof e){if(a)n=(n=this.dateFormats[a])||this.dateFormats["YYYY/mm/dd"],(s=e.match(n.regex))&&(t=n.parser(s));else for(r in this.dateFormats)if(n=this.dateFormats[r],s=e.match(n.regex)){this.dateFormat=a=r,this.alternativeFormat=n.alternative,t=n.parser(s);break}s||("object"==typeof(s=Date.parse(e))&&null!==s&&s.getTime?t=s.getTime()-6e4*s.getTimezoneOffset():y(s)&&(t=s-6e4*new Date(s).getTimezoneOffset()))}return t},rowsToColumns:function(e){var t,r,n,s,i;if(e)for(i=[],r=e.length,t=0;t<r;t++)for(s=e[t].length,n=0;n<s;n++)i[n]||(i[n]=[]),i[n][t]=e[t][n];return i},getData:function(){if(this.columns)return this.rowsToColumns(this.columns).slice(1)},parsed:function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},getFreeIndexes:function(e,t){var r,n,s,i=[],a=[];for(n=0;n<e;n+=1)i.push(!0);for(r=0;r<t.length;r+=1)for(s=t[r].getReferencedColumnIndexes(),n=0;n<s.length;n+=1)i[s[n]]=!1;for(n=0;n<i.length;n+=1)i[n]&&a.push(n);return a},complete:function(){var e,t,r,n,s,i,a,o,l,u,h,d,c=this.columns,f=this.options,m=[];if(c.length,f.complete||f.afterComplete){if(this.firstRowAsNames)for(n=0;n<c.length;n++)c[n].name=c[n].shift();for(t=[],u=this.getFreeIndexes(c.length,this.valueCount.seriesBuilders),a=0;a<this.valueCount.seriesBuilders.length;a++)(l=this.valueCount.seriesBuilders[a]).populateColumns(u)&&m.push(l);for(;0<u.length;){for((l=new p).addColumnReader(0,"x"),-1!==(d=u.indexOf(0))&&u.splice(d,1),n=0;n<this.valueCount.global;n++)l.addColumnReader(void 0,this.valueCount.globalPointArrayMap[n]);l.populateColumns(u)&&m.push(l)}if(0<m.length&&0<m[0].readers.length&&void 0!==(h=c[m[0].readers[0].columnIndex])&&(h.isDatetime?e="datetime":h.isNumeric||(e="category")),"category"===e)for(a=0;a<m.length;a++)for(l=m[a],i=0;i<l.readers.length;i++)"x"===l.readers[i].configName&&(l.readers[i].configName="name");for(a=0;a<m.length;a++){for(l=m[a],r=[],s=0;s<c[0].length;s++)r[s]=l.read(c,s);t[a]={data:r},l.name&&(t[a].name=l.name),"category"===e&&(t[a].turboThreshold=0)}o={series:t},e&&(o.xAxis={type:e},"category"===e&&(o.xAxis.uniqueNames=!1)),f.complete&&f.complete(o),f.afterComplete&&f.afterComplete(o)}},update:function(e,t){var r=this.chart;e&&(e.afterComplete=function(e){e&&(e.xAxis&&r.xAxis[0]&&e.xAxis.type===r.xAxis[0].options.type&&delete e.xAxis,r.update(e,t,!0))},f(!0,r.options.data,e),this.init(r.options.data))}}),x.Data=a,x.data=function(e,t,r){return new a(e,t,r)},r(n,"init",function(e){var n=this,s=e.args[0]||{},i=e.args[1];s&&s.data&&!n.hasDataDef&&(n.hasDataDef=!0,n.data=new a(t(s.data,{afterComplete:function(e){var t,r;if(Object.hasOwnProperty.call(s,"series"))if("object"==typeof s.series)for(t=Math.max(s.series.length,e&&e.series?e.series.length:0);t--;)r=s.series[t]||{},s.series[t]=f(r,e&&e.series?e.series[t]:{});else delete s.series;s=f(e,s),n.init(s,i)}}),s,n),e.preventDefault())}),(p=function(){this.readers=[],this.pointIsArray=!0}).prototype.populateColumns=function(t){var r=!0;return this.readers.forEach(function(e){void 0===e.columnIndex&&(e.columnIndex=t.shift())}),this.readers.forEach(function(e){void 0===e.columnIndex&&(r=!1)}),r},p.prototype.read=function(r,n){var e,s=this.pointIsArray,i=s?[]:{};return this.readers.forEach(function(e){var t=r[e.columnIndex][n];s?i.push(t):0<e.configName.indexOf(".")?x.Point.prototype.setNestedProperty(i,t,e.configName):i[e.configName]=t}),void 0===this.name&&2<=this.readers.length&&2<=(e=this.getReferencedColumnIndexes()).length&&(e.shift(),e.sort(function(e,t){return e-t}),this.name=r[e.shift()].name),i},p.prototype.addColumnReader=function(e,t){this.readers.push({columnIndex:e,configName:t}),"x"!==t&&"y"!==t&&void 0!==t&&(this.pointIsArray=!1)},p.prototype.getReferencedColumnIndexes=function(){var e,t,r=[];for(e=0;e<this.readers.length;e+=1)void 0!==(t=this.readers[e]).columnIndex&&r.push(t.columnIndex);return r},p.prototype.hasReader=function(e){var t;for(t=0;t<this.readers.length;t+=1)if(this.readers[t].configName===e)return!0}}),r(t,"masters/modules/data.src.js",[],function(){})});