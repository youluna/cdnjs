"use strict";import H from"./Globals.js";import U from"./Utilities.js";var extend=U.extend,objectEach=U.objectEach,wrap=U.wrap;import"./Pointer.js";var addEvent=H.addEvent,charts=H.charts,css=H.css,doc=H.doc,hasTouch=H.hasTouch,noop=H.noop,Pointer=H.Pointer,removeEvent=H.removeEvent,win=H.win;if(!hasTouch&&(win.PointerEvent||win.MSPointerEvent)){var touches={},hasPointerEvent=!!win.PointerEvent,getWebkitTouches=function(){var t=[];return t.item=function(t){return this[t]},objectEach(touches,function(e){t.push({pageX:e.pageX,pageY:e.pageY,target:e.target})}),t},translateMSPointer=function(t,e,n,o){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!charts[H.hoverChartIndex]||(o(t),charts[H.hoverChartIndex].pointer[e]({type:n,target:t.currentTarget,preventDefault:noop,touches:getWebkitTouches()}))};extend(Pointer.prototype,{onContainerPointerDown:function(t){translateMSPointer(t,"onContainerTouchStart","touchstart",function(t){touches[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){translateMSPointer(t,"onContainerTouchMove","touchmove",function(t){touches[t.pointerId]={pageX:t.pageX,pageY:t.pageY},touches[t.pointerId].target||(touches[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){translateMSPointer(t,"onDocumentTouchEnd","touchend",function(t){delete touches[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,hasPointerEvent?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,hasPointerEvent?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(doc,hasPointerEvent?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),wrap(Pointer.prototype,"init",function(t,e,n){t.call(this,e,n),this.hasZoom&&css(e.container,{"-ms-touch-action":"none","touch-action":"none"})}),wrap(Pointer.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(addEvent)}),wrap(Pointer.prototype,"destroy",function(t){this.batchMSEvents(removeEvent),t.call(this)})}