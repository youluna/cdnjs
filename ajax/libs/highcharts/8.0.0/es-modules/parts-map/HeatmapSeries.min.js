"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var clamp=U.clamp,extend=U.extend,pick=U.pick;import"../parts/Options.js";import"../parts/Point.js";import"../parts/Series.js";import"../parts/Legend.js";import"./ColorMapSeriesMixin.js";var colorMapPointMixin=H.colorMapPointMixin,colorMapSeriesMixin=H.colorMapSeriesMixin,LegendSymbolMixin=H.LegendSymbolMixin,merge=H.merge,noop=H.noop,fireEvent=H.fireEvent,Series=H.Series,seriesType=H.seriesType,seriesTypes=H.seriesTypes;seriesType("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},merge(colorMapSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;seriesTypes.scatter.prototype.init.apply(this,arguments),(t=this.options).pointRange=pick(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this.options,e=this.xAxis,i=this.yAxis,a=t.pointPadding||0,n=this.pointPlacementToXValue();this.generatePoints(),this.points.forEach(function(s){var o=(t.colsize||1)/2,r=(t.rowsize||1)/2,p=clamp(Math.round(e.len-e.translate(s.x-o,0,1,0,1,-n)),-e.len,2*e.len),l=clamp(Math.round(e.len-e.translate(s.x+o,0,1,0,1,-n)),-e.len,2*e.len),h=clamp(Math.round(i.translate(s.y-r,0,1,0,1)),-i.len,2*i.len),c=clamp(Math.round(i.translate(s.y+r,0,1,0,1)),-i.len,2*i.len),m=pick(s.pointPadding,a);s.plotX=s.clientX=(p+l)/2,s.plotY=(h+c)/2,s.shapeType="rect",s.shapeArgs={x:Math.min(p,l)+m,y:Math.min(h,c)+m,width:Math.max(Math.abs(l-p)-2*m,0),height:Math.max(Math.abs(c-h)-2*m,0)}}),fireEvent(this,"afterTranslate")},drawPoints:function(){var t=this.chart.styledMode?"css":"animate";seriesTypes.column.prototype.drawPoints.call(this),this.points.forEach(function(e){e.graphic[t](this.colorAttribs(e))},this)},hasData:function(){return!!this.processedXData.length},getValidPoints:function(t,e){return Series.prototype.getValidPoints.call(this,t,e,!0)},animate:noop,getBox:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,alignDataLabel:seriesTypes.column.prototype.alignDataLabel,getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,Series.prototype.getExtremes.call(this)}}),extend({haloPath:function(t){if(!t)return[];var e=this.shapeArgs;return["M",e.x-t,e.y-t,"L",e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,"Z"]}},colorMapPointMixin));