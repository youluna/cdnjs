"use strict";import H from"../parts/Globals.js";var pick=H.pick,seriesType=H.seriesType,seriesTypes=H.seriesTypes,seriesProto=H.Series.prototype,areaRangeProto=seriesTypes.arearange.prototype,columnRangeProto=seriesTypes.columnrange.prototype,colProto=seriesTypes.column.prototype,areaRangePointProto=areaRangeProto.pointClass.prototype;seriesType("dumbbell","arearange",{trackByArea:!1,fillColor:"none",lineWidth:0,pointRange:1,connectorWidth:1,stickyTracking:!1,groupPadding:.2,pointPadding:.1,lowColor:"#333333",states:{hover:{lineWidthPlus:0,connectorWidthPlus:1,halo:!1}}},{trackerGroups:["group","markerGroup","dataLabelsGroup"],drawTracker:H.TrackerMixin.drawTrackerPoint,drawGraph:H.noop,crispConnector:function(o,t){return o[1]===o[4]&&(o[1]=o[4]=Math.floor(o[1])+t%2/2),o[2]===o[5]&&(o[2]=o[5]=Math.floor(o[2])+t%2/2),o},crispCol:colProto.crispCol,getConnectorAttribs:function(o){var t,r,e=this.chart,i=o.options,s=this.options,n=this.xAxis,a=this.yAxis,l=pick(i.connectorWidth,s.connectorWidth),p=pick(i.connectorColor,s.connectorColor,i.color,o.zone?o.zone.color:void 0,o.color),c=pick(s.states&&s.states.hover&&s.states.hover.connectorWidthPlus,1),h=pick(i.dashStyle,s.dashStyle),d=pick(o.plotLow,o.plotY),u=a.toPixels(s.threshold||0,!0),y=e.inverted?a.len-u:u,g=pick(o.plotHigh,y);return o.state&&(l+=c),d<0?d=0:d>=a.len&&(d=a.len),g<0?g=0:g>=a.len&&(g=a.len),(o.plotX<0||o.plotX>n.len)&&(l=0),o.upperGraphic&&(r={y:o.y,zone:o.zone},o.y=o.high,o.zone=o.zone?o.getZone():void 0,p=pick(i.connectorColor,s.connectorColor,i.color,o.zone?o.zone.color:void 0,o.color),H.extend(o,r)),t={d:this.crispConnector(["M",o.plotX,d,"L",o.plotX,g],l)},e.styledMode||(t.stroke=p,t["stroke-width"]=l,h&&(t.dashstyle=h)),t},drawConnector:function(o){var t=pick(this.options.animationLimit,250),r=o.connector&&this.chart.pointCount<t?"animate":"attr";o.connector||(o.connector=this.chart.renderer.path().addClass("highcharts-lollipop-stem").attr({zIndex:-1}).add(this.markerGroup)),o.connector[r](this.getConnectorAttribs(o))},getColumnMetrics:function(){var o=colProto.getColumnMetrics.apply(this,arguments);return o.offset=o.offset+o.width/2,o},translatePoint:areaRangeProto.translate,setShapeArgs:columnRangeProto.translate,translate:function(){this.setShapeArgs.apply(this),this.translatePoint.apply(this,arguments),this.points.forEach(function(o){var t=o.shapeArgs,r=o.pointWidth;o.plotX=t.x,t.x=o.plotX-r/2,o.tooltipPos=null})},seriesDrawPoints:areaRangeProto.drawPoints,drawPoints:function(){var o,t,r,e=this.chart,i=this.points.length,s=this.lowColor=this.options.lowColor,n=0;for(this.seriesDrawPoints.apply(this,arguments);n<i;)t=this.points[n],this.drawConnector(t),t.upperGraphic&&(t.upperGraphic.element.point=t,t.upperGraphic.addClass("highcharts-lollipop-high")),t.connector.element.point=t,t.lowerGraphic&&(r=t.zone&&t.zone.color,o=pick(t.options.lowColor,s,t.options.color,r,t.color,this.color),e.styledMode||t.lowerGraphic.attr({fill:o}),t.lowerGraphic.addClass("highcharts-lollipop-low")),n++},markerAttribs:function(){var o=areaRangeProto.markerAttribs.apply(this,arguments);return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o},pointAttribs:function(o,t){var r;return r=seriesProto.pointAttribs.apply(this,arguments),"hover"===t&&delete r.fill,r}},{destroyElements:areaRangePointProto.destroyElements,isValid:areaRangePointProto.isValid,pointSetState:areaRangePointProto.setState,setState:function(){var o,t,r=this.series,e=r.chart,i=r.options.lowColor,s=this.options,n=s.lowColor,a=this.zone&&this.zone.color,l=pick(n,i,s.color,a,this.color,r.color),p="attr";this.pointSetState.apply(this,arguments),this.state||(p="animate",this.lowerGraphic&&!e.styledMode&&(this.lowerGraphic.attr({fill:l}),this.upperGraphic&&(t={y:this.y,zone:this.zone},this.y=this.high,this.zone=this.zone?this.getZone():void 0,o=pick(this.marker?this.marker.fillColor:void 0,s.color,this.zone?this.zone.color:void 0,this.color),this.upperGraphic.attr({fill:o}),H.extend(this,t)))),this.connector[p](r.getConnectorAttribs(this))}});