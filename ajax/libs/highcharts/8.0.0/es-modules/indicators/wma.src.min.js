"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var isArray=U.isArray,seriesType=H.seriesType;function accumulateAverage(e,r,a,t,u){var s=r[t],i=u<0?a[t]:a[t][u];e.push([s,i])}function weightedSumArray(e,r){var a=(r+1)/2*r;return e.reduce(function(e,r,a){return[null,e[1]+r[1]*(a+1)]})[1]/a}function populateAverage(e,r,a,t){var u=weightedSumArray(e,e.length),s=r[t-1];return e.shift(),[s,u]}seriesType("wma","sma",{params:{index:3,period:9}},{getValues:function(e,r){var a,t,u,s=r.period,i=e.xData,p=e.yData,n=p?p.length:0,o=1,l=i[0],c=p[0],h=[],g=[],m=[],v=-1;if(!(i.length<s)){for(isArray(p[0])&&(v=r.index,c=p[0][v]),t=[[l,c]];o!==s;)accumulateAverage(t,i,p,o,v),o++;for(a=o;a<n;a++)u=populateAverage(t,i,p,a),h.push(u),g.push(u[0]),m.push(u[1]),accumulateAverage(t,i,p,a,v);return u=populateAverage(t,i,p,a),h.push(u),g.push(u[0]),m.push(u[1]),{values:h,xData:g,yData:m}}}});