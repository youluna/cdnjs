"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/drag-panes",["highcharts","highcharts/modules/stock"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function o(e,t,o,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,o))}o(t,"modules/drag-panes.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(s,e){var c=e.clamp,M=e.isNumber,t=e.objectEach,b=e.relativeLength,o=e.wrap,a=s.hasTouch,i=s.merge,h=s.addEvent,n=s.Axis,r=s.Pointer;i(!0,n.prototype.defaultYAxisOptions,{minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}}),s.AxisResizer=function(e){this.init(e)},s.AxisResizer.prototype={init:function(e,t){this.axis=e,this.options=e.options.resize,this.render(),t||this.addMouseEvents()},render:function(){var e,t=this,o=t.axis,i=o.chart,s=t.options,n=s.x,r=s.y,a=c(o.top+o.height+r,i.plotTop,i.plotTop+i.plotHeight),h={};i.styledMode||(h={cursor:s.cursor,stroke:s.lineColor,"stroke-width":s.lineWidth,dashstyle:s.lineDashStyle}),t.lastPos=a-r,t.controlLine||(t.controlLine=i.renderer.path().addClass("highcharts-axis-resizer")),t.controlLine.add(o.axisGroup),e=i.styledMode?t.controlLine.strokeWidth():s.lineWidth,h.d=i.renderer.crispLine(["M",o.left+n,a,"L",o.left+o.width+n,a],e),t.controlLine.attr(h)},addMouseEvents:function(){var e,t,o,i=this,s=i.controlLine.element,n=i.axis.chart.container,r=[];i.mouseMoveHandler=e=function(e){i.onMouseMove(e)},i.mouseUpHandler=t=function(e){i.onMouseUp(e)},i.mouseDownHandler=o=function(e){i.onMouseDown(e)},r.push(h(n,"mousemove",e),h(n.ownerDocument,"mouseup",t),h(s,"mousedown",o)),a&&r.push(h(n,"touchmove",e),h(n.ownerDocument,"touchend",t),h(s,"touchstart",o)),i.eventsToUnbind=r},onMouseMove:function(e){e.touches&&0===e.touches[0].pageX||this.grabbed&&(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(e).chartY-this.options.y))},onMouseUp:function(e){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(e).chartY-this.options.y),this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},onMouseDown:function(e){this.axis.chart.pointer.reset(!1,0),this.grabbed=this.axis.chart.activeResizer=!0},updateAxes:function(u){function d(e){return 100*e/v+"%"}function p(e,t,o){return Math.round(c(e,t,o))}var l,f=this,x=f.axis.chart,e=f.options.controlledAxis,t=0===e.next.length?[x.yAxis.indexOf(f.axis)+1]:e.next,o=[f.axis].concat(e.prev),g=[],y=!1,m=x.plotTop,v=x.plotHeight,z=m+v;u=c(u,m,z),(l=u-f.lastPos)*l<1||([o,t].forEach(function(e,c){e.forEach(function(e,t){var o,i,s,n,r=M(e)?x.yAxis[e]:c||t?x.get(e):e,a=r&&r.options,h=0;a&&"navigator-y-axis"!==a.id&&(i=r.top,s=Math.round(b(a.minLength,v)),n=Math.round(b(a.maxLength,v)),c?(l=u-f.lastPos,o=p(r.len-l,s,n),i=r.top+l,z<i+o&&(u+=h=z-o-i,i+=h),i<m&&z<(i=m)+o&&(o=v),o===s&&(y=!0),g.push({axis:r,options:{top:d(i-m),height:d(o)}})):((o=p(u-i,s,n))===n&&(y=!0),u=i+o,g.push({axis:r,options:{height:d(o)}})))})}),y||(g.forEach(function(e){e.axis.update(e.options,!1)}),x.redraw(!1)))},destroy:function(){var o=this;delete o.axis.resizer,this.eventsToUnbind&&this.eventsToUnbind.forEach(function(e){e()}),o.controlLine.destroy(),t(o,function(e,t){o[t]=null})}},n.prototype.keepProps.push("resizer"),h(n,"afterRender",function(){var e,t=this,o=t.resizer,i=t.options.resize;i&&(e=!1!==i.enabled,o?e?o.init(t,!0):o.destroy():e&&(t.resizer=new s.AxisResizer(t)))}),h(n,"destroy",function(e){!e.keepEvents&&this.resizer&&this.resizer.destroy()}),o(r.prototype,"runPointActions",function(e){this.chart.activeResizer||e.apply(this,Array.prototype.slice.call(arguments,1))}),o(r.prototype,"drag",function(e){this.chart.activeResizer||e.apply(this,Array.prototype.slice.call(arguments,1))})}),o(t,"masters/modules/drag-panes.src.js",[],function(){})});