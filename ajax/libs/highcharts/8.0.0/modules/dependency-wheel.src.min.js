"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function n(t,e,n,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,n))}n(e,"modules/dependency-wheel.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var n=e.animObject,a=t.seriesTypes.sankey.prototype;t.seriesType("dependencywheel","sankey",{center:[null,null],curveFactor:.6,startAngle:0},{orderNodes:!1,getCenter:t.seriesTypes.pie.prototype.getCenter,createNodeColumns:function(){var e=[this.createNodeColumn()];return this.nodes.forEach(function(t){t.column=0,e[0].push(t)}),e},getNodePadding:function(){return this.options.nodePadding/Math.PI},createNode:function(t){var r=a.createNode.call(this,t);return r.index=this.nodes.length-1,r.getSum=function(){return r.linksFrom.concat(r.linksTo).reduce(function(t,e){return t+e.weight},0)},r.offset=function(t){var e,n,a=0,i=r.linksFrom.concat(r.linksTo);function s(t){return t.fromNode===r?t.toNode:t.fromNode}for(i.sort(function(t,e){return s(t).index-s(e).index}),e=0;e<i.length;e++)if(s(i[e]).index>r.index){i=i.slice(0,e).reverse().concat(i.slice(e).reverse()),n=!0;break}for(n||i.reverse(),e=0;e<i.length;e++){if(i[e]===t)return a;a+=i[e].weight}},r},translate:function(){var u=this.options,l=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),s=this.getCenter(),p=(u.startAngle-90)*t.deg2rad;a.translate.call(this),this.nodeColumns[0].forEach(function(t){var e=t.shapeArgs,c=s[0],h=s[1],n=s[2]/2,d=n-u.nodeWidth,a=p+l*e.y,i=p+l*(e.y+e.height);t.angle=a+(i-a)/2,t.shapeType="arc",t.shapeArgs={x:c,y:h,r:n,innerR:d,start:a,end:i},t.dlBox={x:c+Math.cos((a+i)/2)*(n+d)/2,y:h+Math.sin((a+i)/2)*(n+d)/2,width:1,height:1},t.linksFrom.forEach(function(r){var o,t=r.linkBase.map(function(t,e){var n=l*t,a=Math.cos(p+n)*(1+d),i=Math.sin(p+n)*(1+d),s=u.curveFactor;return(o=Math.abs(r.linkBase[3-e]*l-n))>Math.PI&&(o=2*Math.PI-o),(o*=d)<d&&(s*=o/d),{x:c+a,y:h+i,cpX:c+(1-s)*a,cpY:h+(1-s)*i}});r.shapeArgs={d:["M",t[0].x,t[0].y,"A",d,d,0,0,1,t[1].x,t[1].y,"C",t[1].cpX,t[1].cpY,t[2].cpX,t[2].cpY,t[2].x,t[2].y,"A",d,d,0,0,1,t[3].x,t[3].y,"C",t[3].cpX,t[3].cpY,t[0].cpX,t[0].cpY,t[0].x,t[0].y]}})})},animate:function(t){if(!t){var a=n(this.options.animation).duration/2/this.nodes.length;this.nodes.forEach(function(t,e){var n=t.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){n.animate({opacity:1},{duration:a})},a*e))},this),this.points.forEach(function(t){var e=t.graphic;!t.isNode&&e&&e.attr({opacity:0}).animate({opacity:1},this.options.animation)},this),this.animate=null}}},{setState:t.NodesMixin.setNodeState,getDataLabelPath:function(t){var e=this.series.chart.renderer,n=this.shapeArgs,a=this.angle<0||this.angle>Math.PI,i=n.start,s=n.end;return this.dataLabelPath||(this.dataLabelPath=e.arc({open:!0}).add(t)),this.dataLabelPath.attr({x:n.x,y:n.y,r:n.r+(this.dataLabel.options.distance||0),start:a?i:s,end:a?s:i,clockwise:+a}),this.dataLabelPath},isValid:function(){return!0}})}),n(e,"masters/modules/dependency-wheel.src.js",[],function(){})});