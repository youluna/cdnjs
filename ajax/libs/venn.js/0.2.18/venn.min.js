!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-transition"],r):r(t.venn={},t.d3,t.d3)}(this,function(t,r,n){"use strict";function e(t,r){var n,e=function(t){for(var r=[],n=0;n<t.length;++n)for(var e=n+1;e<t.length;++e)for(var a=u(t[n],t[e]),i=0;i<a.length;++i){var s=a[i];s.parentIndex=[n,e],r.push(s)}return r}(t),s=e.filter(function(r){return function(t,r){for(var n=0;n<r.length;++n)if(i(t,r[n])>r[n].radius+E)return!1;return!0}(r,t)}),f=0,l=0,h=[];if(s.length>1){var x=o(s);for(n=0;n<s.length;++n){var c=s[n];c.angle=Math.atan2(c.x-x.x,c.y-x.y)}s.sort(function(t,r){return r.angle-t.angle});var g=s[s.length-1];for(n=0;n<s.length;++n){var p=s[n];l+=(g.x+p.x)*(p.y-g.y);for(var v={x:(p.x+g.x)/2,y:(p.y+g.y)/2},y=null,d=0;d<p.parentIndex.length;++d)if(g.parentIndex.indexOf(p.parentIndex[d])>-1){var m=t[p.parentIndex[d]],M=Math.atan2(p.x-m.x,p.y-m.y),z=Math.atan2(g.x-m.x,g.y-m.y),b=z-M;b<0&&(b+=2*Math.PI);var w=z-b/2,I=i(v,{x:m.x+m.radius*Math.sin(w),y:m.y+m.radius*Math.cos(w)});(null===y||y.width>I)&&(y={circle:m,width:I,p1:p,p2:g})}null!==y&&(h.push(y),f+=a(y.circle.radius,y.width),g=p)}}else{var R=t[0];for(n=1;n<t.length;++n)t[n].radius<R.radius&&(R=t[n]);var P=!1;for(n=0;n<t.length;++n)if(i(t[n],R)>Math.abs(R.radius-t[n].radius)){P=!0;break}P?f=l=0:(f=R.radius*R.radius*Math.PI,h.push({circle:R,p1:{x:R.x,y:R.y+R.radius},p2:{x:R.x-E,y:R.y+R.radius},width:2*R.radius}))}return l/=2,r&&(r.area=f+l,r.arcArea=f,r.polygonArea=l,r.arcs=h,r.innerPoints=s,r.intersectionPoints=e),f+l}function a(t,r){return t*t*Math.acos(1-r/t)-(t-r)*Math.sqrt(r*(2*t-r))}function i(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function s(t,r,n){if(n>=t+r)return 0;if(n<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);var e=r-(n*n-t*t+r*r)/(2*n);return a(t,t-(n*n-r*r+t*t)/(2*n))+a(r,e)}function u(t,r){var n=i(t,r),e=t.radius,a=r.radius;if(n>=e+a||n<=Math.abs(e-a))return[];var s=(e*e-a*a+n*n)/(2*n),u=Math.sqrt(e*e-s*s),o=t.x+s*(r.x-t.x)/n,f=t.y+s*(r.y-t.y)/n,l=-(r.y-t.y)*(u/n),h=-(r.x-t.x)*(u/n);return[{x:o+l,y:f-h},{x:o-l,y:f+h}]}function o(t){for(var r={x:0,y:0},n=0;n<t.length;++n)r.x+=t[n].x,r.y+=t[n].y;return r.x/=t.length,r.y/=t.length,r}function f(t){for(var r=new Array(t),n=0;n<t;++n)r[n]=0;return r}function l(t,r){return f(t).map(function(){return f(r)})}function h(t,r){for(var n=0,e=0;e<t.length;++e)n+=t[e]*r[e];return n}function x(t){return Math.sqrt(h(t,t))}function c(t,r,n){for(var e=0;e<r.length;++e)t[e]=r[e]*n}function g(t,r,n,e,a){for(var i=0;i<t.length;++i)t[i]=r*n[i]+e*a[i]}function p(t,r,n){function e(t){for(var r=0;r<t.length;r++)v[p][r]=t[r];v[p].fx=t.fx}var a,i=(n=n||{}).maxIterations||200*r.length,s=n.nonZeroDelta||1.05,u=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,f=n.minErrorDelta||1e-5,l=void 0!==n.rho?n.rho:1,h=void 0!==n.chi?n.chi:2,x=void 0!==n.psi?n.psi:-.5,c=void 0!==n.sigma?n.sigma:.5,p=r.length,v=new Array(p+1);v[0]=r,v[0].fx=t(r),v[0].id=0;for(var y=0;y<p;++y){var d=r.slice();d[y]=d[y]?d[y]*s:u,v[y+1]=d,v[y+1].fx=t(d),v[y+1].id=y+1}for(var m=function(t,r){return t.fx-r.fx},M=r.slice(),z=r.slice(),b=r.slice(),w=r.slice(),I=0;I<i;++I){if(v.sort(m),n.history){var R=v.map(function(t){var r=t.slice();return r.fx=t.fx,r.id=t.id,r});R.sort(function(t,r){return t.id-r.id}),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:R})}for(a=0,y=0;y<p;++y)a=Math.max(a,Math.abs(v[0][y]-v[1][y]));if(Math.abs(v[0].fx-v[p].fx)<o&&a<f)break;for(y=0;y<p;++y){M[y]=0;for(var P=0;P<p;++P)M[y]+=v[P][y];M[y]/=p}var A=v[p];if(g(z,1+l,M,-l,A),z.fx=t(z),z.fx<v[0].fx)g(w,1+h,M,-h,A),w.fx=t(w),e(w.fx<z.fx?w:z);else if(z.fx>=v[p-1].fx){var O=!1;if(z.fx>A.fx?(g(b,1+x,M,-x,A),b.fx=t(b),b.fx<A.fx?e(b):O=!0):(g(b,1-x*l,M,x*l,A),b.fx=t(b),b.fx<z.fx?e(b):O=!0),O){if(c>=1)break;for(y=1;y<v.length;++y)g(v[y],1-c,v[0],c,v[y]),v[y].fx=t(v[y])}}else e(z)}return v.sort(m),{fx:v[0].fx,x:v[0]}}function v(t,r,n,e,a,i,s){function u(u,x,p){for(var v=0;v<16;++v)if(a=(u+x)/2,g(e.x,1,n.x,a,r),l=e.fx=t(e.x,e.fxprime),c=h(e.fxprime,r),l>o+i*a*f||l>=p)x=a;else{if(Math.abs(c)<=-s*f)return a;c*(x-u)>=0&&(x=u),u=a,p=l}return 0}var o=n.fx,f=h(n.fxprime,r),l=o,x=o,c=f,p=0;a=a||1,i=i||1e-6,s=s||.1;for(var v=0;v<10;++v){if(g(e.x,1,n.x,a,r),l=e.fx=t(e.x,e.fxprime),c=h(e.fxprime,r),l>o+i*a*f||v&&l>=x)return u(p,a,x);if(Math.abs(c)<=-s*f)return a;if(c>=0)return u(a,p,l);x=l,p=a,a*=2}return a}function y(t,r,n){var e,a,i,s={x:r.slice(),fx:0,fxprime:r.slice()},u={x:r.slice(),fx:0,fxprime:r.slice()},o=r.slice(),f=1;i=(n=n||{}).maxIterations||20*r.length,s.fx=t(s.x,s.fxprime),c(e=s.fxprime.slice(),s.fxprime,-1);for(var l=0;l<i;++l){if(f=v(t,e,s,u,f),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),alpha:f}),f){g(o,1,u.fxprime,-1,s.fxprime);var p=h(s.fxprime,s.fxprime);g(e,Math.max(0,h(o,u.fxprime)/p),e,-1,u.fxprime),a=s,s=u,u=a}else c(e,s.fxprime,-1);if(x(s.fxprime)<=1e-5)break}return n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),alpha:f}),s}function d(t,r){(r=r||{}).maxIterations=r.maxIterations||500;var n,e=(r.initialLayout||M)(t=function(t){t=t.slice();var r,n,e,a,i=[],s={};for(r=0;r<t.length;++r){var u=t[r];1==u.sets.length?i.push(u.sets[0]):2==u.sets.length&&(e=u.sets[0],a=u.sets[1],s[[e,a]]=!0,s[[a,e]]=!0)}for(i.sort(function(t,r){return t>r}),r=0;r<i.length;++r)for(e=i[r],n=r+1;n<i.length;++n)a=i[n],[e,a]in s||t.push({sets:[e,a],size:0});return t}(t)),a=[],i=[];for(n in e)e.hasOwnProperty(n)&&(a.push(e[n].x),a.push(e[n].y),i.push(n));for(var s=p(function(r){for(var n={},a=0;a<i.length;++a){var s=i[a];n[s]={x:r[2*a],y:r[2*a+1],radius:e[s].radius}}return b(n,t)},a,r).x,u=0;u<i.length;++u)n=i[u],e[n].x=s[2*u],e[n].y=s[2*u+1];return e}function m(t,r,n){return Math.min(t,r)*Math.min(t,r)*Math.PI<=n+L?Math.abs(t-r):function(t,r,n,e){var a=(e=e||{}).maxIterations||100,i=e.tolerance||1e-10,s=t(r),u=t(n),o=n-r;if(s*u>0)throw"Initial bisect points must have opposite signs";if(0===s)return r;if(0===u)return n;for(var f=0;f<a;++f){var l=r+(o/=2),h=t(l);if(h*s>=0&&(r=l),Math.abs(o)<i||0===h)return l}return r+o}(function(e){return s(t,r,e)-n},0,t+r)}function M(t,r){var n=z(t);if(t.length>=8){var e=function(t,r){var n,e=(r=r||{}).restarts||10,a=[],i={};for(n=0;n<t.length;++n){var s=t[n];1==s.sets.length&&(i[s.sets[0]]=a.length,a.push(s))}var u=function(t,r,n){var e=l(r.length,r.length),a=l(r.length,r.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var i=n[t.sets[0]],s=n[t.sets[1]],u=m(Math.sqrt(r[i].size/Math.PI),Math.sqrt(r[s].size/Math.PI),t.size);e[i][s]=e[s][i]=u;var o=0;t.size+1e-10>=Math.min(r[i].size,r[s].size)?o=1:t.size<=1e-10&&(o=-1),a[i][s]=a[s][i]=o}),{distances:e,constraints:a}}(t,a,i),o=u.distances,h=u.constraints,g=x(o.map(x))/o.length;o=o.map(function(t){return t.map(function(t){return t/g})});var p,v,d=function(t,r){return function(t,r,n,e){var a,i=0;for(a=0;a<r.length;++a)r[a]=0;for(a=0;a<n.length;++a)for(var s=t[2*a],u=t[2*a+1],o=a+1;o<n.length;++o){var f=t[2*o],l=t[2*o+1],h=n[a][o],x=e[a][o],c=(f-s)*(f-s)+(l-u)*(l-u),g=Math.sqrt(c),p=c-h*h;x>0&&g<=h||x<0&&g>=h||(i+=2*p*p,r[2*a]+=4*p*(s-f),r[2*a+1]+=4*p*(u-l),r[2*o]+=4*p*(f-s),r[2*o+1]+=4*p*(l-u))}return i}(t,r,o,h)};for(n=0;n<e;++n){var M=f(2*o.length).map(Math.random);v=y(d,M,r),(!p||v.fx<p.fx)&&(p=v)}var z=p.x,b={};for(n=0;n<a.length;++n){var w=a[n];b[w.sets[0]]={x:z[2*n]*g,y:z[2*n+1]*g,radius:Math.sqrt(w.size/Math.PI)}}if(r.history)for(n=0;n<r.history.length;++n)c(r.history[n].x,g);return b}(t,r);b(e,t)+1e-8<b(n,t)&&(n=e)}return n}function z(t){function r(t,r){return r.size-t.size}function n(t){return t.set in v}function e(t,r){i[r].x=t.x,i[r].y=t.y,v[r]=!0}for(var a,i={},s={},o=0;o<t.length;++o){var f=t[o];1==f.sets.length&&(a=f.sets[0],i[a]={x:1e10,y:1e10,rowid:i.length,size:f.size,radius:Math.sqrt(f.size/Math.PI)},s[a]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),o=0;o<t.length;++o){var l=t[o],h=l.hasOwnProperty("weight")?l.weight:1,x=l.sets[0],c=l.sets[1];l.size+L>=Math.min(i[x].size,i[c].size)&&(h=0),s[x].push({set:c,size:l.size,weight:h}),s[c].push({set:x,size:l.size,weight:h})}var g=[];for(a in s)if(s.hasOwnProperty(a)){var p=0;for(o=0;o<s[a].length;++o)p+=s[a][o].size*s[a][o].weight;g.push({set:a,size:p})}g.sort(r);var v={};for(e({x:0,y:0},g[0].set),o=1;o<g.length;++o){var y=g[o].set,d=s[y].filter(n);if(a=i[y],d.sort(r),0===d.length)throw"ERROR: missing pairwise overlap information";for(var M=[],z=0;z<d.length;++z){var w=i[d[z].set],I=m(a.radius,w.radius,d[z].size);M.push({x:w.x+I,y:w.y}),M.push({x:w.x-I,y:w.y}),M.push({y:w.y+I,x:w.x}),M.push({y:w.y-I,x:w.x});for(var R=z+1;R<d.length;++R)for(var P=i[d[R].set],A=m(a.radius,P.radius,d[R].size),O=u({x:w.x,y:w.y,radius:I},{x:P.x,y:P.y,radius:A}),q=0;q<O.length;++q)M.push(O[q])}var j=1e50,k=M[0];for(z=0;z<M.length;++z){i[y].x=M[z].x,i[y].y=M[z].y;var F=b(i,t);F<j&&(j=F,k=M[z])}e(k,y)}return i}function b(t,r){function n(r){return r.map(function(r){return t[r]})}for(var a=0,u=0;u<r.length;++u){var o,f=r[u];if(1!=f.sets.length){if(2==f.sets.length){var l=t[f.sets[0]],h=t[f.sets[1]];o=s(l.radius,h.radius,i(l,h))}else o=e(n(f.sets));a+=(f.hasOwnProperty("weight")?f.weight:1)*(o-f.size)*(o-f.size)}}return a}function w(t,r,n){null===n?t.sort(function(t,r){return r.radius-t.radius}):t.sort(n);var e;if(t.length>0){var a=t[0].x,i=t[0].y;for(e=0;e<t.length;++e)t[e].x-=a,t[e].y-=i}if(t.length>1){var s,u,o=Math.atan2(t[1].x,t[1].y)-r,f=Math.cos(o),l=Math.sin(o);for(e=0;e<t.length;++e)s=t[e].x,u=t[e].y,t[e].x=f*s-l*u,t[e].y=l*s+f*u}if(t.length>2){for(var h=Math.atan2(t[2].x,t[2].y)-r;h<0;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(h>Math.PI){var x=t[1].y/(1e-10+t[1].x);for(e=0;e<t.length;++e){var c=(t[e].x+x*t[e].y)/(1+x*x);t[e].x=2*c-t[e].x,t[e].y=2*c*x-t[e].y}}}}function I(t){function r(t){return t.parent!==t&&(t.parent=r(t.parent)),t.parent}function n(t,n){var e=r(t),a=r(n);e.parent=a}t.map(function(t){t.parent=t});for(var e=0;e<t.length;++e)for(var a=e+1;a<t.length;++a){var s=t[e].radius+t[a].radius;i(t[e],t[a])+1e-10<s&&n(t[a],t[e])}var u,o={};for(e=0;e<t.length;++e)(u=r(t[e]).parent.setid)in o||(o[u]=[]),o[u].push(t[e]);t.map(function(t){delete t.parent});var f=[];for(u in o)o.hasOwnProperty(u)&&f.push(o[u]);return f}function R(t){var r=function(r){return{max:Math.max.apply(null,t.map(function(t){return t[r]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[r]-t.radius}))}};return{xRange:r("x"),yRange:r("y")}}function P(t,r,n){function e(t,r,n){if(t){var e,a,i,u=t.bounds;r?e=l.xRange.max-u.xRange.min+h:(e=l.xRange.max-u.xRange.max,(i=(u.xRange.max-u.xRange.min)/2-(l.xRange.max-l.xRange.min)/2)<0&&(e+=i)),n?a=l.yRange.max-u.yRange.min+h:(a=l.yRange.max-u.yRange.max,(i=(u.yRange.max-u.yRange.min)/2-(l.yRange.max-l.yRange.min)/2)<0&&(a+=i));for(var o=0;o<t.length;++o)t[o].x+=e,t[o].y+=a,s.push(t[o])}}null===r&&(r=Math.PI/2);var a,i,s=[];for(i in t)if(t.hasOwnProperty(i)){var u=t[i];s.push({x:u.x,y:u.y,radius:u.radius,setid:i})}var o=I(s);for(a=0;a<o.length;++a){w(o[a],r,n);var f=R(o[a]);o[a].size=(f.xRange.max-f.xRange.min)*(f.yRange.max-f.yRange.min),o[a].bounds=f}o.sort(function(t,r){return r.size-t.size});for(var l=(s=o[0]).bounds,h=(l.xRange.max-l.xRange.min)/50,x=1;x<o.length;)e(o[x],!0,!1),e(o[x+1],!1,!0),e(o[x+2],!0,!0),x+=3,l=R(s);var c={};for(a=0;a<s.length;++a)c[s[a].setid]=s[a];return c}function A(t,r,n,e){var a=[],i=[];for(var s in t)t.hasOwnProperty(s)&&(i.push(s),a.push(t[s]));r-=2*e,n-=2*e;var u=R(a),o=u.xRange,f=u.yRange;if(o.max==o.min||f.max==f.min)return console.log("not scaling solution: zero size detected"),t;for(var l=r/(o.max-o.min),h=n/(f.max-f.min),x=Math.min(h,l),c=(r-(o.max-o.min)*x)/2,g=(n-(f.max-f.min)*x)/2,p={},v=0;v<a.length;++v){var y=a[v];p[i[v]]={radius:x*y.radius,x:e+c+(y.x-o.min)*x,y:e+g+(y.y-f.min)*x}}return p}function O(t,n){return function(){for(var e,a=r.select(this),i=a.datum(),s=t[i.sets[0]].radius||50,u=n(i)||"",o=u.split(/\s+/).reverse(),f=(u.length+o.length)/3,l=o.pop(),h=[l],x=0,c=a.text(null).append("tspan").text(l);;){if(!(l=o.pop()))break;h.push(l),e=h.join(" "),c.text(e),e.length>f&&c.node().getComputedTextLength()>s&&(h.pop(),c.text(h.join(" ")),h=[l],c=a.append("tspan").text(l),x++)}var g=.35-1.1*x/2,p=a.attr("x"),v=a.attr("y");a.selectAll("tspan").attr("x",p).attr("y",v).attr("dy",function(t,r){return g+1.1*r+"em"})}}function q(t,r,n){var e,a,s=r[0].radius-i(r[0],t);for(e=1;e<r.length;++e)(a=r[e].radius-i(r[e],t))<=s&&(s=a);for(e=0;e<n.length;++e)(a=i(n[e],t)-n[e].radius)<=s&&(s=a);return s}function j(t,r){var n,a=[];for(n=0;n<t.length;++n){var s=t[n];a.push({x:s.x,y:s.y}),a.push({x:s.x+s.radius/2,y:s.y}),a.push({x:s.x-s.radius/2,y:s.y}),a.push({x:s.x,y:s.y+s.radius/2}),a.push({x:s.x,y:s.y-s.radius/2})}var u=a[0],f=q(a[0],t,r);for(n=1;n<a.length;++n){var l=q(a[n],t,r);l>=f&&(u=a[n],f=l)}var h=p(function(n){return-1*q({x:n[0],y:n[1]},t,r)},[u.x,u.y],{maxIterations:500,minErrorDelta:1e-10}).x,x={x:h[0],y:h[1]},c=!0;for(n=0;n<t.length;++n)if(i(x,t[n])>t[n].radius){c=!1;break}for(n=0;n<r.length;++n)if(i(x,r[n])<r[n].radius){c=!1;break}if(!c)if(1==t.length)x={x:t[0].x,y:t[0].y};else{var g={};e(t,g),x=0===g.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==g.arcs.length?{x:g.arcs[0].circle.x,y:g.arcs[0].circle.y}:r.length?j(t,[]):o(g.arcs.map(function(t){return t.p1}))}return x}function k(t){var r={},n=[];for(var e in t)n.push(e),r[e]=[];for(var a=0;a<n.length;a++)for(var s=t[n[a]],u=a+1;u<n.length;++u){var o=t[n[u]],f=i(s,o);f+o.radius<=s.radius+1e-10?r[n[u]].push(n[a]):f+s.radius<=o.radius+1e-10&&r[n[a]].push(n[u])}return r}function F(t,r){for(var n={},e=k(t),a=0;a<r.length;++a){for(var i=r[a].sets,s={},u={},o=0;o<i.length;++o){s[i[o]]=!0;for(var f=e[i[o]],l=0;l<f.length;++l)u[f[l]]=!0}var h=[],x=[];for(var c in t)c in s?h.push(t[c]):c in u||x.push(t[c]);var g=j(h,x);n[i]=g,g.disjoint&&r[a].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function C(t,r,n){var e=[];return e.push("\nM",t,r),e.push("\nm",-n,0),e.push("\na",n,n,0,1,0,2*n,0),e.push("\na",n,n,0,1,0,2*-n,0),e.join(" ")}function D(t){var r=t.split(" ");return{x:parseFloat(r[1]),y:parseFloat(r[2]),radius:-parseFloat(r[4])}}function T(t){var r={};e(t,r);var n=r.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var a=n[0].circle;return C(a.x,a.y,a.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],s=0;s<n.length;++s){var u=n[s],o=u.circle.radius,f=u.width>o;i.push("\nA",o,o,0,f?1:0,1,u.p1.x,u.p1.y)}return i.join(" ")}var E=1e-10,L=1e-10;t.intersectionArea=e,t.circleCircleIntersection=u,t.circleOverlap=s,t.circleArea=a,t.distance=i,t.venn=d,t.greedyLayout=z,t.scaleSolution=A,t.normalizeSolution=P,t.bestInitialLayout=M,t.lossFunction=b,t.disjointCluster=I,t.distanceFromIntersectArea=m,t.VennDiagram=function(){function t(t){function x(t){return t.sets in m?m[t.sets]:1==t.sets.length?""+t.sets[0]:void 0}var c=t.datum(),g=v(c);u&&(g=P(g,s,h));var y=A(g,n,e,a),d=F(y,c),m={};c.forEach(function(t){t.label&&(m[t.sets]=t.label)}),t.selectAll("svg").data([y]).enter().append("svg");var M=t.select("svg").attr("width",n).attr("height",e),z={},b=!1;M.selectAll(".venn-area path").each(function(t){var n=r.select(this).attr("d");1==t.sets.length&&n&&(b=!0,z[t.sets[0]]=D(n))});var w=function(t){return function(r){return T(t.sets.map(function(t){var a=z[t],i=y[t];return a||(a={x:n/2,y:e/2,radius:1}),i||(i={x:n/2,y:e/2,radius:1}),{x:a.x*(1-r)+i.x*r,y:a.y*(1-r)+i.y*r,radius:a.radius*(1-r)+i.radius*r}}))}},I=M.selectAll(".venn-area").data(c,function(t){return t.sets}),R=I.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),q=R.append("path"),j=R.append("text").attr("class","label").text(function(t){return x(t)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",n/2).attr("y",e/2);f&&(q.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return p(t.sets)}).style("fill-opacity",".25"),j.style("fill",function(t){return 1==t.sets.length?p(t.sets):"#444"}));var k=t;b?(k=t.transition("venn").duration(i)).selectAll("path").attrTween("d",w):k.selectAll("path").attr("d",function(t){return T(t.sets.map(function(t){return y[t]}))});var C=k.selectAll("text").filter(function(t){return t.sets in d}).text(function(t){return x(t)}).attr("x",function(t){return Math.floor(d[t.sets].x)}).attr("y",function(t){return Math.floor(d[t.sets].y)});o&&(b?"on"in C?C.on("end",O(y,x)):C.each("end",O(y,x)):C.each(O(y,x)));var E=I.exit().transition("venn").duration(i).remove();E.selectAll("path").attrTween("d",w);var L=E.selectAll("text").attr("x",n/2).attr("y",e/2);return null!==l&&(j.style("font-size","0px"),C.style("font-size",l),L.style("font-size","0px")),{circles:y,textCentres:d,nodes:I,enter:R,update:k,exit:E}}var n=600,e=350,a=15,i=1e3,s=Math.PI/2,u=!0,o=!0,f=!0,l=null,h=null,x={},c=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],g=0,p=function(t){if(t in x)return x[t];var r=x[t]=c[g];return(g+=1)>=c.length&&(g=0),r},v=d;return t.wrap=function(r){return arguments.length?(o=r,t):o},t.width=function(r){return arguments.length?(n=r,t):n},t.height=function(r){return arguments.length?(e=r,t):e},t.padding=function(r){return arguments.length?(a=r,t):a},t.colours=function(r){return arguments.length?(p=r,t):p},t.fontSize=function(r){return arguments.length?(l=r,t):l},t.duration=function(r){return arguments.length?(i=r,t):i},t.layoutFunction=function(r){return arguments.length?(v=r,t):v},t.normalize=function(r){return arguments.length?(u=r,t):u},t.styled=function(r){return arguments.length?(f=r,t):f},t.orientation=function(r){return arguments.length?(s=r,t):s},t.orientationOrder=function(r){return arguments.length?(h=r,t):h},t},t.wrapText=O,t.computeTextCentres=F,t.computeTextCentre=j,t.sortAreas=function(t,r){function n(t){for(var r=0;r<t.length;++r)if(!(t[r]in a))return!1;return!0}for(var e=k(t.selectAll("svg").datum()),a={},i=0;i<r.sets.length;++i){var s=r.sets[i];for(var u in e)for(var o=e[u],f=0;f<o.length;++f)if(o[f]==s){a[u]=!0;break}}t.selectAll("g").sort(function(t,e){return t.sets.length!=e.sets.length?t.sets.length-e.sets.length:t==r?n(e.sets)?-1:1:e==r?n(t.sets)?1:-1:e.size-t.size})},t.circlePath=C,t.circleFromPath=D,t.intersectionAreaPath=T,Object.defineProperty(t,"__esModule",{value:!0})});