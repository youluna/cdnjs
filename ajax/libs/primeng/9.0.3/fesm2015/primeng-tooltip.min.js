import{ElementRef,NgZone,Input,Directive,NgModule}from"@angular/core";import{CommonModule}from"@angular/common";import{DomHandler}from"primeng/dom";var __decorate=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,h=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(h=(n<3?s(h):n>3?s(e,i,h):s(e,i))||h);return n>3&&h&&Object.defineProperty(e,i,h),h};let Tooltip=class{constructor(t,e){this.el=t,this.zone=e,this.tooltipPosition="right",this.tooltipEvent="hover",this.appendTo="body",this.tooltipZIndex="auto",this.escape=!0}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{"hover"===this.tooltipEvent?(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener)):"focus"===this.tooltipEvent&&(this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this),this.el.nativeElement.addEventListener("focus",this.focusListener),this.el.nativeElement.addEventListener("blur",this.blurListener))})}onMouseEnter(t){this.container||this.showTimeout||this.activate()}onMouseLeave(t){this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onClick(t){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.showDelay?this.showTimeout=setTimeout(()=>{this.show()},this.showDelay):this.show(),this.life){let t=this.showDelay?this.life+this.showDelay:this.life;this.hideTimeout=setTimeout(()=>{this.hide()},t)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.hideDelay?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.hideDelay)):this.hide()}get text(){return this._text}set text(t){this._text=t,this.active&&(this._text?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())}create(){this.container=document.createElement("div");let t=document.createElement("div");t.className="ui-tooltip-arrow",this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="ui-tooltip-text ui-shadow ui-corner-all",this.updateText(),this.positionStyle&&(this.container.style.position=this.positionStyle),this.container.appendChild(this.tooltipText),"body"===this.appendTo?document.body.appendChild(this.container):"target"===this.appendTo?DomHandler.appendChild(this.container,this.el.nativeElement):DomHandler.appendChild(this.container,this.appendTo),this.container.style.display="inline-block"}show(){this.text&&!this.disabled&&(this.create(),this.align(),DomHandler.fadeIn(this.container,250),"auto"===this.tooltipZIndex?this.container.style.zIndex=++DomHandler.zindex:this.container.style.zIndex=this.tooltipZIndex,this.bindDocumentResizeListener())}hide(){this.remove()}updateText(){this.escape?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this._text))):this.tooltipText.innerHTML=this._text}align(){switch(this.tooltipPosition){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.appendTo||"target"===this.appendTo){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+DomHandler.getWindowScrollLeft(),top:t.top+DomHandler.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let t=this.getHostOffset(),e=t.left+DomHandler.getOuterWidth(this.el.nativeElement),i=t.top+(DomHandler.getOuterHeight(this.el.nativeElement)-DomHandler.getOuterHeight(this.container))/2;this.container.style.left=e+"px",this.container.style.top=i+"px"}alignLeft(){this.preAlign("left");let t=this.getHostOffset(),e=t.left-DomHandler.getOuterWidth(this.container),i=t.top+(DomHandler.getOuterHeight(this.el.nativeElement)-DomHandler.getOuterHeight(this.container))/2;this.container.style.left=e+"px",this.container.style.top=i+"px"}alignTop(){this.preAlign("top");let t=this.getHostOffset(),e=t.left+(DomHandler.getOuterWidth(this.el.nativeElement)-DomHandler.getOuterWidth(this.container))/2,i=t.top-DomHandler.getOuterHeight(this.container);this.container.style.left=e+"px",this.container.style.top=i+"px"}alignBottom(){this.preAlign("bottom");let t=this.getHostOffset(),e=t.left+(DomHandler.getOuterWidth(this.el.nativeElement)-DomHandler.getOuterWidth(this.container))/2,i=t.top+DomHandler.getOuterHeight(this.el.nativeElement);this.container.style.left=e+"px",this.container.style.top=i+"px"}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let e="ui-tooltip ui-widget ui-tooltip-"+t;this.container.className=this.tooltipStyleClass?e+" "+this.tooltipStyleClass:e}isOutOfBounds(){let t=this.container.getBoundingClientRect(),e=t.top,i=t.left,o=DomHandler.getOuterWidth(this.container),s=DomHandler.getOuterHeight(this.container),n=DomHandler.getViewport();return i+o>n.width||i<0||e<0||e+s>n.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindEvents(){"hover"===this.tooltipEvent?(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)):"focus"===this.tooltipEvent&&(this.el.nativeElement.removeEventListener("focus",this.focusListener),this.el.nativeElement.removeEventListener("blur",this.blurListener)),this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.appendTo?document.body.removeChild(this.container):"target"===this.appendTo?this.el.nativeElement.removeChild(this.container):DomHandler.removeChild(this.container,this.appendTo)),this.unbindDocumentResizeListener(),this.clearTimeouts(),this.container=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.remove()}};Tooltip.ctorParameters=(()=>[{type:ElementRef},{type:NgZone}]),__decorate([Input()],Tooltip.prototype,"tooltipPosition",void 0),__decorate([Input()],Tooltip.prototype,"tooltipEvent",void 0),__decorate([Input()],Tooltip.prototype,"appendTo",void 0),__decorate([Input()],Tooltip.prototype,"positionStyle",void 0),__decorate([Input()],Tooltip.prototype,"tooltipStyleClass",void 0),__decorate([Input()],Tooltip.prototype,"tooltipZIndex",void 0),__decorate([Input("tooltipDisabled")],Tooltip.prototype,"disabled",void 0),__decorate([Input()],Tooltip.prototype,"escape",void 0),__decorate([Input()],Tooltip.prototype,"showDelay",void 0),__decorate([Input()],Tooltip.prototype,"hideDelay",void 0),__decorate([Input()],Tooltip.prototype,"life",void 0),__decorate([Input("pTooltip")],Tooltip.prototype,"text",null);let TooltipModule=class{};TooltipModule=__decorate([NgModule({imports:[CommonModule],exports:[Tooltip=__decorate([Directive({selector:"[pTooltip]"})],Tooltip)],declarations:[Tooltip]})],TooltipModule);export{Tooltip,TooltipModule};